function show_BubbleNotice(t,e){td__showBubbleNotice(t,e,"")}function close_BubbleNotice(t){td__closeBubbleNotice(t)}function td__showBubbleNotice(t,e,o){void 0===e&&(e=6e3);var n=document.querySelectorAll(".td__cornernotice").length+1,i=document.querySelector(".t-help-bubble"),i=(i&&(i.style.display="none"),document.getElementById("tc-news")),i=(i&&(i.style.display="none"),document.querySelector(".tc-errors"));i&&(i.style.display="none");document.body.insertAdjacentHTML("beforeend",'<div class="td__cornernotice" data-tilda-corner-notice="'+n+'" style="position: fixed;z-index:10001;background-color:'+("ok"==o?"green":"error"==o?"red":"#111")+';width:350px;bottom:50px;right:-350px;border: 1px solid #ccc;border-radius:10px;opacity:0;"><div class="td__cornernotice__close" style="position:absolute;right:10px;top:3px;color:#fff;cursor: pointer;">&times;</div><div class="td__cornernotice__text" style="color:#fff;font-family:\'tfutura\',Arial,sans-serif;font-size:16px;padding:20px 30px;">'+t+"</div><style>.td__cornernotice__text a{color:#ff855d;text-decoration: underline;}</style></div>");var r=document.querySelector('.td__cornernotice[data-tilda-corner-notice="'+n+'"]');1<n&&(i=document.querySelector('.td__cornernotice[data-tilda-corner-notice="'+(n-1)+'"]'))&&(t=(o=window.getComputedStyle(i)).getPropertyValue("bottom"),i=o.getPropertyValue("height"),t=parseInt(t.replace(/[^0-9.]/g,""),10)||0,i=parseInt(i.replace(/[^0-9.]/g,""),10)||0,n<5&&r?r.style.bottom=t+i+5+"px":r&&(r.style.bottom=t+25+"px")),r&&(r.style.transitionProperty="opacity, right",r.style.transitionDuration="400ms",r.style.transitionTimingFunction="ease-out",setTimeout(function(){r.style.opacity="1",r.style.right="20px"},0),setTimeout(function(){td__closeBubbleNotice(n)},e+400),o=r.querySelector(".td__cornernotice__close"))&&o.addEventListener("click",function(){var t=this.parentElement.getAttribute("data-tilda-corner-notice");td__closeBubbleNotice(parseInt(t,10)||0)})}function td__closeBubbleNotice(t){var e=t?document.querySelector('.td__cornernotice[data-tilda-corner-notice="'+t+'"]'):document.querySelector(".td__cornernotice");e&&(e.style.transitionProperty="opacity, right",e.style.transitionDuration="300ms",e.style.transitionTimingFunction="ease-in",setTimeout(function(){e.style.opacity="0",e.style.right="0px"},0),setTimeout(function(){var t;e.remove(),!(e=document.querySelector(".td__cornernotice"))&&((t=document.querySelector(".t-help-bubble"))&&(t.style.display="block"),(t=document.getElementById("tc-news"))&&(t.style.display="block"),t=document.querySelector(".tc-errors"))&&(t.style.display="block")},300))}function showOnboardingPin(e,t,o,n,i,r,s,c){window.innerWidth<1200||localStorage.getItem("tp-pin-"+e)||(document.body.insertAdjacentHTML("afterbegin",'<div class="onboardingpin" id="'+e+'" data-pin-left="'+o+'" data-pin-top="'+n+'" data-pin-fixed="'+r+'" data-pin-elem="'+i+'"><div class="onboardingpin__wrapper"><div class="onboardingpin__pin"></div><div class="onboardingpin__bubble" style="'+(-2e3<s?"left:"+s+"px;":"")+(-2e3<c?"top:"+c+"px;":"")+'" id="'+e+'"><div class="onboardingpin__msg">'+t+'</div><div class="onboardingpin__btn-close">OK</div></div></div></div>'),(o=document.getElementById(e))&&updatePinPosition(o),o&&o.addEventListener("mouseover",function(){var t;this.classList.contains("onboardingpin_opened")||(this.classList.add("onboardingpin_opened"),(t=this.querySelector(".onboardingpin__bubble"))&&(t.style.removeProperty("transition"),t.style.opacity="0",t.style.transition="opacity 500ms ease-out",t.style.opacity="1"),document.querySelector(".onboardingpin__filter")||(document.body.insertAdjacentHTML("afterbegin",'<div class="onboardingpin__filter" style="opacity:0;"></div>'),document.querySelector(".onboardingpin__filter"),t.style.transition="opacity 300ms ease-out",t.style.opacity="0.7",t.addEventListener("click",closeOnboardingPinHtml)),localStorage.setItem("tp-pin-"+e,Date.now()))}),(n=document.querySelector(".onboardingpin__btn-close"))&&n.addEventListener("click",closeOnboardingPinHtml),o&&setInterval(updatePinPosition.bind(null,o),2e3))}function updatePinPosition(t){var e,o,n,i,r,s,c;t&&(e=t.getAttribute("data-pin-left"),e=parseInt(e,10)||0,o=t.getAttribute("data-pin-top"),o=parseInt(o,10)||0,n=t.getAttribute("data-pin-fixed")||"",i=c=0,(r=(s=t.getAttribute("data-pin-elem")||"")?document.querySelector(s):r)&&(c=(s=r.getBoundingClientRect()).left+window.pageXOffset,"fixed"!==n)&&(i=s.top+window.pageYOffset),"fixed"===n&&(t.style.position="fixed"),t.style.left=e+c+"px",t.style.top=o+i+"px")}function closeOnboardingPinHtml(){var t=document.querySelector(".onboardingpin_opened"),t=(t&&t.remove(),document.querySelector(".onboardingpin__filter"));t&&t.remove()}function check_logout(t){if("string"==typeof t&&"\x3c!--tlp--\x3e"===t.substring(0,10))throw window.location="/login/",new Error("Sorry, you logout!");if("string"==typeof t&&"\x3c!--tpbaa--\x3e"===t.substring(0,12))throw window.location="/projects/",new Error("Sorry, this page belongs to another account!")}function str_stripTags(t){return t="string"==typeof t?t&&t.replace(/(<([^>]+)>)/gi,""):t}function getCSRF(){var t,e;return"string"==typeof window.csrf&&window.csrf?window.csrf:(e="notset",(t=document.getElementById("csrf"))?void 0===(e=t.getAttribute("content"))||e?void 0===e&&(e="err. is undefined."):e="err. is empty. "+e:e="err. len is: 0",e)}function logAjaxError(t,e,o,n,i){console.log("Sending API error to stat.."),void 0===n&&(n=""),void 0===o&&(o=""),void 0===e&&(e=""),"object"==typeof i&&null!==i||(i={}),void 0!==window.userid&&(i.userid=window.userid),void 0!==window.projectid&&(i.projectid=window.projectid),void 0!==window.pageid&&(i.pageid=window.pageid),void 0!==window.usercountry&&(i.usercountry=window.usercountry),void 0!==window.lang&&(i.lang=window.lang);var r=new XMLHttpRequest;r.open("POST","https://sysstat.tildacdn.com/api/ajax/error/",!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({account_id:"cc",event_id:(new Date).getTime()+"-"+Math.floor(1e5*Math.random()),url:t,data:e,status_code:n,message_text:o,location:window.location.href,debug:i}))}function logNetworkError(t,e,o,n,i){console.log("Sending Network error to stat.."),void 0===t&&(t=""),void 0===o&&(o=""),"object"==typeof i&&null!==i||(i={}),0<(n=void 0===n?"":n)&&(n=parseInt(n)),void 0!==window.userid&&(i.userid=window.userid),void 0!==window.projectid&&(i.projectid=window.projectid),void 0!==window.pageid&&(i.pageid=window.pageid),void 0!==window.usercountry&&(i.usercountry=window.usercountry),void 0!==window.lang&&(i.lang=window.lang);var r=new XMLHttpRequest;r.open("POST","https://sysstat.tildacdn.com/api/net/error/",!0),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({account_id:"cc",type:t,url:e,data:o,time:n,location:window.location.href,debug:i}))}function errorLog(t){console.log("Sending API error to stat.."),td__ajax({url:"https://sysstat.tildacdn.com/api/ajax/error/",dataToSend:t,ui:{isQuiet:!0},onSuccess:function(){console.log("Error log sent ok")}})}function showAlert(t,e){void 0===e&&(e=6e3);var o=document.querySelector(".t-help-bubble");o&&(o.style.display="none");document.body.insertAdjacentHTML("beforeend",'<div class="cornernotice" style="border-radius:0;"><div class="cornernotice__close" style="font-size:20px;">&times;</div><div class="cornernotice__text" style="background-color:red;color:#fff;fonr-weight:600;font-size:20px;">'+t+"</div></div>");o=document.querySelector(".cornernotice");o.style.transitionProperty="opacity, right",o.style.transitionDuration="400ms",o.style.transitionTimingFunction="ease-in",o.style.opacity="1",o.style.right="20px",setTimeout(closeAlert,e),o.querySelector(".cornernotice__close").addEventListener("click",closeAlert)}function closeAlert(){var e=document.querySelector(".cornernotice");e&&(e.style.transitionDuration="300ms",e.style.transitionTimingFunction="ease-out",e.style.opacity="0",e.style.right="0px",setTimeout(function(){e.remove();var t=document.querySelector(".t-help-bubble");t&&(t.style.display="block")},300))}function logout(){var t=document.querySelector(".t-menu__item-exit"),e=(t&&(t.style.pointerEvents="none",t.style.opacity="0.5"),{comm:"logout",csrf:getCSRF()});void 0!==window.xhr_submit&&window.xhr_submit.abort(),window.xhr_submit=td__ajax({url:"/identity/submit/logout/",dataToSend:e,ui:{ctext:"logout"},onSuccess:function(t){var e;""!==t&&"logout"===t.substring(0,6)?0<t.indexOf("goto:")?(e=t.indexOf("goto:")+5,e=t.substr(e),window.location.href=e):window.location.href="/login/":(alert("Logout error.."),console.log("error logout response:"+t),window.location.href="/login/")},onComplete:function(){delete window.xhr_submit,t&&(t.style.pointerEvents="auto",t.style.opacity="1")}})}function getCookie(t){t=("; "+document.cookie).split("; "+t+"=");if(2===t.length)return t.pop().split(";").shift()}function delCookie(t){document.cookie=t+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",console.log("del")}function tc__onFuncLoad(t,e,o,n){if("function"==typeof window[t]||"object"==typeof window[t])e();else{if("complete"===document.readyState&&(void 0===n&&(n=1),200==++n))throw new Error("Wait func: "+t+" is undefined");setTimeout(function(){tc__onFuncLoad(t,e,o,n)},o||100)}}function tc__loadCSSFile(t){var e=window.document.createElement("link"),o=window.ver?"?ver="+window.ver:"";e.rel="stylesheet",e.type="text/css",e.media="all",e.href=t+o,document.head.appendChild(e)}function tc__loadJSFile(t,e){var o=document.createElement("script"),n=window.ver?"?ver="+window.ver:"";o.src=t+n,e&&(o.onload=e),document.head.appendChild(o)}function tc__scrollGuard(t){function e(t){t.target.closest(".pe-textarea, .ql-toolbar")||(t.deltaY<0&&0===this.scrollTop||0<t.deltaY&&this.scrollTop+this.clientHeight===this.scrollHeight)&&t.preventDefault()}t&&t instanceof Element&&(t.removeEventListener("wheel",e,{passive:!1}),t.addEventListener("wheel",e,{passive:!1}))}function tc__connectTSortable(t){var e="https://front.tildacdn.com/plugins/sortable/t-sortable.min.css",o=document.head.querySelector('link[href*="'+e+'"]'),e=(o||((o=document.createElement("link")).href=e+(window.ver?"?v="+window.ver:""),o.rel="stylesheet",document.head.appendChild(o)),"https://front.tildacdn.com/plugins/sortable/t-sortable.min.js"),o=document.head.querySelector('script[src*="'+e+'"]');o&&"function"==typeof t?"function"==typeof TSortable?t():o.addEventListener("load",t):o||((o=document.createElement("script")).src=e+(window.ver?"?v="+window.ver:""),o.async=!0,"function"==typeof t&&o.addEventListener("load",t),document.head.appendChild(o))}function tc__serializeArray(t){var o=[],t=Array.prototype.slice.call(t.elements);return Array.prototype.forEach.call(t,function(e){!e.name||e.disabled||-1<["file","reset","submit","button"].indexOf(e.type)||("select-multiple"===e.type?Array.prototype.slice.call(e.options).forEach(function(t){t.selected&&o.push({name:e.name,value:t.value})}):-1<["checkbox","radio"].indexOf(e.type)&&!e.checked||o.push({name:e.name,value:e.value}))}),o}function tc__showDialog(t,e){var o,n,i,r,s;["alert","confirm"].indexOf(e)<0||(r={alert:{id:"alert-dialog",title:"",msg:"",okButtonText:"OK",yesButtonText:"",noButtonText:""},confirm:{id:"confirm-dialog",title:"You have unsaved changes",msg:"You have unsaved changes on the page. Are you sure you want to close this panel?",okButtonText:"",yesButtonText:"Exit without saving",noButtonText:"Go back"}},!document.getElementById(r[e].id)&&(t.title||(t.title=r[e].title),t.msg||(t.msg=r[e].msg),t.okButtonText||(t.okButtonText=r[e].okButtonText),t.yesButtonText||(t.yesButtonText=r[e].yesButtonText),t.noButtonText||(t.noButtonText=r[e].noButtonText),s='<div id="'+e+'-dialog" class="tc-custom-dialog tc-'+e+'-dialog">\t<div class="tc-custom-dialog__wrapper">\t\t<div class="tc-custom-dialog__window">\t\t\t<div class="tc-custom-dialog__head">'+(t.title?'<div class="tc-custom-dialog__title">'+t.title+"</div>":"")+'\t\t\t\t<div class="tc-custom-dialog__msg">\t\t\t\t\t'+t.msg+'\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="tc-custom-dialog__footer">\t\t\t\t<div class="tc-custom-dialog__buttons">'+(t.noButtonText?' <input type="button" value="'+t.noButtonText+'" class="tc-custom-dialog__btn tc-custom-dialog__btn_white js-ps-popup-no" tabindex="1">':"")+(t.yesButtonText?'<input type="button" value="'+t.yesButtonText+'" class="tc-custom-dialog__btn js-ps-popup-yes" tabindex="0">':"")+(t.okButtonText?' <input type="button" value="'+t.okButtonText+'" class="tc-custom-dialog__btn js-ps-popup-ok">':"")+"\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div>",t.placeToInsert?t.placeToInsert.insertAdjacentHTML("afterend",s):document.body.insertAdjacentHTML("beforeend",s),document.body.classList.add("td-body_popup-opened"),document.body.classList.add("t-body_popupshowed"),(o=document.getElementById(r[e].id))&&o.classList.add("td-popup_opened"),n=function(){document.body.removeEventListener("keydown",i),document.body.classList.remove("td-body_popup-opened"),document.body.classList.remove("t-body_popupshowed"),o.remove()},i=function(t){t.stopPropagation(),(27==t.keyCode||13==t.keyCode&&"alert"===e)&&n()},document.body.addEventListener("keydown",i),(s=o&&o.querySelector(".js-ps-popup-ok"))&&s.focus(),s&&s.addEventListener("click",function(){n(),"function"==typeof t.okCallback&&t.okCallback()}),(r=o&&o.querySelector(".js-ps-popup-yes"))&&r.focus(),r&&r.addEventListener("click",function(){n(),"function"==typeof t.yesCallback&&t.yesCallback()}),s=o.querySelector(".js-ps-popup-no"))&&s.addEventListener("click",n))}function td__encodeData(t,n){var e,i="";if(Array.isArray(t))Array.prototype.forEach.call(t,function(t,e){var o;"object"==typeof t&&"name"in t?(i+=i?"&":"",o="",o=n?encodeURIComponent(n+"["+t.name+"]"):encodeURIComponent(t.name),i+=o+"="+encodeURIComponent(t.value)):"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t?(i+=i?"&":"",o="",o=n?encodeURIComponent(n+"["+e+"]"):encodeURIComponent(e),i+=o+"="+encodeURIComponent(t)):"object"==typeof t&&(i=(i+=i?"&":"")+td__encodeData(t,n?n+"["+e+"]":e))});else if("object"==typeof t&&null!==t)for(var o in t)i+=i?"&":"","object"==typeof t[o]&&null!==t?i+=td__encodeData(t[o],n?n+"["+o+"]":o):"string"!=typeof t[o]&&"number"!=typeof t[o]&&"boolean"!=typeof t[o]&&null!==t[o]||(e="",e=n?encodeURIComponent(n+"["+o+"]"):encodeURIComponent(o),i+=e+"="+encodeURIComponent(t[o]));return i}function td__ajax(t){var e,o,n,i,r=t.url,s=t.dataToSend||"",c=t.ui||{isQuiet:!1,ctext:""},d=(c.ctext||(c.ctext=""),t.onSuccess),a=t.onError,l=t.onComplete,u=t.responseType||"text",t=t.method||"POST";if(r)return e=!1,"/page/publish/"===r||c.isQuiet||(showLoadIcon(),e=!0),o=Date.now(),(n=new XMLHttpRequest).open(t,r,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.timeout="/page/publish/"===r?4e4:25e3,n.responseType=u,i=td__encodeData(s),n.addEventListener("loadend",function(){tc__checkServerError(this)?tc__drawServerError(this.responseText):200<=this.status&&this.status<400?(e&&hideLoadIcon(),"function"==typeof d&&d.call(this,"json"===u?this.response:this.responseText),"function"==typeof l&&l.call(this)):this.dispatchEvent(new Event("error"))}),n.addEventListener("timeout",function(){e&&hideLoadIcon();var t=Date.now()-o;logNetworkError("ajax",r,s,t/1e3,{}),c.isQuiet||("function"==typeof tc__showDialog?tc__showDialog({msg:"Request timeout ("+c.ctext+"). Please reload the page and try again."},"alert"):alert("Request timeout ("+c.ctext+"). Please reload the page and try again.")),"function"==typeof a&&a.call(this,"timeout"),"function"==typeof l&&l.call(this)}),n.addEventListener("abort",function(){e&&hideLoadIcon(),"function"==typeof a&&a.call(this,"abort"),"function"==typeof l&&l.call(this)}),n.addEventListener("error",function(){e&&hideLoadIcon();var t=Date.now()-o;console.log(this.status),400<=n.status?(c.isQuiet||td__showBubbleNotice("Error status: "+this.status+". (action: "+c.ctext+")",6e3,"error"),logAjaxError(r,s,"comm: "+s.comm+", (td__ajax)",n.status,{ts_delta:parseInt(t/1e3),exception:"error",ui:c})):0===n.status&&t<100&&!c.isQuiet&&("function"==typeof tc__showDialog?tc__showDialog({msg:"Request error ("+c.ctext+"). Please check your Internet connection and try again."},"alert"):alert("Request error ("+c.ctext+"). Please check your Internet connection and try again.")),"function"==typeof a&&a.call(this,"error"),"function"==typeof l&&l.call(this)}),i&&"POST"===t?n.send(i):n.send(),n}function tc__checkServerError(t){return 200===t.status&&!("string"!=typeof t.response||!t.response.startsWith("Error(TNL-RQS")&&(!t.response.startsWith("Error(")||"-TNL"!==t.response.substring(9,13)))}function tc__drawServerError(t){var e=t.substring(6,t.indexOf(")")),o=t.substring(t.indexOf(".")+1),e='<div class="td__error500notice" style="max-width: 450px; color:#000; z-index:100000;"><div style="padding:40px;"><div><b>Server error: '+e+"</b>"+(""!==o?' <span style="opacity: 0.8;">('+o.toLowerCase()+")</span>":"")+"<br><br>Sorry, it looks like we have an internal server error.<br><br>"+t+'<br><br>Please wait for a minute, reload the page, and try again.<br><br>If you continue to see this message multiple times, please contact us at: <a href="mailto:team@tilda.cc" style="text-decoration:underline;">team@tilda.cc</a></div><div><br><br><img src="/tpl/img/broken-robot.png" width="90px"></div><br></div></div>';document.body.innerHTML=e}window.showLoadIcon=function(){var t=document.getElementById("loadicon");t||(document.body.insertAdjacentHTML("beforeend",'<div id="loadicon" class="spinner"></div>'),t=document.getElementById("loadicon")),t.style.display="block"},window.hideLoadIcon=function(){var t=document.getElementById("loadicon");t&&(t.style.display="none")},jQuery.cachedScript=function(t){return jQuery.ajax({dataType:"script",cache:!0,url:t})};
