(()=>{"use strict";var t=function(e,n,r,i){var o;n[0]=0;for(var a=1;a<n.length;a++){var s=n[a++],c=n[a]?(n[0]|=s?1:2,r[n[a++]]):n[++a];3===s?i[0]=c:4===s?i[1]=Object.assign(i[1]||{},c):5===s?(i[1]=i[1]||{})[n[++a]]=c:6===s?i[1][n[++a]]+=c+"":s?(o=e.apply(c,t(e,c,r,["",null])),i.push(o),c[0]?n[0]|=2:(n[a-2]=0,n[a]=o)):i.push(c)}return i},e=new Map;var n={EN:{none:"None",default:"Default",sharp:"Sharp shadow",small:"Small shadow",medium:"Medium shadow",large:"Large shadow",custom:"Custom",edit:"Edit",color:"Shadow color",opacity:"Opacity",x:"X-axis",y:"Y-axis",spread:"Spread",blur:"Blur",layer:"Layer",add_layer:"Add layer",delete_layer:"Delete layer",save:"Save",cancel:"Cancel",css:"CSS",copy:"Copy",layer_deleted:"Layer deleted",restore:"Restore",user_has_unsaved_changes_title:"You have unsaved changes",user_has_unsaved_changes_msg:"Shadow settings have been changed. Are you sure you want to close this panel without saving?",go_back:"Go back",exit_without_saving:"Exit without saving",invalid_shadow:"Invalid shadow format"},RU:{none:"Нет",default:"По умолчанию",sharp:"Резкая тень",small:"Легкая тень",medium:"Средняя тень",large:"Большая тень",custom:"Настраиваемая",edit:"Ред.",color:"Цвет тени",opacity:"Непрозрачность",x:"Ось X",y:"Ось Y",spread:"Растяжение",blur:"Размытие",layer:"Слой",add_layer:"Добавить слой",delete_layer:"Удалить слой",save:"Сохранить",cancel:"Отменить",css:"CSS",copy:"Скопировать",layer_deleted:"Слой удален",restore:"Восстановить",user_has_unsaved_changes_title:"Последние изменения не сохранены",user_has_unsaved_changes_msg:"Настройки тени были изменены. Вы уверены, что хотите закрыть панель без сохранения?",go_back:"Вернуться назад",exit_without_saving:"Выйти без сохранения",invalid_shadow:"Неверный формат тени"}},r=["https://tilda.cc/front/js/t-colorpicker.min.js","https://tilda.cc/front/css/t-colorpicker.min.css"],i=["https://front.tildacdn.com/plugins/previewbox/t-previewbox.min.js","https://front.tildacdn.com/plugins/previewbox/t-previewbox.min.css"],o=["https://front.tildacdn.com/plugins/sortable-lite/t-sortable-lite.min.js","https://front.tildacdn.com/plugins/sortable-lite/t-sortable-lite.min.css"],a="https://front.tildacdn.com/plugins/shadowpicker",s=[{label:"none",empty:!0,img:"".concat(a,"/assets/none.svg")},{label:"sharp",x:0,y:2,blur:3,spread:0,color:"#000b30",opacity:.25,img:"".concat(a,"/assets/sharp.svg")},{label:"small",x:0,y:15,blur:30,spread:-10,color:"#000b30",opacity:.2,img:"".concat(a,"/assets/small.svg")},{label:"medium",x:0,y:10,blur:20,spread:0,color:"#000b30",opacity:.25,img:"".concat(a,"/assets/medium.svg")},{label:"large",x:0,y:10,blur:40,spread:-2,color:"#000b30",opacity:.3,img:"".concat(a,"/assets/large.svg")},{label:"custom",custom:!0,img:"".concat(a,"/assets/custom.svg")}],c={swatchesKey:window.projectid,swatchSize:18,swatchGap:4,panelGap:6,isPanelFixed:!0,clearBtnSize:12},l={selector:".tsp-panel__layer",handleSelector:".tsp-panel__layer-handle",axis:"y",isAutoUpdateEnabled:!0,dragImage:{zIndex:9999,className:"tsp-panel__drag-image"}},u={color:"#000000",opacity:1,x:0,y:0,blur:0,spread:0},p={color:{isColor:!0,placeholder:u.color,label:"color"},opacity:{isNumber:!0,min:0,max:100,factor:100,units:"%",placeholder:"".concat(100*u.opacity,"%"),label:"opacity"},x:{isNumber:!0,placeholder:u.x.toString(),label:"x",isSingleLine:!0},y:{isNumber:!0,placeholder:u.y.toString(),label:"y",isSingleLine:!0},blur:{isNumber:!0,min:0,placeholder:u.blur.toString(),label:"blur",isSingleLine:!0},spread:{isNumber:!0,placeholder:u.spread.toString(),label:"spread",isSingleLine:!0}},h=["color","opacity","x","y","blur","spread"],f={theme:"pe-tooltip_noir",contentAsHTML:!0,interactive:!1,minWidth:50,maxWidth:300,position:"top",delay:300};function d(){d=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:P(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",y="executing",v="completed",m={};function b(){}function w(){}function _(){}var S={};l(S,a,(function(){return this}));var j=Object.getPrototypeOf,O=j&&j(j(A([])));O&&O!==n&&r.call(O,a)&&(S=O);var E=_.prototype=b.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,a,s){var c=p(t[i],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==g(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function P(e,n,r){var i=h;return function(o,a){if(i===y)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=L(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var l=p(e,n,r);if("normal"===l.type){if(i=r.done?v:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=v,r.method="throw",r.arg=l.arg)}}}function L(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=p(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(g(e)+" is not iterable")}return w.prototype=_,i(E,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,c,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},x(k.prototype),l(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(E),l(E,c,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function y(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e=function(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O,E,x=function(n){var r=e.get(this);return r||(r=new Map,e.set(this,r)),(r=t(this,r.get(n)||(r.set(n,r=function(t){for(var e,n,r=1,i="",o="",a=[0],s=function(t){1===r&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,t,i):3===r&&(t||i)?(a.push(3,t,i),r=2):2===r&&"..."===i&&t?a.push(4,t,0):2===r&&i&&!t?a.push(5,0,!0,i):r>=5&&((i||!t&&5===r)&&(a.push(r,0,i,n),r=6),t&&(a.push(r,t,0,n),r=6)),i=""},c=0;c<t.length;c++){c&&(1===r&&s(),s(c));for(var l=0;l<t[c].length;l++)e=t[c][l],1===r?"<"===e?(s(),a=[a],r=3):i+=e:4===r?"--"===i&&">"===e?(r=1,i=""):i=e+i[0]:o?e===o?o="":i+=e:'"'===e||"'"===e?o=e:">"===e?(s(),r=1):r&&("="===e?(r=5,n=i,i=""):"/"===e&&(r<5||">"===t[c][l+1])?(s(),3===r&&(a=a[0]),r=a,(a=a[0]).push(2,0,r),r=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(s(),r=2):i+=e),3===r&&"!--"===i&&(r=4,a=a[0])}return s(),a}(n)),r),arguments,[])).length>1?r:r[0]}.bind((function(t,e){this[0]=3;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if("function"==typeof t){var o=new t(e).render();return o.append.apply(o,_(r.flat())),o}if("string"==typeof t){var a=["svg","circle"].includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return e&&Object.entries(e).forEach((function(t){var e=w(t,2),n=e[0],r=e[1];if(n.startsWith("on"))Array.isArray(r)?r.forEach((function(t){return a.addEventListener(n.substring(2).toLowerCase(),t)})):a.addEventListener(n.substring(2).toLowerCase(),r);else if("className"===n){var i;(i=a.classList).add.apply(i,_(r.split(" ")))}else if("tooltip"===n)!function(t,e){if("function"!=typeof window.tooltipster||window.matchMedia("(hover: none)").matches)return;var n=C(e);window.tooltipster([t],m(m({},f),{},{content:n}))}(a,r);else if("bindTo"===n){if(Array.isArray(r)){var o=w(r,2),s=o[0],c=o[1];s&&"object"===g(s)&&"string"==typeof c&&(s[c]=a)}}else["string","number"].includes(g(r))?a.setAttribute(n,r):"boolean"==typeof r&&r&&a.setAttribute(n,"")})),a.append.apply(a,_(r.flat())),a}if(t instanceof Element)return t}));function k(){var t=[];return{on:function(e){t.push(e)},trigger:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(t){return t.apply(void 0,n)}))}}}function P(t){var e=(Array.isArray(t)?t:[t]).map((function(t){var e=t.split(".").pop(),n=t+(window.ver?"?v="+window.ver:"");return["js","css"].includes(e)?function(t,e){return new Promise((function(n,r){var i,o="style"===e,a=o?"link":"script",s=o?"href":"src";try{i=new URL(t,window.location.href).pathname}catch(e){i=t}var c=document.querySelector("".concat(a,"[").concat(s,'*="').concat(i,'"]'));if(c)return"true"===c.getAttribute("data-loading")?(c.addEventListener("load",n),void c.addEventListener("error",r)):n();var l=document.createElement(a);l.setAttribute(s,t),o&&l.setAttribute("rel","stylesheet"),l.setAttribute("data-loading","true"),l.addEventListener("load",(function(){return l.removeAttribute("data-loading"),n()})),l.addEventListener("error",(function(){return document.head.removeChild(l),r()})),document.head.appendChild(l)}))}(n,"js"===e?"script":"style"):Promise.reject("Unknown resource extension. Make sure the resource url ends with .css or .js")}));return Promise.all(e)}function L(t,e){var n=function(t){return t="string"==typeof t?t.replace(/#/g,""):"",[parseInt(t.substring(0,2),16)||0,parseInt(t.substring(2,4),16)||0,parseInt(t.substring(4,6),16)||0]}(t);return"rgba(".concat(n.join(","),",").concat(e,")")}function T(t){return(t=Array.isArray(t)?t:[t]).filter((function(t){return!t.isDeleted})).map((function(t){var e=["x","y","blur","spread","color","opacity"];if(e.every((function(e){return[null,void 0,u[e]].includes(t[e])})))return"";var n=m({},t);e.forEach((function(t){if("color"===t)n[t]=n[t]||u[t];else{var e=parseInt(n[t],10);n[t]=isNaN(e)?u[t]:n[t]}}));var r=n.x,i=n.y,o=n.blur,a=n.spread,s=L(n.color,n.opacity);return"".concat(r,"px ").concat(i,"px").concat(o!==u.blur||a!==u.spread?" ".concat(o,"px"):"").concat(a!==u.spread?" ".concat(a,"px"):""," ").concat(s)})).filter((function(t){return t})).join(",")}function N(t,e,n){return Math.max(t,Math.min(e,n))}function C(t){var e=["RU","EN"].includes(window.lang)?window.lang:"EN";return n[e][t]||n.EN[t]||t}function A(t){return D.apply(this,arguments)}function D(){var t;return t=d().mark((function t(e){var n,i,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(e="string"==typeof e?e:"").toLowerCase().replace(/(box|text)-shadow:/g,"").replace(/;/g,",").replace(/\n/g,"").replace(/,$/,"").trim(),n=/^(\s*(?:-?\d+(?:\.\d+)?(?:px)?\s+-?\d+(?:\.\d+)?(?:px)?\s+(?:\d+(?:\.\d+)?(?:px)?\s+)?(?:\d+(?:\.\d+)?(?:px)?\s+)?(?:(?:rgb|hsl)a?\([^)]+\)|#?[a-z0-9]+))\s*,?\s*)+$/,!e||n.test(e)){t.next=6;break}return"function"==typeof window.tp__showCornerNotice&&window.tp__showCornerNotice(C("invalid_shadow"),3e3),t.abrupt("return",[{x:null,y:null,blur:null,spread:null,color:null,opacity:null}]);case 6:return i=e.split(/,(?![^(]*\))/),t.next=9,P(r);case 9:return o=i.map((function(t){var e=t.trim().replace(/\s{2,}/g," ").replace(/\s{0,},\s{0,}/g,",").split(" "),n=e.pop()||"",r=window.TColorPicker.parseColor(n),i=n&&!isNaN(r[3])&&r[3]!==u.opacity?r[3]:null,o=n?"#"+window.TColorPicker.hslToHEX(r):null,a={opacity:i,color:o=o===u.color?null:o};return["x","y","blur","spread"].forEach((function(t,n){var r=parseInt(e[n],10);a[t]=isNaN(r)||r===u[t]?null:r})),a})),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})),D=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){y(o,r,i,a,s,"next",t)}function s(t){y(o,r,i,a,s,"throw",t)}a(void 0)}))},D.apply(this,arguments)}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function W(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function G(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I(e)?e:String(e)}function z(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function M(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var R,U=new WeakSet,Y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,U),e="[object Object]"===Object.prototype.toString.call(e)?e:{},this.props={options:Array.isArray(e.options)?e.options:[],value:"string"==typeof e.value?e.value:"",changeHandler:"function"==typeof e.changeHandler?e.changeHandler:new Function}}var e,n,r;return e=t,(n=[{key:"render",value:function(){var t,e=this,n=this.props.options.map((function(t){return x(O||(O=F(["\n                <option\n                    value=","\n                    selected=","\n                    disabled=","\n                >\n                    ","\n                </option>\n            "])),t.value,t.value===e.props.value,!!t.disabled,t.label)}));return this.element=x(E||(E=F(['\n            <select\n                className="tsp-panel__select"\n                onChange=',"\n            ></select>\n        "])),[M(this,U,K).bind(this),this.props.changeHandler]),(t=this.element).append.apply(t,W(n)),M(this,U,K).call(this),this.element}},{key:"value",set:function(t){this.element.value=t,M(this,U,K).call(this)}}])&&B(e.prototype,n),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(){var t=this.element.selectedOptions[0],e=document.createElement("div");e.classList.add("tsp-select-helper"),e.innerText=t.innerText,document.body.appendChild(e),this.element.style.width="".concat(e.offsetWidth,"px"),e.remove()}function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:String(e)}function J(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Q(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var V,Z=new WeakSet,tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),J(this,Z),this.props=e,this.props.updateTrigger.on(Q(this,Z,et).bind(this))}var e,n,r;return e=t,(n=[{key:"render",value:function(){var t,e;return this.element=x(R||(t=['\n            <div className="tsp-preview">\n                <div className="tsp-preview__box" bindTo=',"></div>\n            </div>\n        "],e||(e=t.slice(0)),R=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))),[this,"previewBox"]),Q(this,Z,et).call(this),this.element}}])&&X(e.prototype,n),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function et(){var t=T(this.props.settings);this.previewBox.style.boxShadow=t}function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e,n){return(e=st(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,st(r.key),r)}}function st(t){var e=function(t,e){if("object"!=nt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nt(e)?e:String(e)}function ct(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function lt(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var ut,pt,ht=new WeakSet,ft=new WeakSet,dt=new WeakSet,yt=new WeakSet,vt=new WeakSet,mt=new WeakSet,bt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ct(this,mt),ct(this,vt),ct(this,yt),ct(this,dt),ct(this,ft),ct(this,ht),e="[object Object]"===Object.prototype.toString.call(e)?e:{},this.props={label:C(e.label||""),min:isNaN(e.min)?null:e.min,max:isNaN(e.max)?null:e.max,units:"string"==typeof e.units?e.units:"",factor:e.factor&&!isNaN(e.factor)?e.factor:null,placeholder:"string"==typeof e.placeholder?e.placeholder:"",isColor:!!e.isColor,isNumber:!!e.isNumber,isSingleLine:!!e.isSingleLine,value:e.value,name:e.name||"",inputHandler:"function"==typeof e.inputHandler?e.inputHandler:new Function,blurHandler:"function"==typeof e.blurHandler?e.blurHandler:new Function,isCopyButton:!!e.isCopyButton,isSelectOnFocus:!!e.isSelectOnFocus,colorPickers:e.colorPickers||[],theme:e.theme}}var e,n,r;return e=t,(n=[{key:"render",value:function(){var t,e,n=this.props,r=n.isColor,i=n.isSingleLine,o=n.inputHandler,a=n.label,s=n.name,c=n.isCopyButton;return this.element=x(V||(t=['\n            <label className="tsp-panel__input-label','">\n                <span className="tsp-panel__input-span">','</span>\n                <input\n                    type="text"\n                    className="tsp-panel__input"\n                    placeholder=',"\n                    onFocus=","\n                    onBlur=","\n                    onKeydown=","\n                    name=","\n                    onInput=","\n                    onColorchange=","\n                    bindTo=",'\n                />\n                <button\n                    className="tsp-panel__input-btn','"\n                    type="button"\n                    tooltip="copy"\n                    onClick=',"\n                    bindTo=","\n                ></button>\n            </label>\n        "],e||(e=t.slice(0)),V=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))),i?" tsp-panel__input-label_line":"",a,this.props.placeholder,lt(this,ft,wt).bind(this),[lt(this,dt,_t).bind(this),this.props.blurHandler],lt(this,yt,St).bind(this),s,r?void 0:o,r?o:void 0,[this,"input"],c?"":" tsp-panel__input-btn_hidden",lt(this,mt,Ot).bind(this),[this,"copyButton"]),r?lt(this,ht,gt).call(this):this.value=this.props.value,this.element}},{key:"value",get:function(){var t=this.input.value,e=this.props,n=e.isNumber,r=e.isColor,i=e.factor;if(!t&&!r)return null;if(n){var o=lt(this,vt,jt).call(this,t);return i&&(o/=i),o}if(r){if(!this.colorpicker||!this.colorpicker.color)return null;var a=this.colorpicker.color;return"#"+window.TColorPicker.hslToHEX(a)}return t},set:function(t){if(null!==t){t=String(t);var e=this.props,n=e.units,r=e.isNumber,i=e.isColor,o=e.factor;r&&(o&&(t*=o),t=lt(this,vt,jt).call(this,t)+n),i&&this.colorpicker?this.colorpicker.color=t:this.input.value=t}else this.input.value=""}}])&&at(e.prototype,n),r&&at(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gt(){var t=this;P(r).then((function(){t.colorpicker=new window.TColorPicker(t.input,it(it({},c),{},{theme:t.props.theme})),t.colorpicker.init(),t.props.colorPickers.push(t.colorpicker),t.value=t.props.value})).catch((function(){throw new Error("Error loading colorpicker")}))}function wt(){var t=this.props,e=t.isNumber,n=t.units;t.isSelectOnFocus&&this.input.select();var r=this.input.value;if(e&&n&&r){var i=parseInt(r,10)||0;this.input.value=i}}function _t(){var t=this.props,e=t.isNumber,n=t.units,r=this.input.value;if(e&&r){var i=lt(this,vt,jt).call(this,r);this.input.value=i+(n||"")}}function St(t){if(this.props.isNumber&&["ArrowUp","ArrowDown"].includes(t.key)){t.preventDefault();var e=parseInt(this.input.value,10)||0,n="ArrowUp"===t.key?e+1:e-1,r=lt(this,vt,jt).call(this,n);this.input.value=r,this.input.dispatchEvent(new Event("input"))}}function jt(t){var e=this.props,n=e.min,r=e.max;if(e.isNumber){var i=parseInt(t,10)||0;return null!==n&&(i=Math.max(n,i)),null!==r&&(i=Math.min(r,i)),i}}function Ot(){var t=this,e=this.input.value;navigator.clipboard.writeText(e),this.copyButton.classList.add("tsp-panel__input-btn_done"),window.clearTimeout(this.copyButton.copyTimeout),this.copyButton.copyTimeout=window.setTimeout((function(){t.copyButton.classList.remove("tsp-panel__input-btn_done")}),1e3)}function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t,e,n){return(e=Nt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nt(r.key),r)}}function Nt(t){var e=function(t,e){if("object"!=Et(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Et(e)?e:String(e)}function Ct(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function At(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Dt,It,Wt=new WeakSet,Ht=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ct(this,Wt),this.props=e,this.inputs=[]}var e,n,r;return e=t,(n=[{key:"render",value:function(){var t=this,e=this.props.settings,n=e.isExpanded;if(e.isDeleted){var r=N(0,(Date.now()-this.props.settings.deleteTimestamp)/1e3/3,1),i=Math.round(3*(1-r));this.element=x(ut||(ut=Lt(['\n                <div className="tsp-panel__layer">\n                    <div\n                        className="tsp-panel__layer-header tsp-panel__layer-header_deleted tsp-panel__section"\n                        style=','\n                    >\n                        <span className="tsp-panel__layer-deleted-span">','</span>\n                        <button\n                            type="button"\n                            className="tsp-panel__layer-deleted-button"\n                            onClick=','\n                        >\n                            <svg className="tsp-panel__layer-deleted-circle" viewBox="0 0 14 14">\n                                <circle r="6" cx="7" cy="7"></circle>\n                            </svg>\n                            <span className="tsp-panel__layer-deleted-counter" bindTo=',">\n                                ","\n                            </span>\n                            ","\n                        </button>\n                    </div>\n                </div>\n            "])),"--time-shift:".concat(r,"; --delete-delay:").concat(3,"s;"),C("layer_deleted"),this.props.restoreHandler,[this,"counterElement"],i,C("restore"));var o=window.setInterval((function(){var e=N(0,(Date.now()-t.props.settings.deleteTimestamp)/1e3/3,1),n=Math.round(3*(1-e));t.counterElement.innerText=n,n||window.clearInterval(o)}),50);return this.element}var a=h.map((function(e){var n=p[e];n.value=t.props.settings[e];var r=new bt(kt(kt({},n),{},{name:e,inputHandler:At(t,Wt,Ft).bind(t),colorPickers:t.props.colorPickers,theme:t.props.theme}));return t.inputs.push(r),r.render()}));return this.element=x(pt||(pt=Lt(['\n            <div className="tsp-panel__layer','">\n                <div className="tsp-panel__layer-header tsp-panel__section">\n                    <div className="tsp-panel__layer-handle"></div>\n                    <button type="button" className="tsp-panel__layer-button" onClick=',">\n                        "," ",'\n                    </button>\n                    <button\n                        type="button"\n                        className="tsp-panel__layer-delete"\n                        onClick=','\n                        tooltip="delete_layer"\n                    ></button>\n                </div>\n                <div className="tsp-panel__layer-inputs tsp-panel__section">',"</div>\n            </div>\n        "])),n?" tsp-panel__layer_expanded":"",this.props.expandHandler,C("layer"),this.props.settings.order,this.props.deleteHandler,a),this.element}}])&&Tt(e.prototype,n),r&&Tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ft(t){var e=t.target.name,n=this.inputs.find((function(t){return t.input.name===e}));if(n){var r=n.value;this.props.settings[e]=r,this.props.updateTrigger&&this.props.updateTrigger.trigger()}}function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){Mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mt(t,e,n){return(e=Yt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yt(r.key),r)}}function Yt(t){var e=function(t,e){if("object"!=Bt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bt(e)?e:String(e)}function Kt(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function $t(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Xt,qt=new WeakSet,Jt=new WeakSet,Qt=new WeakSet,Vt=new WeakSet,Zt=new WeakSet,te=new WeakSet,ee=new WeakSet,ne=new WeakSet,re=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Kt(this,ne),Kt(this,ee),Kt(this,te),Kt(this,Zt),Kt(this,Vt),Kt(this,Qt),Kt(this,Jt),Kt(this,qt),this.props=e}var e,n,r;return e=t,n=[{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.colorPickers.forEach((function(t){return t.destroy()})),this.props.colorPickers.splice(0);var n=this.props,r=n.settings,i=n.theme;return r.forEach((function(n,o){n.order=o+1,e&&1!==r.length||(n.isExpanded=o===r.length-1),n.element=x(Dt||(Dt=Rt(["\n                <","\n                    settings=","\n                    updateTrigger=","\n                    deleteHandler=","\n                    restoreHandler=","\n                    expandHandler=","\n                    colorPickers=","\n                    theme=","\n                />\n            "])),Ht,n,t.props.updateTrigger,$t(t,Vt,se).bind(t),$t(t,te,le).bind(t),$t(t,ee,ue).bind(t),t.props.colorPickers,i)})),this.element=x(It||(It=Rt(['\n            <div className="tsp-panel__layers','">\n                ','\n                <div className="tsp-panel__section tsp-panel__layers-btn-wrapper">\n                    <button type="button" className="tsp-panel__layers-btn" onClick=',">\n                        ","\n                    </button>\n                </div>\n            </div>\n        "])),1===r.length?" tsp-panel__layers_single":"",r.map((function(t){return t.element})),$t(this,Qt,ae).bind(this),C("add_layer")),$t(this,qt,ie).call(this),this.element}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.sortable&&this.sortable.destroy();var r=this.element,i=r.scrollTop;this.render(t),r.replaceWith(this.element),this.element.scrollTo(0,t?i:this.element.scrollHeight),n||this.props.updateTrigger.trigger(e)}}],n&&Ut(e.prototype,n),r&&Ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ie(){var t=this,e=this.props.theme;this.props.settings.length<=1||("dark"===e&&(l.dragImage.className="tsp-panel__drag-image_dark"),P(o).then((function(){t.sortable=new window.TSortableLite(t.element,zt(zt({},l),{},{onDrop:$t(t,Jt,oe).bind(t)})).init()})))}function oe(t){var e=t.relativeTargets,n=e.prevEl,r=e.nextEl,i=t.draggingElement,o=this.props.settings;if((n||r)&&i){var a=!!n,s=o.find((function(t){return t.element===i})),c=o.find((function(t){return t.element===(a?n:r)}));if(s&&c){var l=o.indexOf(s);o.splice(l,1);var u=o.indexOf(c);o.splice(a?u+1:u,0,s),this.update(!0)}}}function ae(){var t=this.props.settings,e=zt({},t[t.length-1]||$t(this,ne,pe).call(this));Object.keys(e).forEach((function(t){h.includes(t)||delete e[t],"x"!==t&&"y"!==t||!e[t]||(e[t]*=-1)})),t.push(e),this.update()}function se(t){var e=this.props.settings,n=t.target.closest(".tsp-panel__layer"),r=e.find((function(t){return t.element===n}));r.isDeleted=!0,r.deleteTimestamp=Date.now(),r.deleteTimeout=window.setTimeout($t(this,Zt,ce).bind(this,r),3e3),this.update(!0)}function ce(t){var e=this.props.settings,n=e.indexOf(t);-1!==n&&(e.splice(n,1),e.length||e.push($t(this,ne,pe).call(this)),this.update(!0,!1,!0))}function le(t){var e=this.props.settings,n=t.target.closest(".tsp-panel__layer"),r=e.find((function(t){return t.element===n}));window.clearTimeout(r.deleteTimeout),delete r.deleteTimeout,delete r.isDeleted,delete r.deleteTimestamp,this.update(!0)}function ue(t){var e=this.props.settings,n=t.target.closest(".tsp-panel__layer"),r=n.classList.contains("tsp-panel__layer_expanded"),i=e.find((function(t){return t.element===n}));if(r)i.isExpanded=!1,n.classList.remove("tsp-panel__layer_expanded");else{var o=e.find((function(t){return t.isExpanded}));o&&(o.isExpanded=!1,o.element.classList.remove("tsp-panel__layer_expanded")),i.isExpanded=!0,n.classList.add("tsp-panel__layer_expanded")}}function pe(){var t={};return h.forEach((function(e){return t[e]=null})),t}function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function fe(){fe=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:x(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(N([])));S&&S!==n&&r.call(S,a)&&(w=S);var j=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,a,s){var c=p(t[i],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==he(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function x(e,n,r){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var l=p(e,n,r);if("normal"===l.type){if(i=r.done?y:f,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=p(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(he(e)+" is not iterable")}return b.prototype=g,i(j,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(j),l(j,c,"Generator"),l(j,a,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function de(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function ye(t){return function(t){if(Array.isArray(t))return ve(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ve(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ve(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function be(t){var e=function(t,e){if("object"!=he(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==he(e)?e:String(e)}function ge(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function we(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var _e=new WeakSet,Se=new WeakSet,je=new WeakSet,Oe=new WeakSet,Ee=new WeakSet,xe=new WeakSet,ke=new WeakSet,Pe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ge(this,ke),ge(this,xe),ge(this,Ee),ge(this,Oe),ge(this,je),ge(this,Se),ge(this,_e),e="[object Object]"===Object.prototype.toString.call(e)?e:{},this.settings=e.settings,this.initialShadow=T(this.settings),this.closeHandler="function"==typeof e.closeHandler?e.closeHandler:new Function,this.relatedElement=e.relatedElement,this.editButton=e.editButton,this.shadowChangeTrigger=e.shadowChangeTrigger,this.colorPickers=[],this.theme=e.theme,this.altNoLabel=e.altNoLabel,this.handleDocClick=this.handleDocClick.bind(this),this.handleDocKeyDown=this.handleDocKeyDown.bind(this),this.handleDocPointerDown=this.handleDocPointerDown.bind(this),this.handleTransitionEnd=this.handleTransitionEnd.bind(this),this.updateTrigger=k(),this.updateTrigger.on(we(this,Oe,Ce).bind(this))}var e,n,r;return e=t,(n=[{key:"render",value:function(){var t=this;this.cssInput=new bt({label:C("css"),isSingleLine:!0,value:T(this.settings),blurHandler:we(this,Ee,Ae).bind(this),inputHandler:we(this,Ee,Ae).bind(this),isCopyButton:!0,isSelectOnFocus:!0}),this.layersCollection=new re({settings:this.settings,updateTrigger:this.updateTrigger,colorPickers:this.colorPickers,theme:this.theme});var e,n,r=s.map((function(e){var n="";return e.custom?n="custom":e.empty||(n=T(e)),{value:n,label:C("none"===e.label&&t.altNoLabel?"default":e.label),disabled:e.custom}})),i=T(this.settings);return i=r.find((function(t){return t.value===i}))?i:"custom",this.select=new Y({value:i,options:r,changeHandler:we(this,xe,De).bind(this)}),this.element=x(Xt||(e=['\n            <div className="tsp-panel tsp-panel_hidden','">\n                <div className="tsp-panel__section tsp-panel__header">\n                    ','\n                    <button className="tsp-panel__header-btn" onClick=',"></button>\n                </div>\n                <"," updateTrigger="," settings="," />\n                ",'\n                <div className="tsp-panel__section tsp-panel__footer">',"</div>\n            </div>\n        "],n||(n=e.slice(0)),Xt=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),"dark"===this.theme?" tsp-panel_dark":"",this.select.render(),we(this,Se,Te).bind(this),tt,this.updateTrigger,this.settings,this.layersCollection.render(),this.cssInput.render()),we(this,_e,Le).call(this),this.element}},{key:"handleTransitionEnd",value:function(){this.element.remove(),this.element.removeEventListener("transitionend",this.handleTransitionEnd)}},{key:"handleDocClick",value:function(t){var e=this.colorPickers.some((function(t){return t&&t.panelState}));this.element.contains(t.target)||t.target.closest("#confirm-dialog")||this.editButton.contains(t.target)||e||this.isPointerDownOnPanel?this.isPointerDownOnPanel=!1:we(this,Se,Te).call(this)}},{key:"handleDocKeyDown",value:function(t){var e=this.colorPickers.some((function(t){return t&&t.panelState}));"Escape"!==t.key||e||document.querySelector("#confirm-dialog")||we(this,Se,Te).call(this)}},{key:"handleDocPointerDown",value:function(t){this.isPointerDownOnPanel=this.element.contains(t.target)}}])&&me(e.prototype,n),r&&me(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Le(){var t=this;document.body.contains(this.element)||(we(this,je,Ne).call(this),document.addEventListener("click",this.handleDocClick),document.addEventListener("keydown",this.handleDocKeyDown),document.addEventListener("pointerdown",this.handleDocPointerDown),window.setTimeout((function(){t.element.classList.remove("tsp-panel_hidden")}),0))}function Te(){document.body.contains(this.element)&&(document.removeEventListener("click",this.handleDocClick),document.removeEventListener("keydown",this.handleDocKeyDown),document.removeEventListener("pointerdown",this.handleDocPointerDown),this.layersCollection.sortable&&this.layersCollection.sortable.destroy(),this.closeHandler(),this.element.addEventListener("transitionend",this.handleTransitionEnd),this.element.classList.add("tsp-panel_hidden"))}function Ne(){if(this.relatedElement instanceof Element){var t=this.relatedElement.getBoundingClientRect(),e=t.top,n=t.height,r=t.left,i=t.width,o=document.documentElement,a=o.clientWidth,s=-200,c=o.clientHeight-e-n-s-5>=550,l=a-r-i-10-5>=225,u=r-10-5>=225,p="0px",h="0px";l||!c&&!l&&!u?(p="".concat(r+i+10,"px"),h="".concat(e+s,"px")):c?(p="".concat(r,"px"),h="".concat(e+n+s,"px")):u&&(p="calc(".concat(r-10,"px - 100%)"),h="".concat(e+s,"px")),this.element.style.setProperty("--pos-x",p),this.element.style.setProperty("--pos-y",h)}}function Ce(t){var e=T(this.settings);t||(this.cssInput.value=e);var n=ye(this.select.element.options).find((function(t){return t.value===e}));this.select.value=n?n.value:"custom",this.shadowChangeTrigger.trigger(e)}function Ae(t){var e=this.cssInput.value;we(this,ke,Ie).call(this,e,"input"===t.type)}function De(){var t=this.select.element.value;we(this,ke,Ie).call(this,t)}function Ie(t){return We.apply(this,arguments)}function We(){var t;return t=fe().mark((function t(e){var n,r,i,o=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],t.next=3,A(e);case 3:i=t.sent,this.settings.splice(0,this.settings.length),(n=this.settings).push.apply(n,ye(i)),this.layersCollection.update(!1,r,!0),this.updateTrigger.trigger(r);case 8:case"end":return t.stop()}}),t,this)})),We=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){de(o,r,i,a,s,"next",t)}function s(t){de(o,r,i,a,s,"throw",t)}a(void 0)}))},We.apply(this,arguments)}function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Be(r.key),r)}}function Be(t){var e=function(t,e){if("object"!=He(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==He(e)?e:String(e)}function Ge(t){var e=Re();return function(){var n,r=Ye(t);if(e){var i=Ye(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===He(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function ze(t){var e="function"==typeof Map?new Map:void 0;return ze=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Me(t,arguments,Ye(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ue(n,t)},ze(t)}function Me(t,e,n){return Me=Re()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Ue(i,n.prototype),i},Me.apply(null,arguments)}function Re(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ue(t,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ue(t,e)}function Ye(t){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ye(t)}var Ke,$e,Xe,qe,Je,Qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(o,t);var e,n,r,i=Ge(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,"paneltoggle")).isOpen=t,e}return e=o,n&&Fe(e.prototype,n),r&&Fe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ze(CustomEvent));function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function Ze(){Ze=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:x(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(N([])));S&&S!==n&&r.call(S,a)&&(w=S);var j=g.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,a,s){var c=p(t[i],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ve(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function x(e,n,r){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=k(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var l=p(e,n,r);if("normal"===l.type){if(i=r.done?y:f,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=y,r.method="throw",r.arg=l.arg)}}}function k(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=p(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Ve(e)+" is not iterable")}return b.prototype=g,i(j,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},O(E.prototype),l(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(j),l(j,c,"Generator"),l(j,a,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function tn(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function en(t){return function(t){if(Array.isArray(t))return nn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rn(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sn(r.key),r)}}function an(t,e,n){return e&&on(t.prototype,e),n&&on(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sn(t){var e=function(t,e){if("object"!=Ve(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ve(e)?e:String(e)}function cn(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function ln(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var un=new WeakSet,pn=new WeakSet,hn=new WeakSet,fn=new WeakSet,dn=new WeakSet,yn=new WeakSet,vn=new WeakSet,mn=new WeakSet,bn=new WeakSet,gn=new WeakSet,wn=an((function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),cn(this,gn),cn(this,bn),cn(this,mn),cn(this,vn),cn(this,yn),cn(this,dn),cn(this,fn),cn(this,hn),cn(this,pn),cn(this,un),!(e instanceof HTMLInputElement))throw new TypeError("Input must be an instance of HTMLInputElement");var r,i,o;n="[object Object]"===Object.prototype.toString.call(n)?n:{},this.config={shadowChangeDelay:!isNaN(n.shadowChangeDelay)&&n.shadowChangeDelay>=0?n.shadowChangeDelay:50,theme:["light","dark"].includes(n.theme)?n.theme:"light",height:!isNaN(n.height)&&n.height>0?n.height:40,altNoLabel:!!n.altNoLabel},this.input=e,this.isPanelRendered=!1,this.previousInitialShadow="",this.shadowChangeTrigger=k(),this.shadowChangeTrigger.on((r=ln(this,gn,Nn).bind(this),i=this.config.shadowChangeDelay,o=null,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o||(o=window.setTimeout((function(){r.apply(null,e),window.clearTimeout(o),o=null}),i))})),ln(this,un,_n).call(this)}));function _n(){this.select=ln(this,pn,Sn).call(this);var t=this.config.theme;this.container=x(Ke||(Ke=rn(['\n            <div className="tsp','">\n                ','\n                <button\n                    type="button"\n                    className="tsp__edit"\n                    onClick=',"\n                    bindTo=","\n                >\n                    ","\n                </button>\n            </div>\n        "])),"dark"===t?" tsp_dark":"",this.select,ln(this,mn,Ln).bind(this),[this,"editButton"],C("edit")),this.noActionLayer=x($e||($e=rn(['\n            <div className="tsp__noaction"></div>\n        ']))),this.input.after(this.container),this.input.type="hidden",this.container.append(this.input),ln(this,dn,En).call(this)}function Sn(){var t=x(Xe||(Xe=rn(['\n            <select className="tsp__select" onInteraction=',"></select>\n        "])),ln(this,yn,xn).bind(this)),e=ln(this,hn,jn).call(this);return t.append.apply(t,en(e)),t}function jn(){var t=this,e=this.input.value,n=s.map((function(t){return T(t)})).some((function(t){return t===e})),r=this.config.altNoLabel;return n||(this.previousInitialShadow=e),s.map((function(i){var o="";i.custom?o="custom":i.empty||(o=T(i));var a=C("none"===i.label&&r?"default":i.label);return x(qe||(qe=rn(["\n                <option\n                    value=","\n                    data-img=","\n                    selected=","\n                >\n                    ","\n                </option>\n            "])),o,i.img,o===e||i.custom&&!n,i.custom&&t.previousInitialShadow?t.previousInitialShadow:a)}))}function On(){var t;this.select.innerHTML="";var e=ln(this,hn,jn).call(this);(t=this.select).append.apply(t,en(e)),this.previewBox&&this.previewBox.update()}function En(){var t=this,e=this.config,n=e.theme,r=e.height;P(i).then((function(){t.previewBox=new window.TPreviewbox(t.select,{theme:n,height:r})})).catch((function(){throw new Error("Fail to load previewbox")}))}function xn(){var t=this.select.value;this.input.value="custom"===t?this.previousInitialShadow:t,this.input.dispatchEvent(new Event("change")),ln(this,fn,On).call(this),"custom"===t&&ln(this,vn,kn).call(this,this.previousInitialShadow)}function kn(){return Pn.apply(this,arguments)}function Pn(){var t;return t=Ze().mark((function t(){var e,n,r,i,o=arguments;return Ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:"",!this.isPanelRendered){t.next=3;break}return t.abrupt("return");case 3:return n=this.config.theme,t.next=6,A(e);case 6:r=t.sent,i=this.config.altNoLabel,document.body.append(x(Je||(Je=rn(["\n            <","\n                settings=","\n                relatedElement=","\n                closeHandler=","\n                shadowChangeTrigger=","\n                editButton=","\n                theme=","\n                altNoLabel=","\n            />\n        "])),Pe,r,this.container.querySelector(".tprev")||this.container,ln(this,bn,Tn).bind(this),this.shadowChangeTrigger,this.editButton,n,i)),this.isPanelRendered=!0,document.body.append(this.noActionLayer),this.input.dispatchEvent(new Qe(!0));case 12:case"end":return t.stop()}}),t,this)})),Pn=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){tn(o,r,i,a,s,"next",t)}function s(t){tn(o,r,i,a,s,"throw",t)}a(void 0)}))},Pn.apply(this,arguments)}function Ln(){ln(this,vn,kn).call(this,this.input.value)}function Tn(){this.isPanelRendered=!1,this.noActionLayer.remove(),this.input.dispatchEvent(new Qe(!1))}function Nn(t){this.input.value=t,this.input.dispatchEvent(new Event("change")),ln(this,fn,On).call(this)}window.TShadowPicker=wn})();