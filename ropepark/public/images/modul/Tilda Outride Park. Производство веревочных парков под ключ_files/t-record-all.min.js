function tp__addRecord(t,o){edrec__closeEditForm();var e=document.querySelector("#myfirstrecord");e&&(e.style.display="none"),tp__fetch({url:"/page/submit/",body:{comm:"addnewrecord",pageid:window.pageid,afterid:o,tplid:t,with_code:tp__checkBlockAvailabilityOnPage(t)?"":"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:"adding new block"}).then(e=>{tp__checkEmptyOrNotHtmlResponse(e)||("object"==typeof(e=tp__getResponseStringOrObject(e))?o?tp__insertBlocksAfterAnotherRec(e,o):tp__insertBeforeEndAllrecords(e):"string"!=typeof e||tp__checkForBlockHTMLInString(e)||((e=tp__setInnerHTML(e)).forEach(e=>e.classList.add("hidden")),o?document.querySelector("#record"+o).after(...e):document.getElementById("allrecords").append(...e),tp__animateBlockAppearance(e),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList(),"125"!=t&&"132"!=t&&"284"!=t&&"132"!=t)||location.reload())}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}function tp__dublicateRecord(t){var o,e;tp__checkOpenedWidgets()||(o=document.querySelector("#record"+t),(e=o.querySelector(".tp-record-edit-icons-right__wrapper"))&&(e.style.pointerEvents="none",e.style.opacity="0.5"),tp__fetch({url:"/page/submit/",body:{comm:"dublicaterecord",pageid:window.pageid,recordid:t,shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:"block duplicating"}).then(e=>{tp__checkEmptyOrNotHtmlResponse(e)||("object"==typeof(e=tp__getResponseStringOrObject(e))?tp__insertBlocksAfterAnotherRec(e,t):"string"!=typeof e||tp__checkForBlockHTMLInString(e)||((e=tp__setInnerHTML(e)).forEach(e=>e.classList.add("hidden")),o.after(...e),tp__animateBlockAppearance(e),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList()))}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)}).finally(()=>{e&&(e.style.pointerEvents="auto",e.style.opacity="1")}))}function tp__delRecord(e){var t,o=document.querySelector("#record"+e);o&&!tp__checkOpenedWidgets()&&((t=o.querySelector(".tp-record-edit-icons-right__wrapper"))&&(t.style.pointerEvents="none",t.style.opacity="0.5"),tp__fetch({url:"/page/submit/",body:{comm:"deleterecord",pageid:window.pageid,recordid:e},explanation:"block deletion",responseType:"text"}).then(e=>{""!=e&&"ok"!=e&&"OK"!=e?td__showBubbleNotice(e,6e3,"error"):(tp__slideUp(o).then(()=>o.remove()),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList())}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)}).finally(()=>{t&&(t.style.pointerEvents="auto",t.style.opacity="1")}))}function tp__recoverRecord(t){tp__fetch({url:"/page/submit/",body:{comm:"recoverrecord",pageid:window.pageid,recordid:t},explanation:"block recover"}).then(e=>{""!=e&&"ok"!=e&&"OK"!=e?td__showBubbleNotice(e,6e3,"error"):tp__updateRecord(t)}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}function tp__updateRecord(t,e){var o=document.querySelector("#record"+t);o&&(e=e||o.getAttribute("data-record-type"),tp__fetch({url:"/page/get/",body:{comm:"getrecordhtml",pageid:window.pageid,recordid:t,with_code:tp__checkBlockAvailabilityOnPage(e)?"":"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:"update block"}).then(e=>{tp__checkEmptyOrNotHtmlResponse(e)||("object"==typeof(e=tp__getResponseStringOrObject(e))?tp__replaceBlockWithNewRec(e,t):"string"==typeof e&&(tp__updateUndoButton(),tp__checkForBlockHTMLInString(e)||(e=tp__setInnerHTML(e),o.replaceWith(e[0]),void 0!==window.blockList&&window.blockList.rebuildList())))}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)}))}function tp__updateRecord_fixed(t){var e,o=document.querySelector("#record"+t);o&&(e=o.getAttribute("data-record-type"),tp__fetch({url:"/page/get/",body:{comm:"getrecordhtml",pageid:window.pageid,recordid:t,with_code:tp__checkBlockAvailabilityOnPage(e)?"":"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:"updating block"}).then(e=>{var e=tp__getResponseStringOrObject(e);"object"==typeof e?tp__replaceBlockWithNewRec(e,t):"string"==typeof e&&(e=tp__setInnerHTML(e),o.replaceWith(e[0]),void 0!==window.blockList)&&window.blockList.rebuildList()}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)}))}function tp__upRecord(e){var t=document.getElementById("record"+e),o=t.previousElementSibling;o&&o.getAttribute("recordid")&&!tp__checkOpenedWidgets()&&(o.insertAdjacentElement("beforebegin",t),tp__scrollToRecord(e),clearTimeout(window.autosavesort_timer),window.autosavesort_timer=setTimeout(function(){tp__saveRecordsSort()},4e3))}function tp__downRecord(e){var t=document.getElementById("record"+e),o=t.nextElementSibling;o&&o.getAttribute("recordid")&&!tp__checkOpenedWidgets()&&(o.insertAdjacentElement("afterend",t),tp__scrollToRecord(e),clearTimeout(window.autosavesort_timer),window.autosavesort_timer=setTimeout(function(){tp__saveRecordsSort()},4e3))}function tp__offRecord(t){var o,e;tp__checkOpenedWidgets()||(o=document.querySelector("#record"+t),(e=o.querySelector(".tp-record-edit-icons-right__wrapper"))&&(e.style.pointerEvents="none",e.style.opacity="0.5"),tp__fetch({url:"/page/submit/",body:{comm:"offrecord",pageid:window.pageid,recordid:t},explanation:"block off/on"}).then(e=>{""!=e&&"y"!=e&&"n"!=e&&"on"!=e&&"off"!=e?td__showBubbleNotice(e,6e3,"error"):(("y"==e||"off"==e?tp__minifyRecord:(o.querySelector(".r").innerHTML="",o.querySelector(".r").style.minHeight="65px",o.setAttribute("off","n"),tp__updateRecord_fixed))(t),tp__updateHiddenBlocks(o),tp__updateUndoButton())}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)}).finally(()=>{e&&(e.style.pointerEvents="auto",e.style.opacity="1")}))}function tp__updateHiddenBlocks(e){if(e){var t=e.previousElementSibling;const d=e.nextElementSibling,c=[e];t&&c.push(t),d&&c.push(d);var o=document.querySelectorAll(".record"),r=[];for(let t=0;t<o.length;t++){var n=o[t];if("y"===n.getAttribute("off")){var i=[n];let e;for(e=t+1;e<o.length;e++){const d=o[e];if("y"!==d.getAttribute("off"))break;i.push(d)}r.push(i),t=e}}r.forEach(t=>{t.some(e=>c.includes(e))&&t.forEach(e=>{e=e.querySelector(".tp-min-record");e&&(1<t.length?(e.classList.remove("tp-min-record_center-align"),e.classList.add("tp-min-record_left-align")):(e.classList.remove("tp-min-record_left-align"),e.classList.add("tp-min-record_center-align")))})})}}function tp__minifyRecord(e){var t,o,r,n,i,d,c,a=document.querySelector("#record"+e);a&&(c=a.querySelector(".r"),t=a.querySelector(".tp-record-edit-icons-left__item-tpltitle"),o=a.querySelector(".r + div"),r=a.querySelector("#mainleft"),n=a.querySelector(".recordediticons.bottomleft"),i=a.querySelector(".tp-record-edit-icons-right__comment"),d=tp__getMinifiedRecordHTML(a),c&&(c.innerHTML=d,c.style.padding="",c.style.margin=""),c.querySelectorAll(".pe-tooltip").forEach(e=>{window.tooltipster([e],{content:e.getAttribute("data-tooltip"),theme:"pe-tooltip_noir",delay:300})}),o&&o.remove(),r&&(r.style.display="none"),n&&(n.style.display="none"),t&&(t.style.display="none"),i&&(i.style.display="none"),a.setAttribute("off","y"),a.style.minHeight="",d=a.querySelector(".tp-min-record__record-on"),c=a.querySelector(".tp-min-record__comments__wrapper"),d&&d.addEventListener("click",()=>{tp__offRecord(e)}),c)&&c.addEventListener("click",()=>{tp__loadComments(e,"hidden")})}function tp__loadComments(e,t){showLoadIcon&&showLoadIcon();var o=["/front/css/t-record-comments.min.css","/front/js/t-record-comments.min.js"].map(tp__loadEditorResource);Promise.all(o).then(()=>{tp__comments__init(e,t)}).finally(()=>{hideLoadIcon&&hideLoadIcon()})}function tp__getMinifiedRecordHTML(e){var t=e.querySelector(".tp-record-edit__btn__tpl-code-title"),o=e.querySelector(".tp-record-edit-icons-left__item-tpltitle"),t=t?t.innerHTML.trim()+".":"";let r=o?` ${o.innerHTML.trim()}.`:"";r=40<r.length?r.slice(0,40)+"...":r;var o=e.previousElementSibling,n=e.nextElementSibling,o=`
		<div class="tp-min-record ${o&&"y"===o.getAttribute("off")||n&&"y"===n.getAttribute("off")?"tp-min-record_left-align":"tp-min-record_center-align"}">
			<span class="tp-min-record__tpl-name">${t}${r}</span>
			<button class="tp-min-record__button tp-min-record__record-on">{{show_block}}</button>
			<button class="tp-min-record__button tp-min-record__comments__wrapper">${tp__getFirstCommentHTML(e)}</button>
		</div>
	`;return tc__translate(o,"record__dict")}function tp__getFirstCommentHTML(e){e=tp__getRecordCommentsData(e);return`
		<div class="
				tp-min-record__comments__icon
				${e.hasUnreadComments?" tp-min-record__comments__has-active pe-tooltip":""}
			"
			${e.hasUnreadComments?' data-tooltip="{{has_unsave_comments}}"':""}
			${2<e.commentsNum.toString().length?'style="margin-right: 8px;"':""}>
			${e.commentsNum?`<div class="tp-min-record__comments__icon__counter">${e.commentsNum}</div>`:""}
		</div>
		${e.firstComment?`<div class="tp-min-record__comments__first-comment">${40<e.firstComment.length?e.firstComment.slice(0,40)+"...":e.firstComment}</div>`:`<div class="tp-min-record__comments__add-comment">${tc__translate("{{add_comment}}","record__dict")}</div>`}
	`}function tp__getCommentButtonHTML(e,t){var o;if(e)return o=e.getAttribute("recordid")||"",`
		<button class="
			tp-record-edit-icons-right__comment
			${t||""}
			${(t=tp__getRecordCommentsData(e)).commentsNum?" tp-record-edit-icons-right__comment_has-comments":""}
			${t.hasUnreadComments?" tp-record-edit-icons-right__comment_has-active-comments":""}
		"
		title="{{commenting}}"
		onClick="tp__loadComments('${o}');">
			${t.commentsNum||""}
		</button>
	`}function tp__getRecordCommentsData(t){if(t){let e=t.getAttribute("data-comment");var o,r={commentsNum:0,firstComment:""},n=[];try{e=JSON.parse(e)}catch(e){return console.log(e),r}return!e||e&&!e.comments||(o=(n=e.comments).filter(e=>!e.status),r.commentsNum=99<n.length?"99+":n.length,r.firstComment=o[0]?o[0].text:"",r.hasUnreadComments=tp__checkUnreadCommentForRecord(t,n)),r}}function tp__checkUnreadCommentForRecord(t,o){if(t){t=t.getAttribute("recordid");if(t){var r=window.localStorage.getItem("comments_status");if(!r)return 0<o.length;let e={};try{e=JSON.parse(r)}catch(e){return console.log(e),!1}const n=e[t];return n?o.some(e=>e.create_ts>n):0<o.length}}}function tp__changeRecordTpl(r,e){var t=tp__record__getFlag_keepcontentifchangerecordtpl();tp__fetch({url:"/page/submit/",body:{comm:"changerecordtpl",pageid:window.pageid,recordid:r,tplid:e,flag_keepcontentifchangerecordtpl:t,with_code:tp__checkBlockAvailabilityOnPage(e)?"":"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:"changing block template"}).then(e=>{var t,o,e=tp__getResponseStringOrObject(e);"object"==typeof e?tp__replaceBlockWithNewRec(e,r):"string"!=typeof e||tp__checkForBlockHTMLInString(e)||(t=document.querySelector("#record"+r),o=tp__setInnerHTML(e),e.indexOf('class="record"')?t.replaceWith(o[0]):t.replaceChild(o[0]),0==parseFloat(getComputedStyle(t).height.replace("px",""))&&(t.style.height="120px"),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList())}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}function tp__addFishRecord(t,e,o){edrec__closeEditForm();var r=document.querySelector("#myfirstrecord");r&&(r.style.display="none"),tp__fetch({url:"/page/submit/",body:{comm:"addfishrecord",pageid:window.pageid,afterid:o,fishid:e,with_code:tp__checkBlockAvailabilityOnPage(t)?"":"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:"adding new block on page"}).then(e=>{tp__checkEmptyOrNotHtmlResponse(e)||("object"==typeof(e=tp__getResponseStringOrObject(e))?o?tp__insertBlocksAfterAnotherRec(e,o):tp__insertBeforeEndAllrecords(e):"string"!=typeof e||tp__checkForBlockHTMLInString(e)||((e=tp__setInnerHTML(e)).forEach(e=>e.classList.add("hidden")),o?document.querySelector("#record"+o).after(...e):document.getElementById("allrecords").append(...e),tp__animateBlockAppearance(e),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList(),"125"!=t&&"132"!=t&&"284"!=t&&"132"!=t)||location.reload())}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}function tp__checkBlockAvailabilityOnPage(e){return!!document.querySelector(`[data-record-type="${e}"]`)}function tp__getResponseStringOrObject(t){if("string"==typeof t){if("{"!==t.substring(0,1)&&"["!==t.substring(0,1))return t;let e;try{e=JSON.parse(t)}catch(e){return t}return e}}function tp__checkEmptyOrNotHtmlResponse(e){return!e&&(td__showBubbleNotice("Error. Request response is empty. Please reload the page and try again.",6e3,"error"),!0)}function tp__checkForBlockHTMLInString(e){return-1===e.indexOf('class="record"')&&(td__showBubbleNotice(e,6e3,"error"),!0)}function tp__insertBlocksAfterAnotherRec(e,o){tp__addNewBlocksToPage(e,e=>{var t=document.querySelector("#record"+o);t&&(t.after(...e),tp__animateBlockAppearance(t.nextElementSibling))})}function tp__insertAfterBeginAllrecords(e){tp__addNewBlocksToPage(e,e=>{var t=document.querySelector("#allrecords");t&&(t.prepend(...e),tp__animateBlockAppearance(t.firstElementChild))})}function tp__insertBeforeEndAllrecords(e){tp__addNewBlocksToPage(e,e=>{var t=document.querySelector("#allrecords");t&&(t.append(...e),tp__animateBlockAppearance(t.lastElementChild))})}function tp__replaceBlockWithNewRec(e,o){tp__addNewBlocksToPage(e,e=>{var t=document.querySelector("#record"+o);o&&t.replaceWith(e[0])})}function tp__pasteBlocksAfterAnotherRec(e,r){tp__addNewBlocksToPage(e,e=>{var t=document.querySelector("#record"+r);if(t){t.after(...e);const o=t.nextElementSibling;tp__fetch({url:"/page/submit/",body:{comm:"delrecord_incutbuf",pageid:window.pageid},explanation:""}).then(e=>{e&&((e=document.querySelector("#record"+e))&&e.remove(),tp__updateUndoButton()),tp__animateBlockAppearance(o)}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}})}function tp__addNewBlocksToPage(t,o){var e,r;(t=t instanceof Object&&!(t instanceof Array)?new Array(t):t).every(e=>!e.html)?tp__showError(t):(tp__showBlockPreloader(t.length),tp__insertInlineCSSToHead(t),tp__insertInlineJSToHead(t),e=tp__loadCSSLibs(t),r=tp__loadJSLibs(t),Promise.all([e,r]).then(()=>{var e=t.map(e=>e.html).join("");if(!tp__checkEmptyOrNotHtmlResponse(e))return e=tp__convertStringToNodeList(e),o(e),e}).then(e=>{"99"!==window.$oplan&&"99"!==window.$uplan||!window.shouldRenderBlockUIInJS||tp__record__addRecordUi(tp__record__prepareDataForAddingRecordUi(e))}).catch(()=>{location.reload()}).finally(()=>{tp__hideBlockPreloader(),tp__updateUndoButton(),tp__showError(t)}))}function tp__convertStringToNodeList(e){var t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("script").forEach(e=>{var t=document.createElement("script"),o=(Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),document.createTextNode(e.innerHTML));t.appendChild(o),e.parentNode.replaceChild(t,e)}),t.querySelectorAll(".record")}function tp__insertInlineCSSToHead(e){e&&e.forEach(e=>{var t,o,r;e.css&&(t="data-tpl-id",o=e.tplid,document.querySelector(`style[${t}="${o}"]`)||((r=document.createElement("style")).setAttribute(t,o),r.innerHTML=e.css,document.head.append(r)))})}function tp__insertInlineJSToHead(e){e&&e.forEach(e=>{var t,o,r;e.js&&(r="data-tpl-id",t=e.tplid,document.querySelector(`script[${r}="${t}"]`)||((o=document.createElement("script")).setAttribute(r,t),r=document.createTextNode(e.js),o.appendChild(r),document.head.append(o)))})}function tp__loadCSSLibs(e){let t=e.map(e=>e.csslibs).flat();return e.some(e=>396==e.tplid)&&(t=t.concat(["tilda-zoom-2.0.min.css","tilda-forms-1.0.min.css"])),(t=[...new Set(t)]).length?(e=t.map(e=>tp__loadResource("https://static.tildacdn.com/css/"+e)),Promise.all(e)):Promise.resolve()}function tp__loadJSLibs(e){let t=e.map(e=>e.jslibs).flat();return e.some(e=>396==e.tplid)&&(t=t.concat(["hammer.min.js","tilda-slds-1.4.min.js","tilda-zoom-2.0.min.js"])),(t=[...new Set(t)]).length?(e=t.map(e=>tp__loadResource("https://static.tildacdn.com/js/"+e)),Promise.all(e)):Promise.resolve()}function tp__animateBlockAppearance(e){const t=[];e instanceof NodeList||Array.isArray(e)?t.push(...e):e instanceof Element&&t.push(e),t.length&&(t.forEach(e=>e.classList.add("hidden")),window.setTimeout(()=>{t.forEach(e=>e.classList.remove("hidden"))},0),e=t[0].getAttribute("recordid"),tp__scrollToRecord(e))}function tp__record__prepareDataForAddingRecordUi(e){return Array.from(e).map(e=>({recid:e.getAttribute("recordid")||"",tplid:e.getAttribute("data-record-type")||""}))}function tp__record__addRecordUi(e){e.length&&e.forEach(({recid:e,tplid:t})=>{(window.subscribeexpired&&"y"===window.subscribeexpired?tp__record__addEditUiDel:(tp__record__addEditUi(e,t),tp__record__addEditFieldEvents(e),tp__record__addEditOnReady))(e)})}function tp__showError(e){e.forEach(e=>{e.error&&td__showBubbleNotice(e.error,6e3,"error")})}function tp__showBlockPreloader(e){const t=tp__getPreloaderHTML(e);window.insertBlockTimer=setTimeout(()=>{window.insertBlockTimer&&clearTimeout(window.insertBlockTimer),document.body.insertAdjacentHTML("beforeend",t)},1e3)}function tp__hideBlockPreloader(){window.insertBlockTimer&&clearTimeout(window.insertBlockTimer);var e=document.querySelector(".tp__block-preloader");e&&e.remove()}function tp__getPreloaderHTML(e){e='<div class="tp__block-preloader"><div class="tp__block-preloader__loader-container"><div class="tp__block-preloader__loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><span>'+(1<e?"{{blocks_adding}}":"{{block_adding}}")+"</span></div></div>";return tc__translate(e,"record__dict")}function tp__recordGenTextWithAI(e,t){tp__initTextGen(e,"block",t)}function tp__record__isOpenForAI(e){return window.show_ai_in_block||(window.show_ai_in_block=localStorage.getItem("show_ai_in_block")),"no"!==window.show_ai_in_block&&!(-1<[285,498,500,131,868,370,268,269,355,315,881,884].indexOf(+e.tplid))&&("99"==window.$oplan&&1==+window.show_ai_in_block||"y"===e.ai&&"tester"==window.userrole)}function tp__record__addEditUi(t,o){window.$tpls=Array.isArray(window.$tpls)?window.$tpls:[];const r=window.$tpls.find(e=>e.id===o)||{};let n=300;var i=document.querySelector("#record"+t),d=i.querySelector(".r");if(d){void 0===r.id&&(r.id=o,(c=i.getAttribute("data-record-category"))&&(r.type=c),(c=i.getAttribute("data-record-cod"))&&(r.cod=c),r.editnotpublish="",r.title="");const m='<div class="recordbordertop"></div>';i.insertAdjacentHTML("afterbegin",m);i.insertAdjacentHTML("beforeend",`
		<div class="recordborderbottom"></div>
		<div class="insertafterrecorbutton">
			<center><a href="javascript:tp__library__open('${t}');">
					<img src="/tpl/img/page/tp-08-add.svg" />
			</a></center>
		</div>
	`);var c=`
		<div class="recordediticons mainleft" id="mainleft">
			<div class="tp-record-edit-icons-left__wrapper">
				<div class="tpl-record-edit__btn-group">
					${!["396","421","121"].includes(o)&&r.type&&r.cod?`
									<button 
										class="tp-record-edit__tpl-code tp-record-edit__btn tp-record-edit__btn_white"
										onclick="javascript:tp__record__showLefdropdown('${t}')";
									>
										<div class="tp-record-edit__btn__title tp-record-edit__btn__title_tpl-code">
											<span class="tp-record-edit__btn__tpl-code-title">${r.cod}</span>
											<div class="dropdown-arrow"></div>
										</div>
										<div class="tp-record-edit-icons-left__dropdown-menu"></div>
									</button>
							`:""}
				</div>
				<div class="tpl-record-edit__btn-group">
					<button
						type="button"
						class="tp-record-edit__btn tp-record-edit__settings tp-record-edit__btn_white"
						onclick="edrec__editRecordSettings('${t}');"
					>
						<div class="tp-record-edit__btn__icon-wrapper">
							<svg class="tp-record-edit__btn__icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M13.5877 5.63828L12.0273 5.37324C11.939 5.09351 11.8212 4.82858 11.6887 4.56355L12.6014 3.28283C12.7339 3.09142 12.7192 2.8265 12.5573 2.66454L11.3059 1.41318C11.144 1.25124 10.8791 1.22177 10.6876 1.36902L9.4069 2.28171C9.15665 2.14925 8.87694 2.03147 8.59721 1.94315L8.34696 0.3975C8.3028 0.161936 8.1114 0 7.87583 0H6.10931C5.87374 0 5.68244 0.161939 5.63817 0.3975L5.37324 1.95792C5.09351 2.04624 4.82858 2.16402 4.56355 2.29649L3.28283 1.3838C3.09142 1.25133 2.8265 1.26601 2.66454 1.42795L1.41318 2.67931C1.25124 2.84125 1.22177 3.10617 1.36902 3.2976L2.28171 4.57832C2.14925 4.82857 2.03147 5.10829 1.94315 5.38802L0.3975 5.63827C0.161936 5.68242 0 5.87383 0 6.1094V7.87592C0 8.11148 0.161939 8.30278 0.3975 8.34705L1.95792 8.61198C2.04624 8.89171 2.16402 9.15664 2.29649 9.42168L1.3838 10.7024C1.25133 10.8938 1.26601 11.1587 1.42795 11.3207L2.67931 12.572C2.84125 12.734 3.10617 12.7635 3.2976 12.6162L4.57832 11.7035C4.82857 11.836 5.10829 11.9538 5.38802 12.0421L5.65295 13.6025C5.6971 13.8381 5.88851 14 6.12408 14H7.8906C8.12617 14 8.31747 13.8381 8.36173 13.6025L8.61198 12.0273C8.89171 11.939 9.15664 11.8212 9.42168 11.6887L10.7024 12.6014C10.8938 12.7339 11.1587 12.7192 11.3207 12.5572L12.572 11.3059C12.734 11.144 12.7635 10.879 12.6162 10.6876L11.7035 9.40688C11.836 9.15663 11.9538 8.87691 12.0421 8.59718L13.6025 8.33225C13.8381 8.2881 14 8.09669 14 7.86112L13.9999 6.10927C13.9852 5.87381 13.8233 5.6824 13.5877 5.63824L13.5877 5.63828ZM6.99261 9.50996C5.59412 9.50996 4.47523 8.3764 4.47523 6.99258C4.47523 5.59409 5.60879 4.4752 6.99261 4.4752C8.37643 4.4752 9.51 5.59406 9.51 6.99258C9.51 8.3911 8.39113 9.50996 6.99261 9.50996Z" fill="#333333"/></svg>
						</div>
						<span class="tp-record-edit__btn__title">{{settings}}</span>
					</button>
					<button
						type="button"
						class="tp-record-edit__btn tp-record-edit__content tp-record-edit__btn_orange"
						onclick="${["396","421"].includes(o)?"tp__openZero":"edrec__editRecordContent"}('${t}');"
					>
						<div class="tp-record-edit__btn__icon-wrapper">
							<img class="tp-record-edit__btn__icon tp-record-edit__btn__icon_content" src="/tpl/img/page/tp-03-edit.svg" />
						</div>
						<span class="tp-record-edit__btn__title">
							${["396","421"].includes(o)?"{{block_editor}}":"{{content}}"}
						</span>
					</button>
					${["754","776","778","786","951","973","1025"].includes(o)?(a=document.querySelector(`#rec${t} .t-store`))&&a.getAttribute("data-storepart")?(n=400,`
								<a class="tp-record-edit__btn tp-record-edit__btn_gray" href="/identity/gostore/?projectid=${window.projectid}" target="_blank">
										<div class="tp-record-edit__btn__icon-wrapper">
											<img class="tp-record-edit__btn__icon" src="/tpl/img/page/tp-16-products.svg" />
										</div>
										<span class="tp-record-edit__btn__title">{{products}}</span>
								</a>
							`):"":!["896","897","915","924","925","1004"].includes(o)||!(a=(a=document.querySelector(`#rec${t} .t-feed`))&&a.getAttribute("data-feedpart"))||["5d9725a245f86259476957","5d971e17b674f464032195","873491564841"].includes(a)?"":(n=385,`
										<a class="tp-record-edit__btn tp-record-edit__btn_gray" href="/identity/gofeeds/?projectid=${window.projectid}&feeduid=${a}" target="_blank">
												<div class="tp-record-edit__btn__icon-wrapper">
													<img
														class="tp-record-edit__btn__icon tp-record-edit__btn__icon_feeds"
														src="/tpl/img/page/tp-17-news.svg"
													/>
												</div>
												<span class="tp-record-edit__btn__title">{{posts}}</span>
										</a>
								`)}
					${"y"===r.editnotpublish?`
								<button 
									class="tp-record-edit__btn tp-record-edit__btn_gray"
									onclick="showCornerNotice('{{note_diff_edit_and_publish}}',8000);"
								>
									<div class="tp-record-edit__btn__icon-wrapper">
										<svg opacity="0.5" class="tp-record-edit__btn__icon" role="img" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;">
											<circle fill="#000000" cx="12.125" cy="12.125" r="12"></circle>
											<g>
												<path fill="#ffffff" d="M10.922,6.486c0-0.728,0.406-1.091,1.217-1.091s1.215,0.363,1.215,1.091c0,0.347-0.102,0.617-0.304,0.81
													c-0.202,0.193-0.507,0.289-0.911,0.289C11.328,7.585,10.922,7.219,10.922,6.486z M13.252,17.792h-2.234V9.604h2.234V17.792z"></path>
											</g>
										</svg>
									</div>
								</button>
							`:""}
				</div>
			</div>
		</div>
		${r.title||r.title_ru?`
					<div class="recordediticons secondleft tp-record-edit-icons-left__item-tpltitle">
						${"RU"===window.lang&&r.title_ru?r.title_ru:r.title||""}
					</div>
				`:""}
	`,a=tc__translate(c,"record__dict"),c=(i.insertAdjacentHTML("afterbegin",a),window.show_ai_in_block||(window.show_ai_in_block=localStorage.getItem("show_ai_in_block")),r.tplid=r.id,i.getAttribute("data-ai-tpl")),c=(r.ai=c,tp__record__isOpenForAI(r));const g=`
		${tp__getCommentButtonHTML(i,"tp-record-edit-icons-right__comment_unhover")}
		<div class="recordediticons mainright" id="rightbuttons">
			<div class="tp-record-edit-icons-right__wrapper">
				<div class="tp-record-edit-icons-right__one">
					<div class="tp-record-edit-icons-right__items dropdown">
						<div
							class="tp-record-edit-icons-right__item-icon tp-record-edit-icons-right__item-icon_right-border"
							onclick="tp__dublicateRecord('${t}');"
							data-toggle="tooltip"
							data-placement="top"
							title="{{duplicate}}"
						>
							<img src="/tpl/img/page/tp-04-duplicate.svg" />
						</div>
						<div
							class="tp-record-edit-icons-right__item-icon tp-record-edit-icons-right__item-icon_right-border"
							onclick="tp__delRecord('${t}');"
							data-toggle="tooltip"
							data-placement="top"
							title="{{delete}}"
						>
							<img src="/tpl/img/page/tp-05-delete-3.svg" />
						</div>
						<div
							class="tp-record-edit-icons-right__item-icon tp-record-edit-icons-right__item-icon_right-border"
							onclick="tp__offRecord('${t}');"
							data-toggle="tooltip"
							data-placement="top"
							title="{{hide_show}}"
						>
							<img src="/tpl/img/page/tp-05-off.svg" />
						</div>
						<div
							class="tp-record-edit-icons-right__item-icon dropdown-toggle dropdown-arrow"
							type="button"
						></div>
						<ul class="dropdown-menu">
							<li><a href="javascript:tp__record__bufCut('${t}');">{{cut}}</a></li>
							<li><a href="javascript:tp__record__bufCopy('${t}');">{{copy}}</a></li>
							<li><a href="javascript:tp__record__bufPaste('${t}');">{{paste}}</a></li>
							<li><a href="javascript:tp__selectModeOn('${t}');">{{select}}</a></li>
							<li class="dropdown-menu__divider"></li>
							${c?`<li><a href="javascript:tp__recordGenTextWithAI('${o}', '${t}');">{{generate_with_ai}}</a></li>`:""}
             				<li><a href="javascript:tp__loadComments('${t}');">{{commenting}}</a></li>
						</ul>
					</div>
				</div>
				<div class="tp-record-edit-icons-right__one-right-space"></div>
				<div class="tp-record-edit-icons-right__two">
					<div class="tp-record-edit-icons-right__items">
						<div
							class="tp-record-edit-icons-right__item-icon btn-sort-recup"
							style="display:table-cell !important; border-right:1px #ccc solid;"
							onclick="tp__upRecord('${t}');"
							data-toggle="tooltip"
							data-placement="top"
							title="{{move_up}}"
						>
							<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M4.375 5.78947V12H6.625V5.78947H10L5.5 0L1 5.78947H4.375Z" fill="#000000"/></svg>
						</div>
						<div
							class="tp-record-edit-icons-right__item-icon btn-sort-recdown"
							style="display:table-cell !important;"
							onclick="tp__downRecord('${t}');"
							data-toggle="tooltip"
							data-placement="top"
							title="{{move_down}}"
						>
							<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M6.625 6.21053L6.625 -2.95052e-07L4.375 -4.91753e-07L4.375 6.21053L1 6.21053L5.5 12L10 6.21053L6.625 6.21053Z" fill="#000000"/></svg>
						</div>
					</div>
				</div>
				<div class="tp-record-edit-icons-right__one-right-space"></div>
				${tp__getCommentButtonHTML(i)}
			</div>
		</div>
	`,b=tc__translate(g,"record__dict");i.insertAdjacentHTML("afterbegin",b),tp__record__addDropdownEvents(i);var c=(!!i.querySelector(".t-cover")||["941","996","1001"].includes(r.id))&&"734"!==r.id,l="y"===r.hasblockbackground,s=![396,734].includes(parseInt(o,10)),_=150<i.offsetHeight,p=d.getAttribute("data-bg-color")||"",u="99"===window.$oplan||"tester"===window.userrole;let e="";c?e=`
			<div class="recordediticons bottomleft">
				<button 
					class="tp-record-edit-icons-right__item-icon btn-cover-settings t-btn pe-tooltip"
					data-tooltip="{{cover_settings}}"
					data-tooltip-delay="700"
					area-label="{{cover_settings}}">
				</button>
			</div>
		`:u&&l&&s&&_&&(c=-1!==p.indexOf("gradient")?`background-image: ${p};`:`background-color: ${p};`,e=`
		<div class="recordediticons bottomleft">
			<button
				class="tp-record-edit-icons-right__item-icon btn-background-color t-btn pe-tooltip"
				data-tooltip="{{background_color_settings}}"
				area-label="{{background_color_settings}}"
				${p?`style="${c}"`:""}>
			</button>
		</div>`);var u=tc__translate(e,"record__dict"),l=(i.insertAdjacentHTML("beforeend",u),tp__record__addBottomButtonsEvent(i),i.querySelectorAll(".t-video-lazyload").length&&tc__onFuncLoad("t_video_lazyload__addVideoWithCheckViewport",()=>{t_video_lazyload__addVideoWithCheckViewport()}),d.getAttribute("data-screenmin")||""),s=d.getAttribute("data-screenmax")||"";if((l||s)&&(_=`
			<div 
				class="recordediticons diplayrestriction"
				style="left:${n}px;"
				title="{{set_width_viewport_limit}}"
			>
				<img
					src="https://static.tildacdn.com/lib/linea/bd5071b9-9e2d-2fa7-4562-c8c427f961ba/basic_eye.svg"
					style="width:18px; padding-right:8px;"
				/>
				<span>{{from}}${l||"0px"} {{to}} ${s||"&infin;"}</span>
			</div>
		`,p=tc__translate(_,"record__dict"),i.insertAdjacentHTML("afterbegin",p)),"0px"===window.getComputedStyle(d).paddingTop&&(i.querySelector(".recordbordertop").style.height="10px"),"0px"==window.getComputedStyle(d).paddingBottom){const m=i.querySelector(".recordborderbottom");m.style.height="10px",m.style.marginTop="-10px"}"y"===i.getAttribute("off")&&tp__minifyRecord(t),"y"===i.getAttribute("data-record-trash")&&(c=tc__translate(`
			<div
				class="recordediticons"
				style="display:block;z-index:1001;left:20px;background:yellow;padding:6px 15px;cursor:pointer;font-weight:500;"
				title=""
				onclick="tp__recoverRecord('${t}');"
			>
				{{recover_from_trash}}
			</div>
		`,"record__dict"),i.insertAdjacentHTML("afterbegin",c),u=i.querySelector(".mainright"),l=i.querySelector(".mainleft"),u&&u.remove(),l)&&l.remove(),tp__record__onBordersdragmode(t);s=window.getComputedStyle(i);parseFloat(s.height)<1&&(i.style.minHeight="100px")}else{const g=`
			<div class="recordediticons mainright" id="rightbuttons">
				<div class="tp-record-edit-icons-right__wrapper">
					<div class="tp-record-edit-icons-right__one">
						<div class="tp-record-edit-icons-right__items">
							<div
								class="tp-record-edit-icons-right__item-icon tp-record-edit-icons-right__item-icon_right-border"
								onclick="tp__delRecord('${t}');"
								data-toggle="tooltip"
								data-placement="top"
								title="{{delete}}"
							>
								<img src="/tpl/img/page/tp-05-delete-3.svg" />
							</div>
						</div>
					</div>
				</div>
			</div>
		`,b=tc__translate(g,"record__dict");void i.insertAdjacentHTML("afterbegin",b)}}function tp__record__addBottomButtonsEvent(e){var t=e.querySelector(".btn-cover-settings");const o=e.querySelector(".btn-background-color");t&&(t.addEventListener("click",()=>{tp__loadCoverBgWidget(e.getAttribute("recordid")||"")}),window.tooltipster([t],{content:t.getAttribute("data-tooltip"),theme:"pe-tooltip_noir",delay:700,position:"right"})),o&&tc__onFuncLoad("TColorPicker",()=>{tp__initTColorPicker(o)})}function tp__loadCoverBgWidget(e){var t;document.getElementById("record"+e)&&(showLoadIcon&&showLoadIcon(),t=["/front/css/t-record-cover-settings.min.css","/front/js/t-record-cover-settings.min.js"].map(tp__loadResource),Promise.all(t).then(()=>{hideLoadIcon&&hideLoadIcon(),tp__coverWidget__init(e)}))}function tp__initTColorPicker(o){if(o){const r=()=>{window.tooltipster([o],{functionBefore:(e,t)=>{const o=setTimeout(()=>{!document.querySelector(".tcolors-panel")&&t()},700),r=()=>{clearTimeout(o),e.removeEventListener("mouseleave",r)};e.addEventListener("mouseleave",r)},content:o.getAttribute("data-tooltip"),theme:"pe-tooltip_noir",restoration:"none",position:"right"})};r();var e=o.closest(".record");if(e){const t=e.getAttribute("recordid")||"",n=e.querySelector(".r"),i=n.getAttribute("data-bg-color")||"",d=-1!==i.indexOf("gradient"),c=e=>{n.style.background=e,o.style.background=e};e={isOpacityEnabled:!1,swatchesKey:window.projectid,inputReplacement:o,position:"right-center",panelZIndex:1010,isGradientsEnabled:!0,panelGap:10,viewboxPadding:"65px 5px 5px",colorChangeDelay:0};const a=new TColorPicker(null,e);a.init(),o.addEventListener("paneltoggle",e=>{var t=o.closest(".recordediticons.bottomleft");t&&t.classList.toggle("bottomleft_visible",e.isOpen),e.isOpen?(window.tooltipster([o],"destroy"),d?a.gradient=TColorPicker.parseGradient(i):a.color=i):(r(),window.bgColorReturnTimeout=setTimeout(()=>{var e=n.getAttribute("data-bg-color")||"";c(e)},0))}),o.addEventListener("colorchange",e=>{e=e.currentColor.gradient?e.currentColor.gradient.css:e.currentColor.hex,clearTimeout(window.bgColorReturnTimeout),e={comm:"saverecord",pageid:window.pageid,recordid:t,blockbackground:e||""};tp__fetch({url:"/page/submit/",body:e,explanation:"save block background color"}).then(e=>{"OK"!==e?td__showBubbleNotice("Error: save block background color",6e3,"error"):(tp__scrollToRecord(t),updateRecord(t))})}),o.addEventListener("colorupdate",e=>{e=e.currentColor.gradient?e.currentColor.gradient.css:e.currentColor.hex;c(e)})}}}function tp__record__addEditFieldEvents(o){var e=document.getElementById("record"+o);if(e&&"121"!==e.getAttribute("data-record-type")){e.querySelectorAll("[field]").forEach(e=>e.addEventListener("click",tp__record__editField)),e.querySelectorAll("[imgfield]").forEach(e=>{e.addEventListener("mouseenter",()=>e.style.opacity=.7),e.addEventListener("mouseleave",()=>e.style.opacity=1)});const t="396"===e.getAttribute("data-record-type");e.querySelectorAll("[imgfield], [bgimgfield]").forEach(r=>{var e=parseInt(Math.floor(Math.random()*(9e5+1))+99999,10),e=r.id||"tuwidget"+e;r.id=e;const n=r.getAttribute("imgfield")||r.getAttribute("bgimgfield"),i=r.hasAttribute("data-tu-noclick");t||r.setAttribute("data-tu-noclick","yes"),TUWidget.init(r).done(e=>{var t=new Event("tuwidget_done"),t=(r.dispatchEvent(t,e),{comm:"saverecord",pageid:window.pageid,recordid:o,onlythisfield:n,[n+"-uploadmethod"]:"tu",[n+"-tuinfo-uuid"]:e.tuInfo.uuid,[n+"-tuinfo-cdnurl"]:e.tuInfo.cdnUrl,[n+"-tuinfo-name"]:e.tuInfo.name,[n+"-tuinfo-width"]:e.tuInfo.width,[n+"-tuinfo-size"]:e.tuInfo.size});tp__fetch({url:"/page/submit/",body:t,explanation:"saving image"}).then(e=>{e&&"OK"!==e?alert(e):(tp__scrollToRecord(o),tp__updateRecord(o),tp__updateUndoButton())}).catch(e=>{console.error(e)})}),t||r.addEventListener("click",()=>{if(!window.imageWidget||window.imageWidget.imageElement===r&&window.imageWidget.isIcon){if(window.imageWidget)return}else if(!window.imageWidget.close())return;if(!i){const o=r.closest(".record").getAttribute("recordid");var e={pageid:window.pageid,recordid:o,tab:"content",comm:"editrecordcontent"},e=tp__fetch({url:"/page/edit/",body:e,explanation:"loading block content",responseType:"json"}),t=tp__loadEditorResource("/front/js/t-record-imagewidget.min.js");Promise.all([e,t]).then(([e])=>{if(window.imageWidget&&!window.imageWidget.close())return;window.imageWidget=new TImageWidget(r,o,n,e)}).catch(e=>{console.error(e)})}})})}}function tp__record__addEditUiDel(e){var t=document.getElementById("record"+e);t&&(t.insertAdjacentHTML("afterbegin",'<div class="recordbordertop"></div>'),t.insertAdjacentHTML("beforeend",'<div class="recordborderbottom"></div>'),t.insertAdjacentHTML("afterbegin",`
		<div class="recordediticons mainright" id="rightbuttons">
			<div class="tp-record-edit-icons-right__wrapper">
				<div class="tp-record-edit-icons-right__one">
					<div class="tp-record-edit-icons-right__items">
						<div
							class="tp-record-edit-icons-right__item-icon"
							onclick="tp__delRecord('${e}');"
							data-toggle="tooltip"
							data-placement="top"
							title="Delete"
						>
							<img src="/tpl/img/page/tp-05-delete-3.svg" />
						</div>
					</div>
				</div>
			</div>
		</div>
	`),"y"===t.getAttribute("off")&&(t.style.opacity="0.4"),e=window.getComputedStyle(t),parseFloat(e.height)<1)&&(t.style.minHeight="100px")}function tp__record__addEditOnReady(e){e=document.getElementById("record"+e);e&&e.querySelectorAll(".tp-tplswitch-item").forEach(function(t){t.addEventListener("click",function(){window.stickloop&&(window.clearInterval(window.stickloop),window.stickloop=null,document.removeEventListener("mousemove",tp__record__update_cursor_pos));var e=t.querySelector(".tp-tplswitch-item__icon");e&&e.remove()})})}function tp__record__update_cursor_pos(e){window.cursorPos||(window.cursorPos={}),window.cursorPos.x=e.clientX,window.cursorPos.y=e.clientY}function tp__record__stick_div_to_mouse(e){const t=document.querySelector(e);t&&(window.cursorPos={x:0,y:0},document.removeEventListener("mousemove",tp__record__update_cursor_pos),document.addEventListener("mousemove",tp__record__update_cursor_pos),window.stickloop&&(window.clearInterval(window.stickloop),window.stickloop=null),window.stickloop=window.setInterval(()=>{t.style.translate=`0px ${window.cursorPos.y}px`},30))}function tp__record__onBordersdragmode(e){const t=document.querySelector(`${e?`#record${e} `:""}.recordbordertop`),o=document.querySelector(`${e?`#record${e} `:""}.recordborderbottom`),d={},c=e=>{document.body.style.userSelect="none",document.body.style.setProperty("-webkit-user-select","none");var{r:t,borderHelper:o,startY:r,startPadding:n,isBottom:i}=d,e=e.clientY-r,r=Math.max(parseInt(n+e,10),0),r=Math.min(210,r),n=(r=15*Math.floor(r/15),t.style.setProperty("padding-"+(i?"bottom":"top"),r+"px"),o.firstElementChild),e=o.lastElementChild;n.innerText=(r/30).toFixed(1),e.innerText=r+"px"},a=()=>{document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",a),document.body.style.removeProperty("user-select"),document.body.style.removeProperty("-webkit-user-select");var{border:e,r:t,isBottom:o}=d;tp__record__removeBorderdraghelper();const r=e.parentElement.getAttribute("recordid");e=parseInt(t.style.getPropertyValue("padding-"+(o?"bottom":"top")),10)||0,t={comm:"saverecord",pageid:window.pageid,recordid:r,[o?"marginbottom":"margintop"]:e+"px",onlythisfield:o?"marginbottom":"margintop"};tp__fetch({url:"/page/submit/",body:t,explanation:"saving rec offset"}).then(e=>{e&&"OK"!==e||(tp__updateRecord(r),tp__updateUndoButton())}).catch(e=>{console.error(e)})},r=(e,t,o)=>{var r=e.parentElement.querySelector(".r"),n=parseInt(r.style.getPropertyValue("padding-"+(o?"bottom":"top")),10)||0,i=tp__record__drawBorderdraghelper(e.parentElement,o,n);d.border=e,d.r=r,d.borderHelper=i,d.startY=t,d.startPadding=n,d.isBottom=o,document.addEventListener("pointermove",c),document.addEventListener("pointerup",a)};e=e=>{t&&t.contains(e.target)?r(t,e.clientY,!1):o&&o.contains(e.target)&&r(o,e.clientY,!0)};t&&t.addEventListener("pointerdown",e),o&&o.addEventListener("pointerdown",e)}function tp__record__drawBorderdraghelper(e,t,o){t=`
		<div
			id="borderhelper"
			style="${t?"bottom:20px;":"top:15px;"}"
		>
			&nbsp;
			<span id="borderhelper_l">
				${(o/30).toFixed(1)}
			</span>
			&nbsp;&nbsp;&nbsp;
			<span id="borderhelper_r" style="opacity:0.4;">
				${o}px
			</span>
		</div>
	`,e.insertAdjacentHTML("beforeend",t),o=document.getElementById("borderhelper");return o.style.opacity="0.9",o}function tp__record__removeBorderdraghelper(){const e=document.getElementById("borderhelper");window.setTimeout(()=>e&&e.remove(),300)}function tp__record__showLefdropdown(o){var e=document.getElementById("record"+o);if(e&&!tp__checkOpenedWidgets()){const r=e.querySelector(".tp-record-edit-icons-left__dropdown-menu");if(r){const n=e.getAttribute("data-record-type");if(!r.querySelector(".tp-record-edit-icons-left__dropdown-menu-ul")){window.$tpls=Array.isArray(window.$tpls)?window.$tpls:[];const d=window.$tpls.find(e=>e.id===n)||{};!d.id&&(d.id=n,e=e.getAttribute("data-record-category"))&&(d.type=e);const c=parseInt(window.$oplan,10)||parseInt(window.$uplan,10)||0;var e=window.$tpls.filter(e=>e.type&&e.type===d.type&&!["396","421"].includes(e.id)&&(0===c&&"y"!==e.disableforplan0||1===c&&"y"!==e.disableforplan1||![0,1].includes(c))),t=tp__record__getFlag_keepcontentifchangerecordtpl();e.length&&(t=`
				<div
					class="tp-record-edit-icons-left__dropdown-menu-flag${"y"===t?" tp-record-edit-icons-left__dropdown-menu-flag_checked":""}"
					onclick="tp__record__toggleFlag_keepcontentifchangerecordtpl();"
				>
					<img 
						src="/tpl/img/t-icon-switcher-off.png"
						class="tp-record-edit-icons-left__switcher-off"
						width="40px"
						height="25px"
					/>
					<img
						src="/tpl/img/t-icon-switcher-on.png"
						class="tp-record-edit-icons-left__switcher-on"
						width="40px"
						height="25px"
					/>
					<div class="tp-record-edit-icons-left__dropdown-hint-container">
						<span>{{save_content_on_switch}}</span>	
						<span
							class="tp-record-edit-icons-left__switcher-on-hint"
							${"y"!==t?'style="display:none;"':""}
						>
							{{block_may_look_unbalanced}}
						</span>
					</div>
				</div>
				<ul class="tp-record-edit-icons-left__dropdown-menu-ul">
					${e.map(e=>{let t="";return e.icon&&e.icon.includes("https://static.")?t=e.icon:e.icon&&(t=`https://assets.tildacdn.com/files/tplicons/tpl_${e.id}.png`),`
							<li>
								<a
									href="javascript:tp__changeRecordTpl('${o}','${e.id}');"
									class="tp-tplswitch-item"
									data-tplinfo-icon="${t}"
								>
									<span
										${n===e.id?'style="opacity:0.3;"':""}
									>
										${e.cod}:
									</span>
									${"RU"===window.lang&&e.title_ru||e.title}
								</a>
							</li>
						`}).join("")}
				</ul>
			`,r.innerHTML="",e=tc__translate(t,"record__dict"),r.insertAdjacentHTML("afterbegin",e)),r.querySelectorAll(".tp-tplswitch-item").forEach(o=>{o.onmouseenter=()=>{var e=o.getAttribute("data-tplinfo-icon"),t=document.querySelector(".tp-tplswitch-item__icon");t?(t=t.querySelector("img"))&&(t.src=e):(document.body.insertAdjacentHTML("beforeend",`<div class="tp-tplswitch-item__icon"><img src="${e}"></div>`),tp__record__stick_div_to_mouse(".tp-tplswitch-item__icon")),window.stickloopclose&&(window.clearTimeout(window.stickloopclose),window.stickloopclose=null)},o.onmouseleave=()=>{window.stickloopclose=window.setTimeout(()=>{window.stickloop&&(window.clearInterval(window.stickloop),window.stickloop=null,document.removeEventListener("mousemove",tp__record__update_cursor_pos));var e=document.querySelector(".tp-tplswitch-item__icon");e&&e.remove()},30)}})}r.classList.toggle("tp-record-edit-icons-left__dropdown-menu_opened");const i=()=>{r.classList.remove("tp-record-edit-icons-left__dropdown-menu_opened");var e=document.querySelector(".tp-tplswitch-item__icon");e&&e.remove(),window.stickloop&&(window.clearInterval(window.stickloop),window.stickloop=null,document.removeEventListener("mousemove",tp__record__update_cursor_pos))};r.onmouseleave=i,r.querySelectorAll("a").forEach(e=>e.onclick=i)}}}function tp__record__toggleFlag_keepcontentifchangerecordtpl(){const t=".tp-record-edit-icons-left__dropdown-menu-flag";const o=tp__record__getFlag_keepcontentifchangerecordtpl();document.querySelectorAll(t).forEach(e=>{e.classList.toggle(t.substring(1)+"_checked","y"!==o)}),document.querySelectorAll(".tp-record-edit-icons-left__switcher-on-hint").forEach(e=>{e.style.display="y"===o?"none":"block"}),tp__record__setFlag_keepcontentifchangerecordtpl("y"===o?"":"y")}function tp__record__getFlag_keepcontentifchangerecordtpl(){let e="";return void 0===window.tp_flag_keepcontentifchagerecordtpl?(e="y"===(e=window.localStorage.getItem("tp-flag-keepcontentifchagerecordtpl"))?e:"",window.tp_flag_keepcontentifchagerecordtpl=e):e=window.tp_flag_keepcontentifchagerecordtpl,e}function tp__record__setFlag_keepcontentifchangerecordtpl(e){window.localStorage.setItem("tp-flag-keepcontentifchagerecordtpl",e),window.tp_flag_keepcontentifchagerecordtpl=e}function tp__record__showMapCritycalText(t,o){t=document.querySelector(`#record${t}[off="n"]`);if(t){let e=`Error! Provider ${o} is not found.`;"google"===o?e="{{maps_google_critycal_text}}":"yandex"===o&&(e="{{maps_yandex_critycal_text}}");o=`
		<div style="margin: 0px;text-align: left; font-family: tfutura,Arial; position: relative; max-width: 100%;">
			<div style=" background: yellow; padding: 40px 40px;">
				<div style="width: 40px; height: 40px; float: left; display: inline-block;margin-left: 80px;margin-top: -80px;">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path fill="#ff0" d="M0 40l40-20v20H0z"/></svg>
				</div>
				${e}
				<br>
			</div>
		</div>
	`,t=t.querySelector(".r"),o=tc__translate(o,"record__dict");t&&t.insertAdjacentHTML("afterend",o)}}function tp__record__showFormCritycalText(t,o,r,n,i){t=document.getElementById("record"+t);if(t&&!t.querySelector(".js-errorbox-all")){let e="";var d=document.getElementById("allrecords").getAttribute("data-tilda-project-id"),c=d?`<a href="/projects/settings/?projectid=${d}#tab=ss_menu_forms">`:"",d=d?"</a>":"";"NO"===o&&"yes"===i?(i=(new DOMParser).parseFromString(n,"text/html").body.textContent,e=`
			<span style="font-weight: 300">{{forms_success_connected}}</span>
			<span style="font-weight: 500">${r}</span>
			<br>
			<span style="font-weight: 300">{{forms_data_will_be_sent}}</span>
			<span style="font-weight: 500">${i}</span>
			<br><br><b>{{forms_page_need_publish}}</b>
		`):"NEED_INPUT_SCRIPT"===o?e="{{forms_has_not_script|abeg|aend}}":"NEED_CONNECT_RECEIVER"===o&&(e="{{forms_has_not_data_receiver}}"),e&&(n=`
			<div style="margin: 0px;text-align: left; font-family: tfutura,Arial; position: relative;">
				<div style="max-width: 100%; background: yellow; padding: 40px 40px; box-sizing: border-box;" class="t-container">
					<div style="width: 40px; height: 40px; float: left; display: inline-block;margin-left: 80px;margin-top: -80px;">
						<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height = "40px"  width = "40px"><polygon fill="yellow" stroke="yellow" stroke-width="0" points="0,40  40,20 40,40 0,40" /></svg>
					</div>
					${e}
					<br>
				</div>
			</div>
		`,r=t.querySelector(".r"),i=tc__translate(n,"record__dict",{abeg:c,aend:d}),r.insertAdjacentHTML("afterend",i))}}function tp__record__showCritycalText(e,t){var e=document.getElementById("record"+e);e&&t&&(t=`
		<div style="margin: 0px;text-align: left; font-family: tfutura,Arial; position: relative;">
			<div style="max-width: 100%; background: yellow; padding: 40px 40px; box-sizing: border-box;" class="t-container">
				<div style="width: 40px; height: 40px; float: left; display: inline-block;margin-left: 80px;margin-top: -80px;">
					<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height = "40px"  width = "40px">
						<polygon fill="yellow" stroke="yellow" stroke-width="0" points="0,40  40,20 40,40 0,40" />
					</svg>
				</div>
				${"OLDTPL"===t?"{{blocks_critycal_text}}":t}
				<br>
			</div>
		</div>
	`,e=e.querySelector(".r"),t=tc__translate(t,"record__dict"),e.insertAdjacentHTML("afterend",t))}function tp__record__addDropdownEvents(e){if(!e)return;const t=e.querySelector(".dropdown");if(!t)return;var o=t.querySelector(".dropdown-toggle"),r=t.querySelector(".dropdown-menu");if(!o||!r)return;o.addEventListener("click",()=>{(t.classList.contains("open")?i:n)()});const n=()=>{t.classList.add("open"),e.addEventListener("mouseleave",i),e.addEventListener("click",c),document.body.addEventListener("keyup",d)},i=()=>{t.classList.remove("open"),e.removeEventListener("mouseleave",i),e.removeEventListener("click",c),document.body.removeEventListener("keyup",d)},d=e=>{"Escape"===e.key&&i()},c=e=>{!e.target.closest(".dropdown-toggle")&&i()}}function tp__record__buttonPopup__init(){document.body.addEventListener("click",e=>{var t,o,r,n,i=e.target.closest(".r .t-btn, .r .t-btntext, .r .t-submit");!i||i.closest(".t-popup, .t706__cartwin")||(o="none"===i.style.display,t=!document.body.contains(i),o)||t||(o=i.closest(".record"))&&(t=o.getAttribute("recordid"))&&(o=i.getAttribute("data-buttonfieldset"))&&["button","button2","button3","button4","bbutton","li_button","li_button2","li_button3"].includes(o)&&(r=o.startsWith("li_"),n=i.getAttribute("data-lid"),r&&!n||(e.preventDefault(),tp__record__buttonPopup__open({recordid:t,buttonElement:i,buttonType:o,isList:r,lid:n})))}),document.body.addEventListener("auxclick",e=>{var t=1===e.button,o=e.target.closest(".r .t-btn, .r .t-btntext, .r .t-submit");o&&t&&(t=o.getAttribute("href"))&&(e.preventDefault(),{isValidLink:o,linkHref:e}=tp__record__buttonPopup__getLinkHref(t),o)&&window.open(e,"_blank","noopener,noreferrer")})}function tp__record__buttonPopup__open(e){if(e){const{recordid:p,buttonElement:o,buttonType:r,isList:n,lid:i}=e;var e="buttonPopup"in window,t=e&&window.buttonPopup.buttonElement===o;if(!t){if(e)if(!tp__record__buttonPopup__close())return;window.buttonPopup={recordid:p,buttonElement:o,buttonType:r,isList:n,lid:i},document.addEventListener("click",tp__record__buttonPopup__handleDocClick),document.addEventListener("keydown",tp__record__buttonPopup__handleDocKeyDown),tp__record__buttonPopup__getButtonFieldsValues().then(({buttonFieldsValues:t,list:e})=>{var o,r,n,i,d,c,a,l,s,_;window.buttonPopup&&((o=document.createElement("form")).classList.add("tp-record-btn-popup","hidden"),o.setAttribute("data-recordid",p),s=["color","bgcolor","bordercolor","bordersize","radius"].some(e=>e in t),s=("link"in t||"title"in t)&&s,{link:c,target:a,title:l,color:_,bgcolor:r,bordercolor:n,bordersize:i,radius:d}=t,c=[{field:c,title:tc__translate("{{button_link}}","edrec__dict"),placeholder:tc__translate("{{link}}","edrec__dict"),isLink:!0,linkTargetField:a},{field:l,title:tc__translate("{{button_caption}}","edrec__dict"),placeholder:tc__translate("{{text}}","edrec__dict")},{isGroupStart:!0,isGroupVisible:!s},{field:_,isColor:!0,title:tc__translate("{{text_color}}","edrec__dict")},{field:r,isColor:!0,isGradient:!0,title:tc__translate("{{background_color}}","edrec__dict")},{field:n,isColor:!0,title:tc__translate("{{border_color}}","edrec__dict")},{field:i,units:"px",title:tc__translate("{{border_width}}","edrec__dict")},{field:d,units:"px",title:tc__translate("{{border_radius}}","edrec__dict")},{isGroupEnd:!0}],a=`
				<div class="tp-record-btn-popup__btns">
					<button type="button" class="tp-record-btn-popup__btn tp-record-btn-popup__btn_close">
						${tc__translate("{{cancel}}","edrec__dict")}
					</button>
					<button type="submit" class="tp-record-btn-popup__btn tp-record-btn-popup__btn_save">
						${tc__translate("{{save}}","edrec__dict")}
					</button>
				</div>
			`,l=c.map(e=>tp__record__buttonPopup__getFieldHTML(e)).join("")+a,o.insertAdjacentHTML("beforeend",l),document.body.append(o),edrec__initTooltipster(o),window.buttonPopup.popup=o,window.buttonPopup.buttonFieldsValues=t,window.buttonPopup.list=e,tp__record__buttonPopup__updatePosition(),tp__record__buttonPopup__addEvents(),(s=o.querySelector(".tp-record-btn-popup__input"))&&!s.getAttribute("data-color")&&(s.focus(),s.select()),o.classList.remove("hidden"),(_=window.matchMedia("(max-width: 640px)").matches)&&document.getElementById("closelayer").classList.remove("hidden"),_||tp__record__buttonPopup__scrollToButton())}).catch(()=>{window.buttonPopup&&window.buttonPopup.buttonElement===o&&tp__record__buttonPopup__close(!0)})}}}function tp__record__buttonPopup__getButtonFieldsValues(){return Promise.all([new Promise((t,o)=>{if(!window.buttonPopup)return o();const{recordid:e,isList:r}=window.buttonPopup;var n={pageid:window.pageid,recordid:e,tab:"content",comm:"editrecordcontent"},n=td__ajax({url:"/page/edit/",ui:{ctext:"loading button content"},dataToSend:n,responseType:"json",onSuccess:e=>window.buttonPopup?!e||!e.record||!e.tpl||!e.tpl.fields||r&&!e.tpl.lifields||r&&!e.record.list?(td__showBubbleNotice("Error loading button content."),o()):t(e):o(),onError:()=>o()});Array.isArray(window.buttonPopup.getXHR)?window.buttonPopup.getXHR.push(n):window.buttonPopup.getXHR=[n]}),new Promise((t,o)=>{if(!window.buttonPopup)return o();var e=window.buttonPopup["recordid"],e={pageid:window.pageid,recordid:e,tab:"settings",comm:"editrecordsettings"},e=td__ajax({url:"/page/edit/",ui:{ctext:"loading button content"},dataToSend:e,responseType:"json",onSuccess:e=>window.buttonPopup?e&&e.record&&e.tpl&&e.tpl.fields?t(e):(td__showBubbleNotice("Error loading button settings."),o()):o(),onError:()=>o()});Array.isArray(window.buttonPopup.getXHR)?window.buttonPopup.getXHR.push(e):window.buttonPopup.getXHR=[e]})]).then(([o,r])=>{if(!window.buttonPopup)return reject();const{buttonType:e,isList:n,lid:t}=window.buttonPopup;var i={button:{title:"buttontitle",link:["buttonlink","link"],target:["buttonlinktarget","linktarget"],color:"buttoncolor",bgcolor:"buttonbgcolor",bordercolor:"buttonbordercolor",bordersize:"buttonbordersize",radius:"buttonradius"},button2:{title:"buttontitle2",link:"buttonlink2",target:"buttonlinktarget2",color:["buttoncolor2","buttoncolor"],bgcolor:["buttonbgcolor2","buttonbgcolor"],bordercolor:["buttonbordercolor2","buttonbordercolor"],bordersize:["buttonbordersize2","buttonbordersize"],radius:"buttonradius"},button3:{title:"buttontitle3",link:"buttonlink3",target:"buttonlinktarget3",color:["buttoncolor3","buttoncolor"],bgcolor:["buttonbgcolor3","buttonbgcolor"],bordercolor:["buttonbordercolor3","buttonbordercolor"],bordersize:["buttonbordersize3","buttonbordersize"],radius:"buttonradius"},button4:{title:"buttontitle4",link:"buttonlink4",target:"buttonlinktarget4",color:"buttoncolor",bgcolor:"buttonbgcolor",bordercolor:"buttonbordercolor",bordersize:"buttonbordersize",radius:"buttonradius"},bbutton:{title:["bbuttontitle","buttontitle"],link:["bbuttonlink","buttonlink"],target:["bbuttonlinktarget","buttonlinktarget"],color:"bbuttoncolor",bgcolor:"bbuttonbgcolor",bordercolor:"bbuttonbordercolor",bordersize:"bbuttonbordersize",radius:"bbuttonradius"},li_button:{title:"li_buttontitle",link:["li_buttonlink","li_link"],target:["li_buttonlinktarget","li_linktarget"],color:"buttoncolor",bgcolor:"buttonbgcolor",bordercolor:"buttonbordercolor",bordersize:"buttonbordersize",radius:"buttonradius"},li_button2:{title:["li_buttontitle2","li_buttontitle"],link:["li_buttonlink2","li_buttonlink","li_link"],target:["li_buttonlinktarget2","li_buttonlinktarget","li_linktarget"],color:"buttoncolor2",bgcolor:"buttonbgcolor2",bordercolor:"buttonbordercolor2",bordersize:"buttonbordersize2",radius:"buttonradius"},li_button3:{title:["li_buttontitle3","li_buttontitle"],link:["li_buttonlink3","li_buttonlink","li_link"],target:["li_buttonlinktarget3","li_buttonlinktarget","li_linktarget"],color:"buttoncolor3",bgcolor:"buttonbgcolor3",bordercolor:"buttonbordercolor3",bordersize:"buttonbordersize3",radius:"buttonradius"}}[e];const d=r.tpl.fields.split(","),c=(n?d.push(...o.tpl.lifields.split(",")):d.push(...o.tpl.fields.split(",")),{});var a,l=[];n&&((a=document.createElement("div")).innerHTML=o.record.list,a=JSON.parse(a.textContent),l.push(...a));const s=l.find(e=>e.lid===t)||{},_=e=>{let t="";return{isFieldExists:d.includes(e),fieldValue:t=(t=n?s[e]||r.record[e]||"":o.record[e]||r.record[e]||"").replace(/"/g,"&quot;").replace(/&amp;/g,"&")}};return Object.entries(i).forEach(([e,t])=>{if(Array.isArray(t))for(const d of t){var{isFieldExists:o,fieldValue:r}=_(d);if(o){c[e]={name:d,value:r};break}}else{var{isFieldExists:n,fieldValue:i}=_(t);n&&(c[e]={name:t,value:i})}}),{buttonFieldsValues:c,list:l}})}function tp__record__buttonPopup__getFieldHTML(e){var{field:t,isLink:o,isColor:r,isGradient:n,units:i,linkTargetField:d,isGroupStart:c,isGroupVisible:a,isGroupEnd:l,placeholder:s}=e;if(l)return"</div></div>";if(c){let e="";return`
			<div class="tp-record-btn-popup__group">
				${e=a?e:`
				<button
					class="tp-record-btn-popup__group-toogle"
					type="button"
				>
					${tc__translate("{{button_style}}","edrec__dict")}
				</button>
			`}
				<div class="tp-record-btn-popup__group-content${a?"":" hidden"}">
		`}if(!t)return"";var{name:l,value:c}=t;let _=e.title,p=(_||(a="RU"===window.lang?window.lang:"EN",_=edrec__drawUI__getFieldObj(l).label[a]),""),u="",m=`
		<input
			type="text"
			class="tp-record-btn-popup__input"
			value="${c}"
			name=${l}
			${r?'data-color="true"':""}
			${n?'data-gradient="true"':""}
			${i?`data-units="${i}"`:""}
			${s?`placeholder="${s}"`:""}
		/>
	`;return o&&(d&&(t=d.name,e=d.value,p=`
				<div class="tp-record-btn-popup__link-more">
					<label class="tp-record-btn-popup__checkbox-label">
						<input
							type="checkbox"
							class="tp-record-btn-popup__checkbox"
							value="_blank"
							name="${t}"
							${e?"checked":""}
						/>
						<span>${tc__translate("{{new_window}}","edrec__dict")}</span>
					</label>
					<button
						class="tp-record-btn-popup__link-btn tp-record-btn-popup__link-btn_page"
						type="button"
					>
						${tc__translate("{{link_to_page}}","edrec__dict")}
					</button>
					<button
						class="tp-record-btn-popup__link-btn tp-record-btn-popup__link-btn_block"
						type="button"
					>
						${tc__translate("{{link_to_block}}","edrec__dict")}
					</button>
				</div>
			`),a=tc__translate("{{enter_full_link_address}}","edrec__dict").replace(/"/g,"&quot;"),{linkHref:l,isValidLink:r}=(u=`
			<span 
				class="pe-tooltip pe-tooltip__target"
				data-tooltip="${a}"
			>
			</span>
		`,tp__record__buttonPopup__getLinkHref(c)),m=`
			<div class="tp-record-btn-popup__input-wrapper">
				${m}
				<a
					class="tp-record-btn-popup__input-link${r?"":" tp-record-btn-popup__input-link_error"}${c?"":" hidden"}"
					href="${r&&c?l:"#"}"
					target="_blank"
					rel="noopener noreferrer"
				></a>
			</div>
		`),`
		<div class="tp-record-btn-popup__section">
			<label class="tp-record-btn-popup__label">
				<span class="tp-record-btn-popup__label-title">
					<span>${_}</span>
					${u}
				</span>
				${m}
			</label>
			${p}
		</div>
	`}function tp__record__buttonPopup__getLinkHref(t){let o=t,r=!0;try{var{projectid:n,pageid:i,pagealias:d,projectalias:c,projectcustomdomain:a}=window;let e=a?"http://"+a:c?`http://${c}.tilda.ws`:`http://project${n}.tilda.ws`;var l=d||`page${i}.html`,s=e+"/"+l,_=new URL(t,s);o=_.href}catch(e){r=!1}return{isValidLink:r,linkHref:o}}function tp__record__buttonPopup__updatePosition(){var e,t,o,r,n,i,d;window.buttonPopup&&!window.matchMedia("(max-width: 640px)").matches&&({buttonElement:r,popup:e}=window.buttonPopup,{right:r,width:n,bottom:t}=r.getBoundingClientRect(),o=window["scrollY"],i=document.documentElement["clientWidth"],d=e.getBoundingClientRect().width,r=r-n/2-d/2,i=i-d-(n=5),r=Math.min(Math.max(r,n),i),d=t+o+5,e.style.left=r+"px",e.style.top=d+"px")}function tp__record__buttonPopup__addEvents(){if(window.buttonPopup){var e=window.buttonPopup["popup"],t=e.querySelector(".tp-record-btn-popup__btn_close"),o=e.querySelector(".tp-record-btn-popup__link-btn_page"),r=e.querySelector(".tp-record-btn-popup__link-btn_block");const c=e.querySelector(".tp-record-btn-popup__group-toogle");var n=e.querySelectorAll('.tp-record-btn-popup__input[data-color="true"]'),i=e.querySelectorAll(".tp-record-btn-popup__input[data-units]"),d=e.querySelector('.tp-record-btn-popup__input[name*="link"]');const a=e.querySelector(".tp-record-btn-popup__input-link"),l=(e.addEventListener("submit",tp__record__buttonPopup__handleSubmit),t.addEventListener("click",tp__record__buttonPopup__close),window.addEventListener("resize",tp__record__buttonPopup__updatePosition),o&&o.addEventListener("click",tp__record__buttonPopup__handlePagePick),r&&r.addEventListener("click",tp__record__buttonPopup__handleBlockPick),d&&d.addEventListener("input",tp__record__buttonPopup__handlelinkInput),a&&a.addEventListener("click",e=>{a.classList.contains("tp-record-btn-popup__input-link_error")&&e.preventDefault()}),c&&c.addEventListener("click",()=>{c.nextElementSibling.classList.toggle("hidden"),c.classList.toggle("tp-record-btn-popup__group-toogle_opened")}),window.matchMedia("(max-width: 640px)").matches);n.forEach(e=>{var t=e["name"],t=t.includes("bgcolor"),t={letterCase:"lowercase",swatchesKey:window.projectid,swatchSize:25,swatchGap:7,panelZIndex:l?1130:1095,panelGap:3,bottomGap:10,isPanelFixed:l,clearBtnSize:14,isGradientsEnabled:e.getAttribute("data-gradient"),viewboxPadding:"65px 5px 5px",gradientHint:t?{RU:"-                     .",EN:"Due to compatibility issues of the gradient effect, in some browsers background color inconsistencies may appear around the button when hovering over it."}:null};new TColorPicker(e,t).init()}),i.forEach(o=>{o.addEventListener("blur",()=>{var e=o.getAttribute("data-units"),t=o.name;edrec__validation__input_px_vh(o,t,e)})})}}function tp__record__buttonPopup__handleSubmit(e){if(e.preventDefault(),window.buttonPopup){const{popup:t,postXHR:o,recordid:r,isList:n,lid:i,list:d}=window.buttonPopup;if(o&&o.abort(),!tp__record__buttonPopup__checkIfChanged())return tp__record__buttonPopup__close(!0);const c=t.querySelector(".tp-record-btn-popup__btn_save"),a=tp__record__buttonPopup__getValues();if(n){const l=d.find(e=>e.lid===i),s=(Object.keys(a).forEach(e=>{e.startsWith("li_")&&(l[e]=a[e],delete a[e])}),{});d.forEach((e,t)=>{s[t]=e}),a.list=JSON.stringify(s)}e={comm:"saverecord",recordid:r,pageid:window.pageid,...a};c.disabled=!0,window.buttonPopup.postXHR=td__ajax({url:"/page/submit/",ui:{ctext:"saving button content"},dataToSend:e,onSuccess:e=>{var t;check_logout(e),e&&"OK"!==e?"too much data"===e?(t=tc__translate("{{error_too_much_data}}","record__dict"),td__showBubbleNotice(t)):td__showBubbleNotice(e):(tp__scrollToRecord(r),tp__updateRecord(r),tp__record__buttonPopup__close(!0))},onComplete:()=>{c.disabled=!1,window.buttonPopup&&delete window.buttonPopup.postXHR}})}}function tp__record__buttonPopup__handlePagePick(){if(window.buttonPopup){const e=window.buttonPopup["popup"],t=e.querySelector('.tp-record-btn-popup__input[name*="link"]');if(t){window.buttonPopup.isLinkPicking=!0,e.style.opacity="0",e.style.pointerEvents="none";const o=()=>{window.setTimeout(()=>{window.buttonPopup&&(window.buttonPopup.isLinkPicking=!1),e.style.removeProperty("opacity"),e.style.removeProperty("pointer-events"),t.dispatchEvent(new Event("input"))},0)};"function"==typeof edlink__showPopUp__pageslist?edlink__showPopUp__pageslist(t,o):tp__loadEditorResource("/front/js/t-edrec-links.min.js").then(()=>{edlink__showPopUp__pageslist(t,o)}).catch(()=>o())}}}function tp__record__buttonPopup__handleBlockPick(){if(window.buttonPopup){const{popup:e,recordid:t}=window.buttonPopup,o=e.querySelector('.tp-record-btn-popup__input[name*="link"]');if(o){window.buttonPopup.isLinkPicking=!0,e.style.opacity="0",e.style.pointerEvents="none";const r=()=>{window.setTimeout(()=>{window.buttonPopup&&(window.buttonPopup.isLinkPicking=!1),e.style.removeProperty("opacity"),e.style.removeProperty("pointer-events"),tp__scrollToRecord(t),o.dispatchEvent(new Event("input"))},0)};"function"==typeof edlink__RecordPiker__show?edlink__RecordPiker__show(o,r):tp__loadEditorResource("/front/js/t-edrec-links.min.js").then(()=>{edlink__RecordPiker__show(o,r)}).catch(()=>r())}}}function tp__record__buttonPopup__handlelinkInput(){var e,t,o=this.nextElementSibling;o&&(e=this.value.trim(),o.classList.remove("tp-record-btn-popup__input-link_error","hidden"),e?({linkHref:e,isValidLink:t}=tp__record__buttonPopup__getLinkHref(this.value),t?o.href=e:(o.href="#",o.classList.add("tp-record-btn-popup__input-link_error"))):(o.href="#",o.classList.add("hidden")))}function tp__record__buttonPopup__getValues(){if(!window.buttonPopup)return{};var e=window.buttonPopup["popup"];if(!e)return{};e=new FormData(e);const t=Object.fromEntries(e.entries());return Object.keys(t).forEach(e=>{t[e]=t[e].replace(/</g,"&lt;").replace(/>/g,"&gt;")}),t}function tp__record__buttonPopup__checkIfChanged(){let e=!1;if(window.buttonPopup){var t=window.buttonPopup["buttonFieldsValues"];if(t){var o=tp__record__buttonPopup__getValues();const a={};Object.values(t).forEach(e=>a[e.name]=e.value);var r,n,i=document.createElement("div");for([r,n]of Object.entries(a)){var d=o[r]||"",d=(i.innerHTML=d,i.innerText),c=(i.innerHTML=n,i.innerText);if(c!==d){e=!0;break}}}}return e}function tp__record__buttonPopup__close(e){if(!window.buttonPopup)return!0;const{popup:t,isLinkPicking:o,postXHR:r,getXHR:n}=window.buttonPopup;if(o)return!1;r&&r.abort(),Array.isArray(n)&&n.forEach(e=>e.abort());var i=()=>{document.removeEventListener("click",tp__record__buttonPopup__handleDocClick),document.removeEventListener("keydown",tp__record__buttonPopup__handleDocKeyDown),window.removeEventListener("resize",tp__record__buttonPopup__updatePosition),t&&(t.classList.add("hidden"),t.addEventListener("transitionend",()=>{t.remove()},{once:!0})),document.getElementById("closelayer").classList.add("hidden"),delete window.buttonPopup},d=tp__record__buttonPopup__checkIfChanged();return(e||!d||!!confirm(tc__translate("{{user_has_unsaved_changes_msg}}","edrec__dict")))&&(i(),!0)}function tp__record__buttonPopup__handleDocClick(e){var t,o;!window.buttonPopup||e.defaultPrevented||({buttonElement:t,popup:o}=window.buttonPopup,t&&o&&(t.contains(e.target)||o.contains(e.target)||document.querySelector(".tcolors-panel, .tooltipster-base")||e.target.closest(".tc-alert-dialog")))||tp__record__buttonPopup__close()}function tp__record__buttonPopup__handleDocKeyDown(e){"Escape"!==e.key||document.querySelector(".tcolors-panel, .tc-alert-dialog, .tooltipster-base")||tp__record__buttonPopup__close()}function tp__record__buttonPopup__scrollToButton(){var e,t,o;window.buttonPopup&&(o=window.buttonPopup["buttonElement"],o=o.getBoundingClientRect()["bottom"],e=document.documentElement["clientHeight"],t=document.documentElement["scrollTop"],(o=e-o)<451||e<o)&&tp__scrollContainerToCoord(document.documentElement,451-o+t)}function tp__record__anchorLinksPopup__init(){document.body.addEventListener("click",function(e){var t;if(!e.target.closest(".tp-record__anchor-popup"))return e.target.closest('[data-record-type="215"]')&&"B"===e.target.tagName?(t=e.target.closest("[recordid]").getAttribute("recordid"),void tp__record__anchorLinksPopup__openPopup(e.target,t)):tp__record__anchorLinksPopup__closePopup()});document.body.insertAdjacentHTML("beforeend",'<style>[data-record-type="215"] center b {\tcursor: pointer;\tposition: relative;\tpadding-right: 20px;\tdisplay: inline-block;}[data-record-type="215"] center b::after {\tcontent: "";\tposition: absolute;\tright: 0px;\tbottom: 1px;\twidth: 13px;\theight: 13px;'+"\tbackground-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='14' viewBox='0 0 15 14' fill='none'%3E%3Cpath d='M2.49523 9.63441L4.60276 11.7419L1.53346 12.858C1.43735 12.893 1.34417 12.7998 1.37912 12.7037L2.49523 9.63441Z' fill='black'/%3E%3Cpath d='M5.39874 10.8878L3.39853 8.73126L9.72118 2.40846L11.8287 4.51598L5.39874 10.8878Z' fill='black'/%3E%3Cpath d='M12.7319 3.61276L10.6221 1.50758L11.9997 0.129945C12.0702 0.0594544 12.1845 0.0593909 12.255 0.129803L14.1091 1.97979C14.1798 2.05031 14.1799 2.1648 14.1093 2.2354L12.7319 3.61276Z' fill='black'/%3E%3C/svg%3E\");\tbackground-position: center;\tbackground-repeat: no-repeat;   background-size: contain;\tcursor: pointer;\topacity: 0;\ttransition: opacity 0.2s;}[data-record-type=\"215\"]:hover center b::after {\topacity: 1;}</style>")}function tp__record__anchorLinksPopup__openPopup(e,t){tp__record__anchorLinksPopup__closePopup();var o,r=e.innerHTML,e='<div class="tp-record__anchor-popup" style="top: '+(e.getBoundingClientRect().top+window.scrollY+30)+'px;">\t<textarea type="text" placeholder="'+tc__translate("{{enter_value}}","record__dict")+'">'+r+'</textarea>\t<button class="tp-record__anchor-submit" data-recordid="'+t+'" data-old-value="'+r+'"></button>\t<button class="tp-record__anchor-cancel"></button></div>',t=(document.body.insertAdjacentHTML("beforeend",e),document.querySelector(".tp-record__anchor-popup"));t&&(e=t.querySelector("textarea"),o=t.querySelector(".tp-record__anchor-submit"),t=t.querySelector(".tp-record__anchor-cancel"),e.setSelectionRange(0,r.length),e.focus(),o.addEventListener("click",function(){tp__record__anchorLinksPopup__submitPopup(o)}),t.addEventListener("click",function(){tp__record__anchorLinksPopup__closePopup()}),e.addEventListener("keydown",function(e){var t=e.keyCode||e.which;13==t?(e.preventDefault(),tp__record__anchorLinksPopup__submitPopup(o)):27==t&&tp__record__anchorLinksPopup__closePopup()}))}function tp__record__anchorLinksPopup__closePopup(){var e=document.querySelector(".tp-record__anchor-popup");e&&e.remove()}function tp__record__anchorLinksPopup__submitPopup(e){var t=e.getAttribute("data-recordid"),o=e.getAttribute("data-old-value"),e=e.closest(".tp-record__anchor-popup").querySelector("textarea").value.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&quot;");if(!e||o===e)return tp__record__anchorLinksPopup__closePopup();tp__fetch({url:"/page/submit/",body:{comm:"saverecord",pageid:window.pageid,recordid:t,anchor:e},explanation:"saving anchor link name"}).then(e=>{""===e||"OK"===e?(td__showBubbleNotice(tc__translate("{{anchor_link_saved}}","record__dict"),3e3),tp__updateRecord(t)):td__showBubbleNotice(tc__translate("{{something_went_wrong}}","record__dict"),3e3,"error")}).catch(e=>{console.error(e),td__showBubbleNotice(tc__translate("{{something_went_wrong}}","record__dict"),3e3,"error")}).finally(()=>{tp__record__anchorLinksPopup__closePopup()})}var tp__record__cache=new WeakMap;function tp__record__createMemoFunction(e,t){return tp__record__cache.has(e)?tp__record__cache.get(e):(t=t(e),tp__record__cache.set(e,t),t)}function tp__record__editField(){var e=this;"q"===window.ver_redactor?setTimeout(function(){tp__record__editField_quill(e)}):tp__record__editField_v2(e)}function tp__record__animateToolbars(e,t){e&&t&&(e.classList.remove("hidden"),t.classList.add("hidden"))}function tp__record__editField_quill(e){var t,o,r,n,i,d=tp__getRecordid(e),c=e.getAttribute("field"),a=(document.querySelectorAll(".editinplacefield").forEach(function(){tp__record__saveEditedField(d,c)}),e.removeEventListener("click",tp__record__editField),Quill.fixCustomStyle(e.innerHTML)),l=Quill.getCursorPosition(e),s=(window.tempdatafields[d]=[],window.tempdatafields[d][c]=a.html,""),s=(s=(s+='<div id="editrecord'+d+"field"+c+'" class="editinplacefield">')+a.html+"</div>",e&&(e.innerHTML=s),document.querySelector("#textarearecord"+d+"field"+c)),_=(s&&(i=`height: ${e.style.height}; color: ${e.style.color}; background-color: ${e.style.backgroundColor}; font-size: ${e.style.fontSize}; font-family: ${e.style.fontFamily}; line-height: ${e.style.lineHeight}; font-weight: ${e.style.fontWeight}; text-align: ${e.style.textAlign}; letter-spacing: ${e.style.letterSpacing};`,s.style.cssText=i),document.querySelector("#for_redactor_toolbar"));_&&(t="no"!==e.getAttribute("data-redactor-toolbar"),"object"==typeof e&&!t||(o=document.querySelector("#mainmenu"),tp__record__animateToolbars(_,o)),window.country||(window.country=document.body.getAttribute("data-country")),window.waschanged="",s=a.styles,i={toolbar_content:{selector:"#for_redactor_toolbar",hint:!0,callback:function(e){e.root.closest("[data-elem-id]")&&_.querySelectorAll(".ql-color_custom, .ql-weight_custom, .ql-font_custom, .ql-size_custom, .ql-lineheight_custom, .ql-align_custom").forEach(e=>{e.style.display="none"});e=_.querySelector(".ql-list");e&&(e.style.display="none"),t||(_.querySelectorAll("button").forEach(e=>e.style.display="none"),tp__record__animateToolbars(o,_)),"y"==window.$is_email&&_.querySelectorAll(".ql-weight_custom, .ql-font_custom, .ql-size_custom, .ql-lineheight_custom, .ql-align_custom").forEach(e=>{e.style.display="none"})}},popup:!0,tooltip:!0,dropdown:!0,textcolor:".ql-color_custom",weightDropdown:".ql-weight_custom",fontDropdown:".ql-font_custom",sizeDropdown:".ql-size_custom",lineheightDropdown:".ql-lineheight_custom",alignDropdown:".ql-align_custom",typograph:".ql-typograph_custom",cleanstyle:".ql-clean_custom",tilda_hotkeys:!0,toolbar:{container:"#for_redactor_toolbar",toolbarOptions:["bold","italic","underline",{list:"ordered"},{list:"bullet"},"link"]},more:".ql-more_custom",generate:".ql-gen_custom"},(a=document.querySelector("#editrecord"+d+"field"+c))&&!(r=a.closest("[data-redactor-nohref]"))&&(i.tilda_link=".ql-link_custom"),n=new Quill("#editrecord"+d+"field"+c,{formats:["bold","color","font","italic","link","size","strike","underline","list","weight","lineheight","align","subscript","superscript","background","generate"],debug:!1,modules:i}),Quill.setCustomStyles(n.root,s),tp__record__showTextStyle(n),n.on("editor-change",function(e){"text-change"===e&&(window.waschanged="yes",tp__record__showTextStyle(n))}),r&&(_.querySelector(".ql-link_custom").style.display="none"),(a=document.querySelector("#editrecord"+d+"field"+c+" .ql-editor"))&&a.focus({preventScroll:!0}),l.start?n.setSelection(l.start,l.offset):n.focus(),i=tp__record__createMemoFunction(e,tp__record__createOffEditHandler),document.removeEventListener("mousedown",i),document.addEventListener("mousedown",i),s=tp__record__createMemoFunction(window,tp__record__createResizeHandler),window.removeEventListener("resize",s),window.addEventListener("resize",s),s())}function tp__record__createOffEditHandler(c){return function(e){var t=document.querySelector(".quill-modal"),o=e.target.closest(".quill-tooltip"),r=tp__getRecordid(c),n=c.getAttribute("field"),i=document.querySelector("#for_redactor_toolbar"),d=document.querySelector("#mainmenu");e.target.closest(".ql-editor")||e.target.closest("#for_redactor_toolbar")||t||!c.querySelector(".ql-editor")||o||(t=Quill.getFormatContent(c.querySelector(".ql-editor")),c.innerHTML=t,c.addEventListener("click",tp__record__editField),o=tp__record__createMemoFunction(c,tp__record__createOffEditHandler),document.removeEventListener("mousedown",o),t=tp__record__createMemoFunction(window,tp__record__createResizeHandler),window.removeEventListener("resize",t),(i||d)&&((o=e.target.closest("[field]"))&&"no"!==o.getAttribute("data-redactor-toolbar")||tp__record__animateToolbars(d,i),window.waschanged)&&tp__record__saveEditedField(r,n))}}function tp__record__createResizeHandler(){const t=document.getElementById("for_redactor_toolbar"),o=tp__record__createMemoFunction(t,tp__record__createWheelHandler);return()=>{var e=window.matchMedia("(max-width: 640px)").matches;t.removeEventListener("wheel",o),t.removeEventListener("touchmove",tp__record__touchMoveHandler),document.removeEventListener("touchend",tp__record__touchEndHandler),tp__record__touchEndHandler(),e?(t.addEventListener("wheel",o),t.addEventListener("touchmove",tp__record__touchMoveHandler),document.addEventListener("touchend",tp__record__touchEndHandler)):t.style.removeProperty("--scroll-shift")}}function tp__record__touchEndHandler(){delete window.redactorTouchStartPos}function tp__record__touchMoveHandler(e){var t,e=e["changedTouches"];1===e.length&&(e=e[0]["clientX"],isNaN(window.redactorTouchStartPos)&&(window.redactorTouchStartPos=e),t=window.redactorTouchStartPos-e,t=new CustomEvent("wheel",{detail:{deltaX:t}}),this.dispatchEvent(t),window.redactorTouchStartPos=e)}function tp__record__createWheelHandler(){const r=document.getElementById("for_redactor_toolbar");let n=r.querySelectorAll(".toolbar__button"),i=r.querySelector(".rightfontinfo-wrapper");let d;return e=>{var t,o;document.querySelector(".tcolors-panel, .quill-popup, .quill-dropdown_shown, .tai_popup")||(document.body.contains(i)||(n=r.querySelectorAll(".toolbar__button"),i=r.querySelector(".rightfontinfo-wrapper")),d=-1*(parseInt(r.style.getPropertyValue("--scroll-shift"),10)||0),e=(e.detail||e).deltaX,t=[...n].map(e=>e.offsetWidth).reduce((e,t)=>e+t),t=Math.abs(r.offsetWidth-i.offsetWidth-t),d=(o=0,e=d+e,Math.max(o,Math.min(e,t))),r.style.setProperty("--scroll-shift",-d+"px"))}}function tp__record__editField_v2(e){var t,o,r=tp__getRecordid(e),n=e.getAttribute("field"),i=(document.querySelectorAll(".editinplacefield").forEach(function(){tp__record__saveEditedField(r,n)}),e.removeEventListener("click",tp__record__editField),window.tempdatafields[r]=[],window.tempdatafields[r][n]=e.innerHTML,""),i=(i=(i=(i=i+('<div id="editrecord'+r+"field"+n+'" class="editinplacefield">')+('<textarea name="'+n+'" class="edittextarearecordfield" id="textarearecord'+r+"field"+n+"\" style='width:100%; border:0; margin:0; padding:0;'>"))+tp__htmlEncode(e.innerHTML))+"</textarea>"+"</div>",e&&(e.innerHTML=i),document.querySelector("#textarearecord"+r+"field"+n)),d=(i&&(t=`height: ${e.style.height}; color: ${e.style.color}; background-color: ${e.style.backgroundColor}; font-size: ${e.style.fontSize}; font-family: ${e.style.fontFamily}; line-height: ${e.style.lineHeight}; font-weight: ${e.style.fontWeight}; text-align: ${e.style.textAlign}; letter-spacing: ${e.style.letterSpacing};`,i.style.cssText=t),document.querySelector("#for_redactor_toolbar"));d&&(d.innerHTML="","object"==typeof e&&"no"==e.getAttribute("data-redactor-toolbar")||(o=document.querySelector("#mainmenu"),tp__record__animateToolbars(d,o)),window.country||(window.country=$("body").data("country")),window.waschanged="",$("#textarearecord"+r+"field"+n).redactor({lang:"RU"==lang?"ru":"en",buttons:["bold","italic","deleted","link",""],focus:!0,linebreaks:!0,allowedTags:["p","a","i","b","br","div","del","u","ul","ol","li","sup","sub","em","table","tr","td","th","tbody","thead","strike","span","inline","strong"],replaceDivs:!1,cleanOnPaste:!0,toolbarExternal:"#for_redactor_toolbar",plugins:"RU"==window.lang||"RU"==window.country||"BY"==window.country||"UA"==window.country?["underline","fontcolorex","fontweight","setfontfamily","setfontsize","setlineheight","setalign","typograf","clearstyle"]:["underline","fontcolorex","fontweight","setfontfamily","setfontsize","setlineheight","setalign","clearstyle"],dragUpload:!1,initCallback:function(){1==this.$editor.has("div").is("div")&&(void 0!==(t=getAttrStringToArr(this.$editor.find("div").attr("style")))["font-size"]&&""!=t["font-size"]&&this.setfontsize.enter(t["font-size"]),void 0!==t["line-height"]&&""!=t["line-height"]&&this.setlineheight.enter(t["line-height"]),void 0!==t["text-align"]&&""!=t["text-align"]&&this.setalign.enter(t["text-align"]),void 0!==t["font-family"]&&""!=t["font-family"]&&this.setfontfamily.enter(t["font-family"]),void 0!==t.color&&""!=t.color&&this.fontcolorex.enter(t.color),this.$editor.find("div").contents().unwrap()),redactor_showTextSyle(this);var e,t=this.$editor.parent().parent().parent().parent().attr("data-elem-id"),t=(void 0!==t&&!1!==t&&((e=$("#for_redactor_toolbar")).find(".re-fontcolor").css("display","none"),e.find(".re-fontweight").css("display","none"),e.find(".re-setfontfamily").css("display","none"),e.find(".re-setfontsize").css("display","none"),e.find(".re-setlineheight").css("display","none"),e.find(".re-setalign").css("display","none"),e.find(".re-clearstyle").css("display","none")),this.$editor.parent().parent().parent().attr("data-redactor-nohref"));void 0!==t&&!1!==t&&(e=$("#for_redactor_toolbar")).find(".re-link").css("display","none"),"no"===this.$editor.parent().parent().parent().attr("data-redactor-toolbar")&&(e=$("#for_redactor_toolbar")).find(".redactor-toolbar").css("display","none"),"undefined"!=typeof $is_email&&"y"==$is_email&&((e=$("#for_redactor_toolbar")).find(".re-fontweight").css("display","none"),e.find(".re-setfontfamily").css("display","none"),e.find(".re-setfontsize").css("display","none"),e.find(".re-setlineheight").css("display","none"),e.find(".re-setalign").css("display","none"))},changeCallback:function(){window.waschanged="yes"},dropdownShownCallback:function(){redactor_showTextSyle(this)},blurCallback:function(){var e;tp__record__animateToolbars(o,d),window.waschanged?tp__record__saveEditedField(r,n):((e=$("#record"+r+" [field='"+n+"']")).html(window.tempdatafields[r][n]),e[0].addEventListener("click",tp__record__editField))},pasteBeforeCallback:function(e){return e=void 0!==e?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=$.htmlClean(e,{format:!0,allowedTags:["div","span","p","h1","h2","h3","a","i","b","br","del","u","ul","ol","li","sup","sub","em","strike","strong"],allowedClasses:[""],allowedAttributes:[["href"],["style"],["rel"],["data-verified"],["data-redactor-tag"],["data-redactor-style"]]})).replace(/<h1\s(.*?)>/gi,"<h1>")).replace(/<h1><br\s?\/?><\/h1>/gi,"<br /><br />")).replace(/<h1>([\w\W]*?)<\/h1>/gi,"$1<br /><br />")).replace(/<h2\s(.*?)>/gi,"<h2>")).replace(/<h2><br\s?\/?><\/h2>/gi,"<br /><br />")).replace(/<h2>([\w\W]*?)<\/h2>/gi,"$1<br /><br />")).replace(/<h3\s(.*?)>/gi,"<h3>")).replace(/<h3><br\s?\/?><\/h3>/gi,"<br /><br />")).replace(/<h3>([\w\W]*?)<\/h3>/gi,"$1<br /><br />")).replace(/<div\s(.*?)>/gi,"<div>")).replace(/<div><br\s?\/?><\/div>/gi,"<br />")).replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br />"):e}}))}function tp__record__saveEditedField(e,t){var o,r,n,i;null!=(o="q"===window.ver_redactor?(i=document.querySelector("#rec"+e+" [field="+t+"]"))?i.innerHTML:"":(i=document.querySelector("#textarearecord"+e+"field"+t))?i.value:"")&&(o=o.replace(/&nbsp;/g," "),(n="")!=(n=(r=document.querySelector("#editrecord"+e+"field"+t))&&(r.getAttribute("data-redactor-font-size")&&(n=n+"font-size:"+r.getAttribute("data-redactor-font-size")+";"),r.getAttribute("data-redactor-line-height")&&(n=n+"line-height:"+r.getAttribute("data-redactor-line-height")+";"),r.getAttribute("data-redactor-text-align")&&(n=n+"text-align:"+r.getAttribute("data-redactor-text-align")+";"),r.getAttribute("data-redactor-font-family")&&(n=n+"font-family:"+r.getAttribute("data-redactor-font-family")+";"),r.getAttribute("data-redactor-color"))?n+"color:"+r.getAttribute("data-redactor-color")+";":n)&&(o='<div style="'+n+'" data-customstyle="yes">'+o+"</div>"),r=(o=""===i.textContent.trim()?"":o).length,"li_"==t.substr(0,3)&&3e3<r&&td__showBubbleNotice(tc__translate("{{note_too_much_data}}","record__dict")),65e3<r&&"code"!==t?td__showBubbleNotice(tc__translate("{{error_too_much_data}}","record__dict")):((n={comm:"saverecord"}).pageid=window.pageid,n.recordid=e,n[t]=o,n.onlythisfield=t,tp__fetch({url:"/page/submit/",body:n,explanation:"saving text",timeout:60}).then(e=>{""==e||"OK"==e?tp__updateUndoButton():("too much data"==e&&(e=tc__translate("{{error_too_much_data}}","record__dict")),td__showBubbleNotice(e))}).catch(e=>{console.error(e)}),(i=document.querySelector("#record"+e+" [field='"+t+"']"))&&(""===o?i.remove():(i.innerHTML=o,i.addEventListener("click",tp__record__editField)))))}function tp__getRecordid(e){for(var t=0;!o&&t<16;){var o=e.getAttribute("recordid");e=e.parentNode,t++}return o||console.log("Error. Recordid not found"),o}function tp__htmlEncode(e){var t=document.createElement("textArea");return t.textContent=e,t.innerHTML}function addRedactor_to_textarea(e){"q"===window.ver_redactor?tp__addRedactor_to_textarea_quill(e):tp__addRedactor_to_textarea_v2($(e))}function tp__addRedactor_to_textarea_quill(t){var e,o,r=t.value,n=t.getAttribute("placeholder"),i=t.parentNode,d=t.closest(".pe-form-group"),c=t.getAttribute("name");d&&(d=d.getAttribute("data-lid"),t.style.display="none",e=(r=Quill.fixCustomStyle(r)).styles,t.insertAdjacentHTML("afterend",'<div class="pe-redactor__wrapper" quill-name="'+c+'" quill-lid="'+d+'">'+r.html+"</div>"),"undefined"==typeof lang&&(lang="en"),r={toolbar_content:{hint:!0,toolbarClass:"pe-redactor__toolbar",editorWrapper:i,showByClick:!0,callback:function(){var e;window.$is_email&&"y"==window.$is_email&&(e=document.querySelector(".pe-redactor__toolbar"))&&e.querySelectorAll(".ql-color_custom, .ql-weight_custom, .ql-font_custom, .ql-size_custom, .ql-lineheight_custom, .ql-align_custom").forEach(e=>{e.style.display="none"})}},popup:!0,tooltip:!0,clipboard:!0,dropdown:!0,textcolor:".ql-color_custom",weightDropdown:".ql-weight_custom",fontDropdown:".ql-font_custom",sizeDropdown:".ql-size_custom",lineheightDropdown:".ql-lineheight_custom",alignDropdown:".ql-align_custom",typograph:".ql-typograph_custom",cleanstyle:".ql-clean_custom",tilda_hotkeys:!0,toolbar:{container:'[quill-name="'+c+'"][quill-lid="'+d+'"] + .pe-redactor__toolbar',toolbarOptions:["bold","italic","underline",{list:"ordered"},{list:"bullet"},"link"]},more:".ql-more_custom"},""!==window.lireplaces&&void 0!==window.lireplaces[c]&&null!=window.lireplaces[c].redactor_nohref||(r.tilda_link=".ql-link_custom"),o=new Quill(i.querySelector(".pe-redactor__wrapper"),{placeholder:n||"",formats:["bold","color","font","italic","link","size","strike","underline","list","align","weight","lineheight","align","subscript","superscript","background"],debug:!1,modules:r}),Quill.setCustomStyles(o.root,e),o.on("editor-change",function(e){"text-change"===e&&(window.waschanged="yes",t.value=Quill.getFormatContent(o.root))}),o.on("text-change",function(){window.edrec_isChanged="y"}),"object"==typeof window.lireplaces[c])&&"yes"==window.lireplaces[c].redactor_nohref&&(d=i.querySelector(".pe-redactor__toolbar .ql-link_custom"))&&(d.style.display="none")}function tp__addRedactor_to_textarea_v2(e){"undefined"==typeof lang&&(lang="en"),e.redactor({lang:"RU"==lang?"ru":"en",linebreaks:!0,boldTag:"b",italicTag:"i",replaceDivs:!1,allowedTags:["p","a","i","b","br","div","del","u","ul","ol","li","hr","sup","sub","em","table","tr","td","th","tbody","thead","strike","span","inline","strong","h1","h2","h3","h4","h5","h6"],buttons:["bold","italic","deleted","link","unorderedlist","orderedlist",""],dragUpload:!1,plugins:"RU"==window.lang||"RU"==window.country||"BY"==window.country||"UA"==window.country?["underline","fontcolorex","fontweight","setfontfamily","setfontsize","setlineheight","setalign","typograf","clearstyle"]:["underline","fontcolorex","fontweight","setfontfamily","setfontsize","setlineheight","setalign","clearstyle"],initCallback:function(){this.$toolbar.css("display","none")},changeCallback:function(){window.waschanged="yes"},focusCallback:function(){var e;this.$toolbar.css("display","block"),1==this.$editor.has("div").is("div")&&(void 0!==(e=getAttrStringToArr(this.$editor.find("div").attr("style")))["font-size"]&&""!=e["font-size"]&&this.setfontsize.enter(e["font-size"]),void 0!==e["line-height"]&&""!=e["line-height"]&&this.setlineheight.enter(e["line-height"]),void 0!==e["text-align"]&&""!=e["text-align"]&&this.setalign.enter(e["text-align"]),void 0!==e["font-family"]&&""!=e["font-family"]&&this.setfontfamily.enter(e["font-family"]),void 0!==e.color&&""!=e.color&&this.fontcolorex.enter(e.color),this.$editor.find("div").contents().unwrap())},blurCallback:function(){var e,t,o;this.$toolbar.css("display","none"),window.waschanged&&(e=(e=this.$editor.html()).replace(/&nbsp;/g," "),t="",null!=(o=this.$box.parent()).attr("data-redactor-font-size")&&(t=t+"font-size:"+o.attr("data-redactor-font-size")+";"),null!=o.attr("data-redactor-line-height")&&(t=t+"line-height:"+o.attr("data-redactor-line-height")+";"),null!=o.attr("data-redactor-text-align")&&(t=t+"text-align:"+o.attr("data-redactor-text-align")+";"),null!=o.attr("data-redactor-font-family")&&(t=t+"font-family:"+o.attr("data-redactor-font-family")+";"),""!=(t=null!=o.attr("data-redactor-color")?t+"color:"+o.attr("data-redactor-color")+";":t)&&(this.$editor.html(e='<div style="'+t+'" data-customstyle="yes">'+e+"</div>"),this.code.sync()),setTimeout(function(){o.find("textarea").trigger("change")},100))},pasteBeforeCallback:function(e){return e=void 0!==e?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=$.htmlClean(e,{format:!0,allowedTags:["div","span","p","h1","h2","h3","a","i","b","br","del","u","ul","ol","li","sup","sub","em","strike","strong"],allowedClasses:[""],allowedAttributes:[["href"],["style"],["rel"],["data-verified"],["data-redactor-tag"],["data-redactor-style"]]})).replace(/<h1\s(.*?)>/gi,"<h1>")).replace(/<h1><br\s?\/?><\/h1>/gi,"<br /><br />")).replace(/<h1>([\w\W]*?)<\/h1>/gi,"$1<br /><br />")).replace(/<h2\s(.*?)>/gi,"<h2>")).replace(/<h2><br\s?\/?><\/h2>/gi,"<br /><br />")).replace(/<h2>([\w\W]*?)<\/h2>/gi,"$1<br /><br />")).replace(/<h3\s(.*?)>/gi,"<h3>")).replace(/<h3><br\s?\/?><\/h3>/gi,"<br /><br />")).replace(/<h3>([\w\W]*?)<\/h3>/gi,"$1<br /><br />")).replace(/<div\s(.*?)>/gi,"<div>")).replace(/<div><br\s?\/?><\/div>/gi,"<br />")).replace(/<div>([\w\W]*?)<\/div>/gi,"$1<br />"):e}})}function tp__record__showTextStyle(e){var e=e.root,t=document.getElementById("for_redactor_toolbar");if(t){var d=window.getComputedStyle(e);let o=parseInt(d.fontSize,10),r=d.fontFamily.split(",")[0].trim().replace(/["']+/g,""),n=[],i=[];(e=>{var t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let o=t.nextNode();for(var r=[];o;)r.push(o),o=t.nextNode();return r})(e).forEach(e=>{var e=e.parentNode,e=window.getComputedStyle(e),t=e.fontFamily||r,e=parseInt(e.fontSize,10)||o;n.push(t),i.push(e)}),n=[...new Set(n)],i=[...new Set(i)],1===n.length?r=n[0]:1<n.length&&(r="Mixed"),o+="px",1===i.length?o=i[0]+"px":1<i.length&&(o="Mixed");var c,d=1<i.length&&1<n.length?"Mixed":[o,r].join("  "),e=t.querySelector("#rightfontinfo");e?e.innerText=d:(e="RU"===window.lang?"http://help-ru.tilda.ws/text-editor":"https://help.tilda.cc/text-editor",c="RU"===window.lang?"https://youtu.be/8uiOpkY0vcQ":"https://youtu.be/_W8RMD-hKlQ",t.insertAdjacentHTML("beforeend",`
        <div class="rightfontinfo-wrapper">
            <div id="rightfontinfo">${d}</div>
            <a class="rightfontinfo-instruction rightfontinfo-instruction_help" target="_blank" href="${e}"></a>
            <a class="rightfontinfo-instruction rightfontinfo-instruction_video" target="_blank" href="${c}"></a>
        </div>
    `))}}function redactor_showTextSyle(e){var e=e.$editor,t=(1==$(e).has("div").is("div")&&(e=e.children()),window.jQuery&&e instanceof jQuery&&(e=e[0]),parseInt(getComputedStyle(e).fontSize)),o=parseInt(getComputedStyle(e).lineHeight),r=getComputedStyle(e).fontFamily.replace(", serif","").replace(", sans-serif","").replace("'","").replace("'",""),e=t+"px, "+r,n=document.querySelector("#for_redactor_toolbar .redactor-toolbar"),i=document.querySelector("#rightfontinfo"),i=(i&&i.remove(),n&&n.insertAdjacentHTML("afterend",'<div id="rightfontinfo" style="margin-left:auto;margin-right:15px;">'+e+"</div>"),document.querySelector(".redactor-dropdown-box-setfontsize")),n=i?i.children:[],e=(Array.prototype.forEach.call(n,function(e){e.textContent==t+"px"?(e.style.backgroundColor="#eeeeee",edrec__scrollTo(e.parentNode,edrec__position(e).top-85,400)):e.style.backgroundColor=null}),document.querySelector(".redactor-dropdown-box-setfontfamily")),i=e?e.children:[],n=(Array.prototype.forEach.call(i,function(e){e.textContent==r?e.style.backgroundColor="#eeeeee":e.style.backgroundColor=null}),document.querySelector(".redactor-dropdown-box-setlineheight")),e=n?n.children:[];Array.prototype.forEach.call(e,function(e){e.textContent.replace("px","")<=o&&e.nextElementSibling.textContent.replace("px","")>o?(e.style.backgroundColor="#eeeeee",edrec__scrollTo(e.parentNode,edrec__position(e).top-85,400)):e.style.backgroundColor=null})}function getAttrStringToArr(e){if(""==e||null==e||0==e)return"";for(var t=e.split(";").filter(Boolean),o={},r="",n=0,i=t.length;n<i;n++)o[(r=t[n].split(":"))[0].trim()]=r[1].trim();return o}function tp__record__bufCut(r){r&&tp__fetch({url:"/page/submit/",body:{comm:"cutrecord_tobuf",pageid:window.pageid,recordid:r},explanation:"block cutting to buffer"}).then(e=>{var t,o;""!=e&&"OK"!==e?console.log(e):(e=document.querySelector("#record"+r),t=document.querySelector(".record[data-cuted=yes]"),o=document.querySelectorAll(".record"),t&&(t.style.opacity=null),o.forEach(function(e){e.removeAttribute("data-cuted")}),e&&(e.style.opacity="0.5",e.setAttribute("data-cuted","yes")),showCornerNotice(tc__translate("{{copied_to_clipboard}}","record__dict"),3e3))}).catch(e=>{console.error(e)})}function tp__record__bufCopy(e){e&&tp__fetch({url:"/page/submit/",body:{comm:"copyrecord_tobuf",pageid:window.pageid,recordid:e},explanation:"block coping to buffer"}).then(e=>{var t;""!=e&&"OK"!==e?console.log(e):(e=document.querySelector(".record[data-cuted=yes]"),t=document.querySelectorAll(".record"),e&&(e.style.opacity=null),t.forEach(function(e){e.removeAttribute("data-cuted")}))}).catch(e=>{console.error(e)})}function tp__selectedrecords__bufCopy(){var t=Array();document.querySelectorAll(".record_selected").forEach(function(e){t.push(e.getAttribute("id").replace("record",""))}),0!==t.length&&tp__fetch({url:"/page/submit/",body:{comm:"copyselectedrecords_tobuf",pageid:window.pageid,selects:t},explanation:"coping blocks to buffer"}).then(e=>{""!=e&&"OK"!==e?console.log(e):(showCornerNotice(tc__translate("{{copied_to_clipboard_use_paste}}","record__dict"),4e3),window.somerecordsinbuffer="yes",tp__updateSelectModeButtons())}).catch(e=>{console.error(e)})}function tp__record__bufPaste(n){tp__fetch({url:"/page/submit/",body:{comm:"pasterecord_frombuf",pageid:window.pageid,recordid:n,with_code:"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:""}).then(t=>{if(""!==t){let e=tp__getResponseStringOrObject(t);var o,r;"object"==typeof e?tp__pasteBlocksAfterAnotherRec(e,n):"string"==typeof e&&("no data in buffer"==e?td__showBubbleNotice(tc__translate("{{nothing_to_paste}}","record__dict"),1e4,"error"):e.match(/^You added maximum \(\d*\) records in this page$/g)?td__showBubbleNotice(e,6e3,"error"):(t=/You added maximum \(\d*\) records in this page/g,(o=e.match(t))&&o[0]&&(e=e.replace(t,""),td__showBubbleNotice(o[0],1e4,"error")),(r=document.querySelector("#record"+n))&&((t=tp__setInnerHTML(e)).forEach(e=>e.classList.add("hidden")),r.after(...t),tp__animateBlockAppearance(t)),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList(),tp__fetch({url:"/page/submit/",body:{comm:"delrecord_incutbuf",pageid:window.pageid},explanation:"coping blocks to buffer"}).then(e=>{var t,o=r?r.nextElementSibling:null;o&&(t=o.getBoundingClientRect().top+window.pageYOffset-100,tp__scrollToEl(t,700)),e&&((e=document.querySelector("#record"+e))&&e.remove(),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList(),o)&&(t=o.getBoundingClientRect().top+window.pageYOffset-100,tp__scrollToEl(t,700))}).catch(e=>{console.error(e)})))}}).catch(e=>{console.error(e)})}function tp__selectModeOn(e){tp__hideSortButtons(),tp__showSelectButtons(),tp__updateSelectModeButtons(),tp__hideEditRecordsButtons(),document.querySelectorAll("[field], [imgfield]").forEach(function(e){e.style.pointerEvents="none"}),document.querySelectorAll(".record").forEach(function(e){e.removeEventListener("click",selectRecordClickHandler),e.addEventListener("click",selectRecordClickHandler)}),void 0!==e&&((e=document.querySelector("#record"+e))&&(e.classList.toggle("record_selected"),e.classList.toggle("active")),tp__updateSelectModeButtons()),showCornerNotice(tc__translate("{{block_operation_mode}}","record__dict"),5e3)}var selectRecordClickHandler=function(){this.classList.toggle("record_selected"),this.classList.toggle("active"),tp__updateSelectModeButtons()};function tp__deleteRecordsSelected(){var n=Array();document.querySelectorAll(".record_selected, #allrecords").forEach(function(e){n.push(e.getAttribute("id").replace("record",""))}),tp__fetch({url:"/page/submit/",body:{comm:"deleterecordsselected",pageid:window.pageid,selects:n},explanation:""}).then(e=>{if(""!=e&&"OK"!==e)console.log(e);else{for(var t=0;t<n.length;t++){var o=n[t],r=document.querySelector("#record"+o);r&&tp__slideUp(r).then(()=>r.remove())}document.querySelectorAll(".record").forEach(function(e){e.classList.remove("record_selected")}),tp__updateSelectModeButtons(),tp__updateUndoButton(),void 0!==window.blockList&&window.blockList.rebuildList()}}).catch(e=>{console.error(e)})}function tp__cancelSelect(){tp__hideSelectButtons(),location.reload()}function tp__showSelectButtons(){var e=tc__translate('<div id="saveselectbuttons"><button class="btn default btn-lg" onclick="cancelSelect();" style="margin-right: 18px">{{exit_from_select_mode}}</button> <button class="btn btn-primary btn-lg" id="selectmodebtn-move" onclick="selected_records_movemodeon();" style="margin-right: 9px">{{move}}</button><button class="btn btn-primary btn-lg" id="selectmodebtn-del" onclick="deleteRecordsSelected();" style="margin-right: 9px">{{delete}}</button><button class="btn btn-primary btn-lg" id="selectmodebtn-copy" onclick="selected_records_buf_copy();" style="margin-right: 9px">{{copy}}</button><button class="btn btn-primary btn-lg" id="selectmodebtn-paste" onclick="selected_records_pastemodeon();">{{paste}}</button></div>',"record__dict");document.body.insertAdjacentHTML("beforeend",e);document.getElementById("saveselectbuttons").style.display="block",document.querySelectorAll(".record").forEach(e=>e.style.cursor="pointer");var e=tc__translate('<div id="select_records_toolbar" class="hidden"><div class="select_records_toolbar__left">{{block_selection_mode}}</div><div class="select_records_toolbar__right"><a href="javascript:cancelSelect();">{{back_to_editing}}</a></div></div>',"record__dict"),e=(document.body.insertAdjacentHTML("beforeend",e),document.querySelector("#mainmenu")),t=document.querySelector("#select_records_toolbar");e&&e.classList.add("hidden"),t&&window.setTimeout(()=>t.classList.remove("hidden"),0)}function tp__hideSelectButtons(){document.querySelectorAll(".record").forEach(e=>e.style.cursor="auto");var e=document.getElementById("saveselectbuttons");e&&(e.style.display="none")}function tp__hideEditRecordsButtons(){var e=document.querySelectorAll(".recordediticons, .recordbordertop, .recordborderbottom, .insertafterrecorbutton, #shortcuttooldiv, #dragsingleimagescont, .tp-record-edit-icons-right__comment_unhover");e.length&&e.forEach(function(e){e.style.display="none"})}function tp__updateSelectModeButtons(){var t=Array(),e=(document.querySelectorAll(".record_selected").forEach(function(e){t.push(e.getAttribute("id").replace("record",""))}),document.querySelector("#selectmodebtn-paste")),o=document.querySelectorAll("#selectmodebtn-move, #selectmodebtn-del, #selectmodebtn-copy");0<t.length?o.forEach(function(e){e.style.display="inline-block"}):o.forEach(function(e){e.style.display="none"}),void 0!==window.somerecordsinbuffer?e&&(e.style.display="inline-block"):e&&(e.style.display="none")}var moveRecordClickHandler=function(){tp__moveSelectedRecords(this.getAttribute("id").replace("record",""))};function tp__selectedrecords__movemodeon(){window.selectsarr=Array(),document.querySelectorAll(".record_selected").forEach(function(e){window.selectsarr.push(e.getAttribute("id").replace("record",""))});for(var e=0;e<window.selectsarr.length;e++){var t=window.selectsarr[e],t=document.querySelector("#record"+t);t&&(t.style.opacity="0.15")}var o=document.querySelectorAll(".record");o.forEach(function(e){e.removeEventListener("click",selectRecordClickHandler),e.removeEventListener("click",moveRecordClickHandler),e.classList.remove("record_selected")}),tp__updateSelectModeButtons(),o.forEach(function(e){var t=e.getAttribute("id").replace("record",""),o='<div class="recordborderbottom"></div>';e.insertAdjacentHTML("beforeend",'<div class="moveplacer">'+(o+='<div class="insertafterrecorbutton"><center><a href="javascript:tp__moveSelectedRecords("'+t+'");"><span class="glyphicon glyphicon-plus-sign" style="color:#000; width:20px; height:20px;"></span></a></center></div>')+"</div>")}),o.forEach(function(t){t.addEventListener("mouseover",function(){document.querySelectorAll(".moveplacer").forEach(function(e){e.style.display="none"});var e=t.querySelector(".moveplacer");e&&(e.style.display="block")}),t.addEventListener("click",moveRecordClickHandler)}),showCornerNotice(tc__translate("{{click_the_block_v1}}","record__dict"),8e3)}function tp__moveSelectedRecords(e){0!==window.selectsarr.length&&tp__fetch({url:"/page/submit/",body:{comm:"moveselectedrecords",pageid:window.pageid,recordid:e,selects:window.selectsarr},explanation:""}).then(()=>{window.location.href=`${window.location.origin}/page/?pageid=${window.pageid}#scrolltorecord=${window.selectsarr[0]}}`,window.location.reload(!0)}).catch(e=>{console.error(e)})}var autosavesort_timer,pasteRecordClickHandler=function(){tp__pasteSelectedRecords(this.getAttribute("id").replace("record",""))};function tp__selectedrecords__pastemodeon(){document.querySelectorAll(".record").forEach(function(e){e.classList.remove("record_selected","active"),e.removeEventListener("click",pasteRecordClickHandler)}),delete window.somerecordsinbuffer,tp__updateSelectModeButtons(),document.querySelectorAll(".record, #allrecords").forEach(function(t){var e=t.getAttribute("id").replace("record",""),o='<div class="recordborderbottom"></div>';t.insertAdjacentHTML("beforeend",'<div class="moveplacer">'+(o+='<div class="insertafterrecorbutton"><center><a href="javascript:tp__pasteSelectedRecords(\''+e+'\');"><span class="glyphicon glyphicon-plus-sign" style="color:#000; width:20px; height:20px;"></span></a></center></div>')+"</div>"),t.addEventListener("mouseover",function(){document.querySelectorAll(".moveplacer").forEach(function(e){e.style.display="none"});var e=t.querySelector(".moveplacer");e&&(e.style.display="block")}),t.addEventListener("click",pasteRecordClickHandler)}),showCornerNotice(tc__translate("{{click_the_block_v2}}","record__dict"),8e3)}function tp__pasteSelectedRecords(o){"y"!=window.prevent_dubble_PasteCall&&(window.prevent_dubble_PasteCall="y",tp__fetch({url:"/page/submit/",body:{comm:"pasterecord_frombuf",pageid:window.pageid,recordid:o,with_code:"yes",shouldRenderBlockUIInJS:window.shouldRenderBlockUIInJS?"y":null},explanation:""}).then(e=>{var t;""===e?window.location.reload(!0):"object"==typeof(e=tp__getResponseStringOrObject(e))?tp__insertBlocksAfterAnotherRec(e,o):"string"==typeof e&&("no data in buffer"==e?alert("Nothing to Paste"):(t=document.querySelector("#record"+o),e=tp__setInnerHTML(e),t&&t.after(...e),t=(e=t.nextElementSibling).getAttribute("id").replace("record",""),e=e.getBoundingClientRect().top+window.pageYOffset-100,tp__scrollToEl(e,700),window.location.href=`${window.location.origin}/page/?pageid=${window.pageid}#scrolltorecord=${t}}`,window.location.reload(!0)))}).catch(e=>{console.error(e)}))}function tp__savesortmodeifactive(){var e=document.querySelector("#savesortbuttons");e&&("block"==e.style.display||0<autosavesort_timer)&&tp__saveRecordsSort()}function tp__sortModeOn(){tp__hideSelectButtons(),tp__connectTSortableLite(function(){var e=document.querySelector("#allrecords");new TSortableLite(e,{handleSelector:"#sorthandle",onStart:function(){clearTimeout(autosavesort_timer)},onChange:function(){clearTimeout(autosavesort_timer)},onDrop:function(){tp__showSortButtons(),void 0!==window.blockList&&window.blockList.rebuildList(),autosavesort_timer=setTimeout(function(){tp__saveRecordsSort()},7e3)},isAutoUpdateEnabled:!0,axis:"y"}).init()})}function tp__cancelSort(){tp__hideSortButtons(),location.reload()}function tp__saveRecordsSort(){clearTimeout(autosavesort_timer),0<autosavesort_timer&&(autosavesort_timer=void 0);var t=Array();document.querySelectorAll("#allrecords .record").forEach(function(e){t.push(e.getAttribute("id").replace("record",""))}),tp__fetch({url:"/page/submit/",body:{comm:"saverecordssort",pageid:window.pageid,sorts:t},explanation:"save blocks order"}).then(e=>{""!=e&&"OK"!=e||(tp__hideSortButtons(),tp__updateUndoButton())}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}function tp__showSortButtons(){var e=document.querySelector("#savesortbuttons"),t=document.querySelector(".sortupicon"),o=document.querySelector(".sortdownicon"),r=document.querySelector(".sortonicon");e&&(e.style.display="block"),t&&(t.style.display="block"),o&&(o.style.display="block"),r&&(r.style.display="none")}function tp__hideSortButtons(){var e=document.querySelector("#savesortbuttons"),t=document.querySelector(".sortupicon"),o=document.querySelector(".sortdownicon"),r=document.querySelector(".sortonicon");e&&(e.style.display="none"),t&&(t.style.display="none"),o&&(o.style.display="none"),r&&(r.style.display="block")}function tp__convertRecordtoZero(e){var t=document.querySelector(".pe-zero-convert-btn"),t=(t&&(t.style.display="none"),document.querySelector(".pe-zero-convert-notice")),o=(t&&(t.style.display="block"),"display: -webkit-flex; display: flex; -webkit-align-items: center; align-items: center; box-sizing: border-box; width: 240px; padding: 15px 20px; cursor: pointer; "),r="",r=(r=(r+='<div style="font-size:14px; color:#777; padding-top:25px;">')+"{{convert_warning}}"+('<a href="javascript:tp__convertRecordtoZero_do('+e+');" style="'+o+' margin-top:10px; background-color:#000; color:#fff;">{{convert}}</a>'))+('<a href="javascript:tp__convertRecordtoZero_cancel();" style="'+o+'margin-top:5px; border:1px solid rgba(0,0,0,0.1);">{{cancel}}</a>')+"</div>";r=tc__translate(r,"record__dict"),t.innerHTML=r}function tp__convertRecordtoZero_cancel(){var e=document.querySelector(".pe-zero-convert-btn"),e=(e&&(e.style.display="block"),document.querySelector(".pe-zero-convert-notice"));e&&(e.style.display="none")}function tp__convertRecordtoZero_do(t){tp__fetch({url:"/page/submit/",body:{comm:"converttozero",pageid:window.pageid,recordid:t},explanation:"convert block to ZeroBlock"}).then(e=>{""==e||"OK"==e?(edrec__closeEditForm(),tp__scrollToRecord(t),tp__updateRecord(t,"396")):alert(e),tp__updateUndoButton()}).catch(e=>{console.error(e),setTimeout(function(){location.reload()},3e3)})}function tp__openZero(e,t){var o=window.pageid,r=(console.log("func: tn_openeditor"),document.body),n=(r.classList.add("t396__body_overflow_hidden"),r.setAttribute("data-zero-opened-recordid",e),document.querySelector("#intercom-container")),n=(n&&n.classList.add("t396__display_none"),Math.random().toString(36).substring(7));r.insertAdjacentHTML("beforeend",'<iframe class="t396__iframe" src="/zero/?recordid='+e+"&pageid="+o+"&iframe=y&nocash="+n+'" width="100vw" height="100vh"></iframe>'),document.querySelector(".t396__iframe").focus(),window.history.replaceState&&("replacestate"==t?window.history.replaceState({module:"zero",recordid:e},"","/zero/?recordid="+e+"&pageid="+o):window.history.pushState({module:"zero",recordid:e},"","/zero/?recordid="+e+"&pageid="+o))}function tn_close(e,t){tp__closeZero(e,t)}function tp__closeZero(e,t){void 0===e&&void 0!==(e=document.body.getAttribute("data-zero-opened-recordid"))&&""!=e&&(e=+e),console.log("func: tn_close. rec:"+e);var o=document.querySelector(".t396__iframe"),o=(o&&o.remove(),document.body),o=(o.classList.remove("t396__body_overflow_hidden"),o.removeAttribute("data-zero-opened-recordid"),document.querySelector("#intercom-container"));o&&o.classList.remove("t396__display_none"),0<e&&(tp__updateRecord(e),tp__scrollToRecord(e)),window.history.replaceState&&0<t&&window.history.pushState(null,"","/page/?pageid="+t)}function tui_editimage(e,s,_){var t=document.querySelector('img[id="'+s+'"]').getAttribute("src"),o=document.querySelector("#loadicon");"function"!=typeof hideLoadIcon&&(window.hideLoadIcon=function(){o.style.display="none"}),"function"!=typeof showLoadIcon&&(window.showLoadIcon=function(){o.style.display="block"}),window.upload_saveAs=function(e){"function"!=typeof showLoadIcon&&document.body.insertAdjacentHTML("beforeend",'<div id="loadicon" style="display: none; position: fixed; z-index: 1200; padding: 0; left: 10px; top: 60px;"><img src="/tpl/img/ajax-loader.gif"></div>'),showLoadIcon(),(tu=TUWidget.init(document.querySelector(".tui-image-editor-canvas-container"))).done(function(e){var t,o,r,n,i,d,c,a,l;e.tuInfo&&e.tuInfo.cdnUrl&&(t=e.tuInfo.cdnUrl,null!=(o=document.getElementById(s))&&(o.src=t),"function"==typeof _?_(s,e.tuInfo):o&&((o=o.closest(".js-image-box"))?(a=o.querySelector(".js-img-cdnurl"),l=o.querySelector(".js-img-uuid"),r=o.querySelector(".js-img-name"),n=o.querySelector(".js-img-size"),i=o.querySelector(".js-img-width"),d=o.querySelector(".js-img-height"),c=o.querySelector(".js-img-title"),a&&(a.value=t),l&&(l.value=""),r&&(r.value=""),n&&(n.value=""),i&&(i.value=""),d&&(d.value=""),a=t.substring(t.length-30),c&&(c.setAttribute("href",t),c.innerHTML="..."+a),0<e.tuInfo.width&&o.querySelector("js-img-width")&&(o.querySelector("js-img-width").value=e.tuInfo.width)):console.log(t)),"function"==typeof window.tuiEditor.destroy&&window.tuiEditor.destroy(),(l=document.querySelector("#tuiEditorTildaWidget"))&&l.remove(),window.tuiEditor=!1,hideLoadIcon())}).fail(function(){"function"==typeof window.tuiEditor.destroy&&window.tuiEditor.destroy();var e=document.querySelector("#tuiEditorTildaWidget");e&&e.remove(),window.tuiEditor=!1,hideLoadIcon()}),tu.uploadFileFromURL(e)},window.tuiEditor&&(document.querySelector(".tui__editor-container").style.display="block"),tui_onReady(t)}function tui_initImageEditor(e){0<e.indexOf("ucarecdn")||0<e.indexOf("tildacdn.info")?(t=e.lastIndexOf("/"))!=e.length-1&&(e=e.substring(0,t+1)):"/"==e.substring(0,1)&&(e=""+window.location.origin+e);var t={includeUI:{menu:["newSize","crop","flip","rotate","text","draw","filter"],loadImage:{path:e,name:"SampleImage"},menuBarPosition:"top",usageStatistics:!1},cssMaxWidth:800,cssMaxHeight:600,usageStatistics:!1};"RU"===window.lang&&(t.includeUI.locale={Undo:"",Redo:"",Reset:"",Delete:"","Delete-all":" ",Rotate:"",Save:"",Width:"",Height:"","Lock proportion":" ",Custom:"",Crop:"",Apply:"",Cancel:"",Flip:"","Flip X":" ","Flip Y":" ",Angle:"",Text:" ",Bold:"",Italic:"",Underline:"",Left:"",Center:" ",Right:"",Color:"","Text size":"",Draw:" ",Free:"",Straight:"",Size:"",Filter:" ",Grayscale:" ",Sepia:"",Blur:"",Emboss:"",Invert:"",Sepia2:" 2",Sharpen:"","Remove White":"  ",Distance:"",Value:"",Brightness:"",Noise:"",Pixelate:"","Color Filter":" ",Threshold:""}),window.tuiEditor=new tui.ImageEditor("#tui-image-editor-container",t),window.onresize=function(){window.tuiEditor?window.tuiEditor.ui.resizeEditor():setTimeout(function(){window.onresize()},300)}}function tui_onReady(e){var t;window.tuiEditor?(t=e.split("/"),window.tuiEditor.loadImageFromURL(e,t?t[t.length-1]:"photo")):window.tuiEditorLoad?(tui_addTuiContainer(),tui_initImageEditor(e)):document.querySelector("#tuiEditorTildaScriptVersion")||(tp__loadResource("/front/css/tui.min.css"),"RU"===window.lang&&((t=document.createElement("style")).id="tuiEditorStyleRussian",t.textContent=".tui-image-editor-container .color-picker-control .tui-image-editor-range {width: 75px;}.tui-image-editor-container .tui-image-editor-submenu-align:first-child label {width: 95px;}.tui-image-editor-container .tui-image-editor-submenu-align label {width: 75px;}.tui-image-editor-container .tui-image-editor-checkbox-wrap.fixed-width {width: 230px;}",document.documentElement.appendChild(t)),tp__loadResource("/front/js/tui-im-edit.min.js").then(function(){window.tuiEditorLoad=!0,tui_onReady(e)}))}function tui_addTuiContainer(){var e=document.querySelector("#tuiEditorTildaWidget"),t=(e&&(e.remove(),window.tuiEditor=!1),document.createElement("div"));t.id="tuiEditorTildaWidget",t.className="tui__editor-container",t.innerHTML='<div class="tui__editor-fullscreen_bg"></div><div class="tui__editor-wrap"><div class="tui__editor-header"><span>Photo Editor</span><span class="tui__editor-header-close"></span></div><div id="tui-image-editor-container"></div></div>',document.documentElement.appendChild(t),document.querySelector(".tui__editor-header-close").onclick=function(){t.style.display="none",window.tuiEditor=!1,e&&e.remove()}}function openImageSearchPopup(t,e,o,r){o=o||"";var n=["https://front.tildacdn.com/ccimagesearch/js/t__imagesearch.min.js","https://front.tildacdn.com/ccimagesearch/css/t_imagesearch.min.css"].map(tp__loadResource);Promise.all(n).then(function(){window.tis__imgid&&window.tis__userid&&window.tis__userhash?tis__showImageSearch(t,window.tis__userid,window.tis__userhash,void 0,r):tp__fetch({url:"/projects/get/getimagesearch/",body:{imgid:e,recid:o,v:2},explanation:""}).then(e=>{try{e=JSON.parse(e)}catch(e){console.log(e)}e.userid?(window.tis__userid=e.userid,window.tis__userhash=e.userhash,tis__showImageSearch(t,e.userid,e.userhash,void 0,r)):alert("Not found user")}).catch(()=>{location.reload()})})}function tp__record__getDictObj(e){var t={};"RU"===e&&(t={settings:"",content:"",block_editor:" ",products:"",posts:"",note_diff_edit_and_publish:":                  .",duplicate:"",delete:"",hide_show:"/",cut:"",copy:"",paste:"",select:"",generate_with_ai:"",move_up:" ",move_down:" ",from:" ",to:"",set_width_viewport_limit:"       .       .",recover_from_trash:"  ",save_content_on_switch:"   ",block_may_look_unbalanced:",      -   <br>,       .",maps_google_critycal_text:'<b>:</b> Google Maps API key  .      . <a href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=ru" target="_blank">   Google Maps</a><br>     <a href="http://help-ru.tilda.ws/google-maps" style="color:#fa8669 !important;" target="_blank"> </a>',maps_yandex_critycal_text:'<b>:</b> Yandex Maps API key  .      . <a href="http://help-ru.tilda.ws/yandex-maps" target="_blank">   Yandex Maps</a>',forms_success_connected:"  .  :<br>,     : ",forms_data_will_be_sent:"  :",forms_has_not_script:"<b>:</b>    .         ,     . ,  ,       . ,      ,     ${abeg} ${aend}.",forms_has_not_data_receiver:"<b>:</b>    . ,           .",forms_page_need_publish:"  ,    ",blocks_critycal_text:"      .    . ,         .        .",background_color_settings:" ",anchor_link_saved:"  ",something_went_wrong:"-   .",enter_value:" ",hidden_block:" .   / ,    .",block_adding:" ..",blocks_adding:" ..",show_block:" ",add_comment:" ",has_unsave_comments:"  ",comments_upload_error:`    . ,      <a href="${location.origin}/tickets/#!/"> </a>`,comments:"",write_comment:" ...",save:"",edit:"",edited:"",just_now:" ",today:"",yesterday:"",ago:"",are_you_sure_to_delete:"?",yes:"",no:"",resolve:"",need_to_refresh_comments_version:"        . ,      ",refresh:"",refreshing:"...",more:"",close_comments:" ",commenting:"",cover_settings:"  ",cover_settings_tab_image:"",cover_settings_tab_color:"",cover_settings_tab_video:"",error_text:` . ,      <a href="${location.origin}/tickets/#!/"> </a>`,fill_type:" ",solid_color:" ",gradient:"",video_type:" ",link:"",link_or_id:"  ID",convert_warning:"             .",convert:"",cancel:"",note_too_much_data:":     .    .",error_too_much_data:":   .    . ,   .",copied_to_clipboard:"   ",copied_to_clipboard_use_paste:"   . <b>  </b>",nothing_to_paste:"  ",block_operation_mode:"    : <b>  ,   .</b>",block_selection_mode:"    : <b>  ,   .</b>",back_to_editing:"  ",exit_from_select_mode:"  ",move:"",click_the_block_v1:"   ,       .",click_the_block_v2:"   ,        ."}),"EN"===e&&(t={settings:"Settings",content:"Content",block_editor:"Block Editor",products:"Products",posts:"Posts",note_diff_edit_and_publish:"The appearance of this block in the editing mode might be different from its appearance on preview and on a published page.",duplicate:"Duplicate",delete:"Delete",hide_show:"Hide/Show",cut:"Cut",copy:"Copy",paste:"Paste",select:"Select",generate_with_ai:"Generate",move_up:"Move up",move_down:"Move down",from:" ",to:"-",set_width_viewport_limit:"There's a display restriction applied to this block. This block will appear only on screens with the specified width.",recover_from_trash:"Recover from Trash",save_content_on_switch:"Keep content on switch",block_may_look_unbalanced:"The chosen block may look unbalanced due to the different structure,<br> and you may need to adjust the settings or modify the content.",maps_google_critycal_text:'<b>Attention:</b> Google Maps API key not found. Please enter the key in the [Content] tab. <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">Get Google Maps API key</a><br>Read the guide in our <a href="https://help.tilda.cc/google-maps" style="color:#fa8669 !important;" target="_blank">Help Center</a>',maps_yandex_critycal_text:"<b>Attention:</b> Yandex Maps API key not found. Please set the key in the [Content] tab.",forms_success_connected:"Form has been assigned. Current settings:<br>Data will be received from domains: ",forms_data_will_be_sent:"Data will be sent to:",forms_has_not_script:"<b>Attention:</b> Form assignment is not completed. Youve set Own script for receiving data, but you didnt paste the script address. Please enter the script address to which data from the form should be sent. You can also use our data capture services, assign them under Forms in the Site Settings.",forms_has_not_data_receiver:"<b>Attention:</b> Form assignment is not completed. Please open the Content tab of this block and check the box across the Data Receiver.",forms_page_need_publish:"Publish the page, please",blocks_critycal_text:"This block is outdated and is not supported anymore. It may work incorrectly. Please add the new version of the block from the Library or set up a similar one. Move the content to the new block and re-publish the page.",background_color_settings:"Block background",anchor_link_saved:"Link saved successfully",something_went_wrong:"Something went wrong.",enter_value:"Enter value",hidden_block:"This block is hidden. Click 'Hide/Show' button on the right side to activate it.",block_adding:"Adding blocks..",blocks_adding:"Adding blocks..",show_block:"Show block",add_comment:"Add comments",has_unsave_comments:"Has unread comments",comments_upload_error:`An error occurred while loading comments. Please refresh the page or contact the <a href="${location.origin}/tickets/#!/">Support Team</a>`,comments:"Comments",write_comment:"Write a comment...",save:"Save",edit:"Edit",edited:"Edited",just_now:"Just now",today:"today",yesterday:"yesterday",ago:"ago",are_you_sure_to_delete:"Delete?",yes:"Yes",no:"No",resolve:"Resolve",need_to_refresh_comments_version:"Other users edited comments recently. Please refresh comments and repeat your request",refresh:"Refresh",refreshing:"Refreshing...",more:"More",close_comments:"Close comments",commenting:"Commenting",cover_settings:"Block background settings",cover_settings_tab_image:"Image",cover_settings_tab_color:"Color",cover_settings_tab_video:"Video",error_text:`An error occurred. Please refresh the page or contact the <a href="${location.origin}/tickets/#!/">Support Team</a>`,fill_type:"Fill type",solid_color:"Solid color",gradient:"Gradient",video_type:"Video type",link:"Link",link_or_id:"Link or ID",convert_warning:"As a result of converting to Zero Block, the block will return to its starting appearance  with default text and photos. If you have changed text and photos, they will not be saved.",convert:"Convert without saving content",cancel:"Cancel",note_too_much_data:"Note: Too much data in this input field. We strongly recommend reducing the amount of information.",error_too_much_data:"Error: Too much data. Changes will not be saved. Please delete some of the information.",copied_to_clipboard:"The block are copied to the clipboard",copied_to_clipboard_use_paste:"Blocks copied to the clipboard",nothing_to_paste:"Nothing to paste",block_operation_mode:"Block operation mode: <b>click on the block to select.</b>",block_selection_mode:"Block selection mode: <b>click block to select.</b>",back_to_editing:"Back to editing</a>",exit_from_select_mode:"Exit from select mode",move:"Move",click_the_block_v1:"Click the block after which you want to put the selected blocks.",click_the_block_v2:"Click the block after which you want to insert blocks from the clipboard."}),"DE"===e&&(t={settings:"Einstellungen",content:"Inhalt",block_editor:"Block-Editor",products:"Produkte",posts:"Beitrge",note_diff_edit_and_publish:"Das Erscheinungsbild dieses Blocks im Bearbeitungsmodus kann sich von seinem Erscheinungsbild in der Vorschau und auf der verffentlichten Seite unterscheiden",duplicate:"Duplizieren",delete:"Lschen",hide_show:"Ausblenden/Einblenden",cut:"Ausschneiden",copy:"Kopieren",paste:"Einfgen",select:"Auswhlen",generate_with_ai:"Erzeugen",move_up:"Nach oben bewegen",move_down:"Nach unten bewegen",from:" ",to:"-",set_width_viewport_limit:"Fr diesen Block gilt eine Anzeigebeschrnkung. Dieser Block wird nur auf Bildschirmen mit der angegebenen Breite angezeigt.",recover_from_trash:"Aus dem Papierkorb wiederherstellen",save_content_on_switch:"Inhalt beim Umschalten beibehalten",block_may_look_unbalanced:"Der gewhlte Block knnte aufgrund der unterschiedlichen Struktur<br> unausgewogen aussehen, und Sie mssen eventuell die Einstellungen<br> anpassen oder den Inhalt ndern.",maps_google_critycal_text:'<b>Achtung:</b> Google-Maps-API-Schlssel nicht gefunden. Bitte geben Sie den Schlssel auf der Registerkarte [Inhalt] ein. <a href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=ru" target="_blank">Google-Maps-API-Schlssel anfordern</a><br>Lesen Sie die Anleitung in unserem <a href="http://help.tilda.ws/google-maps" style="color:#fa8669 !important;" target="_blank">Hilfe-Center</a>',maps_yandex_critycal_text:"<b>Achtung:</b> Yandex-Maps-API-Schlssel nicht gefunden. Bitte geben Sie den Schlssel in der Registerkarte [Inhalt] ein.",forms_success_connected:"Das Formular wurde zugewiesen. Aktuelle Einstellungen:<br>Daten werden von diesen Domains empfangen:  ",forms_data_will_be_sent:"Die Daten werden gesendet an:",forms_has_not_script:"<b>Achtung:</b> Die Formularzuweisung ist nicht abgeschlossen. Sie haben Eigenes Skript fr den Datenempfang  eingestellt, aber Sie haben keine Skriptadresse angegeben. Bitte geben Sie eine Skriptadresse an, an die die Daten aus dem Formular gesendet werden sollen. Oder, um unseren Datenerfassungsdienst zu nutzen, weisen Sie in den Website-Einstellungen den Datenempfnger zu.",forms_has_not_data_receiver:"<b>Achtung:</b> Die Zuweisung des Formulars ist nicht abgeschlossen. Bitte klicken Sie auf die Schaltflche Inhalt dieses Blocks und aktivieren Sie das Kstchen fr den Datenempfnger.",forms_page_need_publish:"Seite bitte verffentlichen",blocks_critycal_text:"Dieser Block ist veraltet und wird nicht mehr untersttzt. Er funktioniert mglicherweise nicht richtig. Bitte fgen Sie die neue Version des Blocks aus der Bibliothek hinzu oder passen Sie den entsprechenden Block an. Verschieben Sie den Inhalt in den neuen Block und verffentlichen Sie die Seite erneut.",background_color_settings:"Block-Hintergrund",anchor_link_saved:"",something_went_wrong:"Etwas ist schief gelaufen.",enter_value:"Wert eingeben",hidden_block:"Dieser Block ist ausgeblendet. Drcken Sie auf die Schaltflche Ausblenden/Einblenden auf der rechten Seite, um ihn zu aktivieren.",block_adding:"Blcke werden hinzugefgt ...",blocks_adding:"Blcke werden hinzugefgt ...",show_block:"Einblenden",add_comment:"Kommentar hinzufgen",has_unsave_comments:"Es gibt ungelesene Kommentare",comments_upload_error:`Beim Hochladen von Kommentaren ist ein Fehler aufgetreten. Bitte aktualisieren Sie die Seite oder wenden Sie sich an den <a href="${location.origin}/tickets/#!/">Support-Service</a>`,comments:"Kommentare",write_comment:"Kommentar schreiben...",save:"Speichern",edit:"Bearbeitet",edited:"Bearbeitet",just_now:"Gerade eben",today:"heute",yesterday:"gestern",ago:"vor",are_you_sure_to_delete:"Lschen?",yes:"Ja",no:"Nein",resolve:"Erledigt",need_to_refresh_comments_version:"Andere Mitarbeiter haben krzlich nderungen an den Kommentaren vorgenommen. Bitte aktualisieren Sie die Kommentare und wiederholen Sie Ihre Anfrage",refresh:"Aktualisieren",refreshing:"Aktualisieren...",more:"Mehr",close_comments:"Kommentare schlieen",commenting:"Kommentieren",cover_settings:"Block-Hintergrund-Einstellungen",cover_settings_tab_image:"Bild",cover_settings_tab_color:"Farbe",cover_settings_tab_video:"Vdeo",error_text:`Ein Fehler ist aufgetreten. Bitte aktualisieren Sie die Seite oder wenden Sie sich an den <a href="${location.origin}/tickets/#!/">Support-Service</a>`,fill_type:"Flltyp",solid_color:"Einfarbige",gradient:"Gradient",video_type:"Videotyp",link:"Link",link_or_id:"Link oder ID",convert_warning:"Die Konvertierung in Zero Block hat zur Folge, dass der Block wieder so aussieht wie zu Beginn  mit Standardtext und -fotos. Wenn Sie Text und Fotos in Ihre eigenen ndern, werden diese nicht gespeichert.",convert:"Konvertieren, ohne den Inhalt zu speichern",cancel:"Abbrechen",note_too_much_data:"Hinweis: Zu viele Daten in diesem Eingabefeld. Wir empfehlen dringend, die Menge der Informationen zu reduzieren.",error_too_much_data:"Fehler: Zu viele Daten. Die nderungen werden nicht gespeichert. Bitte lschen Sie einen Teil der Informationen.",copied_to_clipboard:"Die Blcke werden in die Zwischenablage kopiert",copied_to_clipboard_use_paste:"Blcke in die Zwischenablage kopiert",nothing_to_paste:"Nichts zum Einfgen",block_operation_mode:"Block-Operationsmodus: <b>Klicken Sie auf den Block, um ihn auszuwhlen.</b>",block_selection_mode:"Block-Auswahlmodus: <b>Klicken Sie auf den Block, um ihn auszuwhlen.</b>",back_to_editing:"Zurck zum Bearbeiten</a>",exit_from_select_mode:"Auswahlmodus beenden",move:"Bewegen",click_the_block_v1:"Klicken Sie auf den Block, hinter den Sie die ausgewhlten Blcke setzen mchten.",click_the_block_v2:"Klicken Sie auf den Block, hinter den Sie Blcke aus der Zwischenablage einfgen mchten."}),"ES"===e&&(t={settings:"Ajustes",content:"Contenido",block_editor:"Editor de bloques",products:"Productos",posts:"Publicaciones",note_diff_edit_and_publish:"La apariencia de este bloque en el modo de edicin puede ser diferente de como se ve en la vista previa y en la pgina publicada.",duplicate:"Duplicar",delete:"Eliminar",hide_show:"Mostrar/Ocultar",cut:"Cortar",copy:"Copiar",paste:"Pegar",select:"Seleccionar",generate_with_ai:"Generar",move_up:"Subir",move_down:"Bajar",from:" ",to:"-",set_width_viewport_limit:"Se ha aplicado una restriccin de visualizacin a este bloque. Este bloque aparecer solo en pantallas con el ancho especificado.",recover_from_trash:"Recuperar de la Papelera",save_content_on_switch:"Mantener el contenido al cambiar",block_may_look_unbalanced:"El bloque seleccionado podra verse desigual debido a la diferencia de estructura,<br> y es posible que tenga que ajustar la configuracin o modificar el contenido.",maps_google_critycal_text:'<b>Atencin:</b> No se encontr la clave API de Google Maps. Por favor, ingrese la clave en la pestaa [Contenido]. <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">Obtener clave API de Google Maps</a><br>Consulte la gua en nuestro <a href="https://es.help.tilda.cc/google-maps" style="color:#fa8669 !important;" target="_blank">Centro de Ayuda</a>',maps_yandex_critycal_text:"<b>Atencin:</b> No se encontr la clave API de Yandex Maps. Por favor, ingrese la clave en la pestaa [Contenido].",forms_success_connected:"Se ha asignado el formulario. Ajustes actuales:<br>Los datos se recibirn de los dominios: ",forms_data_will_be_sent:"Los datos se enviarn a:",forms_has_not_script:'<b>Atencin:</b> No se complet la asignacin del formulario. Usted configur "Script propio para recibir datos", pero no peg la direccin del script. Ingrese la direccin del script a la que deben enviarse los datos del formulario. Tambin puede utilizar nuestros servicios de captura de datos; asgnelos en la seccin Formularios de los Ajustes del sitio.',forms_has_not_data_receiver:'<b>Atencin:</b> No se complet la asignacin del formulario. Por favor, abra la pestaa "Contenido" de este bloque y marque la casilla Receptor de datos.',forms_page_need_publish:"Publique la pgina, por favor",blocks_critycal_text:"Este bloque est desactualizado y ya no es compatible. Es posible que no funcione correctamente. Por favor, agregue la nueva versin del bloque de la Biblioteca o configure uno similar. Transfiera el contenido al nuevo bloque y vuelva a publicar la pgina.",background_color_settings:"Fondo del bloque",anchor_link_saved:"",something_went_wrong:"Algo sali mal.",enter_value:"Ingresar valor",hidden_block:"Este bloque est oculto. Haga clic en el botn 'Mostrar/Ocultar' a la derecha para activarlo.",block_adding:"Agregando bloques...",blocks_adding:"Agregando bloques...",show_block:"Ocultar",add_comment:"Agregar comentarios",has_unsave_comments:"Tiene comentarios sin leer",comments_upload_error:`Se produjo un error al cargar los comentarios. Actualice la pgina o contacte con el <a href="${location.origin}/tickets/#!/">Servicio de Soporte</a>`,comments:"Comentarios",write_comment:"Escribir un comentario...",save:"Guardar",edit:"Editado",edited:"Editado",just_now:"Justo ahora",today:"hoy",yesterday:"ayer",ago:"hace",are_you_sure_to_delete:"Eliminar?",yes:"S",no:"No",resolve:"Reso",need_to_refresh_comments_version:"Otros colaboradores han realizado cambios en los comentarios recientemente. Por favor, actualice los comentarios y repita su solicitud",refresh:"Actualizar",refreshing:"Actualizando...",more:"Ms",close_comments:"Cerrar comentarios",commenting:"Comentar",cover_settings:"Ajustes de fondo del bloque",cover_settings_tab_image:"Imagen",cover_settings_tab_color:"Color",cover_settings_tab_video:"Vdeo",error_text:`Se produjo un error. Actualice la pgina o contacte con el <a href="${location.origin}/tickets/#!/">Servicio de Soporte</a>`,fill_type:"Tipo de relleno",solid_color:"Color slido",gradient:"Degradado",video_type:"Tipo de video",link:"Enlace",link_or_id:"Enlace o ID",convert_warning:"Por la conversin a Zero Block, el bloque volver a su apariencia original, con el texto y fotos predeterminados. Si ha modificado el texto y las fotos, estos no se guardarn.",convert:"Convertir sin guardar el contenido",cancel:"Cancelar",note_too_much_data:"Nota: Hay demasiados datos en este campo de entrada. Recomendamos reducir la cantidad de informacin.",error_too_much_data:"Error: Hay demasiados datos. Los cambios no se guardarn. Por favor, elimine parte de la informacin.",copied_to_clipboard:"Los bloques se copian al portapapeles",copied_to_clipboard_use_paste:"Bloques copiados al portapapeles",nothing_to_paste:"No hay nada que pegar",block_operation_mode:"Modo de operacin de bloque: <b>haga clic en el bloque para seleccionarlo.</b>",block_selection_mode:"Modo de seleccin de bloque: <b>haga clic en el bloque para seleccionarlo.</b>",back_to_editing:"Regresar a editar</a>",exit_from_select_mode:"Salir de modo de seleccin",move:"Mover",click_the_block_v1:"Haga clic en el bloque despus del cual desea colocar los bloques seleccionados.",click_the_block_v2:"Haga clic en el bloque despus del cual desea insertar los bloques desde el portapapeles."}),window.record__dict||(window.record__dict={}),window.record__dict[e]=t}window.onpopstate=function(e){void 0===e.state||null===e.state?document.body.classList.contains("t396__body_overflow_hidden")&&tp__closeZero():void 0!==e.state.module&&"zero"==e.state.module&&tp__openZero(e.state.recordid,"replacestate")};
